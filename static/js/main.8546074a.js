/*! For license information please see main.8546074a.js.LICENSE.txt */
!function(){var e={506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},842:function(e,t,n){var r=n(754),i=n(67),a=n(585);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},205:function(e,t,n){var r=n(489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},67:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},109:function(e,t,n){var r=n(713);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},585:function(e,t,n){var r=n(8).default,i=n(506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:function(e,t,n){e.exports=n(727)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,C=60110,A=60112,N=60113,R=60120,O=60115,P=60116,D=60121,L=60128,j=60129,M=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;x=F("react.element"),_=F("react.portal"),I=F("react.fragment"),E=F("react.strict_mode"),T=F("react.profiler"),S=F("react.provider"),C=F("react.context"),A=F("react.forward_ref"),N=F("react.suspense"),R=F("react.suspense_list"),O=F("react.memo"),P=F("react.lazy"),D=F("react.block"),F("react.scope"),L=F("react.opaque.id"),j=F("react.debug_trace_mode"),M=F("react.offscreen"),U=F("react.legacy_hidden")}var B,V="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function q(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var H=!1;function W(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function K(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 22:return e=W(e.type._render,!1);case 1:return e=W(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return G(e.type);case D:return G(e._render);case P:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function J(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=J(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=J(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ae=null;function Ne(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var je=Pe,Me=!1,Ue=!1;function Fe(){null===Ce&&null===Ae||(Le(),Oe())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){Ve=!1}function qe(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var He=!1,We=null,Ke=!1,Ge=null,Qe={onError:function(e){He=!0,We=e}};function Je(e,t,n,r,i,a,o,s,u){He=!1,We=null,qe.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&bt(st,e),null!==ut&&bt(ut,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),At=St("animationiteration"),Nt=St("animationstart"),Rt=St("transitionend"),Ot=new Map,Pt=new Map,Dt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Nt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Ot.set(r,i),c(i,[r])}}(0,a.unstable_now)();var jt=8;function Mt(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=jt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Mt(u),i=jt):0!==(s&=a)&&(r=Mt(s),i=jt)}else 0!==(a=n&~o)?(r=Mt(a),i=jt):0!==s&&(r=Mt(s),i=jt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=jt)return t;jt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Bt(10,t):e;case 10:return 0===(e=Vt(192&~t))?Bt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Wt(e)/Kt|0)|0},Wt=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Jt=!0;function Yt(e,t,n,r){Me||Le();var i=$t,a=Me;Me=!0;try{De(i,e,t,n,r)}finally{(Me=a)||Fe()}}function Xt(e,t,n,r){Qt(Gt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Jt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),wn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=un(bn),_n=un(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var An=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=un(An),Rn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Dn),jn=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Fn=f&&"TextEvent"in window&&!Un,Bn=f&&(!Mn||Un&&8<Un&&11>=Un),Vn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,Yn=null;function Xn(e){Ar(e,0)}function $n(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Jn&&(Jn.detachEvent("onpropertychange",ar),Yn=Jn=null)}function ar(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Qn(t,Yn,e,Te(e)),e=Xn,Me)e(t);else{Me=!0;try{Pe(e,t)}finally{Me=!1,Fe()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,(Jn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function ur(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==$(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Je.apply(this,arguments),He){if(!He)throw Error(o(198));var l=We;He=!1,We=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Nr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Sr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Xt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{je(e,t,n)}finally{Ue=!1,Fe()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Ot.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Nn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case Ct:case At:case Nt:u=wn;break;case Rt:u=Pn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Be(p,h))&&l.push(jr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==u&&Fr(o,s,u,l,!1),null!==c&&null!==f&&Fr(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Wn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Bn&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Wn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Wn=!0)),0<(y=Mr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Hn(n))&&(k.data=g))),(g=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Mn&&qn(e,t)?(e=rn(),nn=tn=en=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ar(o,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(jr(e,a,i)),null!=(a=Be(e,t))&&r.push(jr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Fr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Be(n,a))&&o.unshift(jr(n,u,s)):i||null!=(u=Be(n,a))&&o.push(jr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var Vr=null,zr=null;function qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Jr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Xr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Jr(e);null!==e;){if(n=e[$r])return n;e=Jr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ai=a.unstable_requestPaint,Ni=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Oi=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,ji=a.unstable_IdlePriority,Mi={},Ui=void 0!==Ai?Ai:function(){},Fi=null,Bi=null,Vi=!1,zi=Ni(),qi=1e4>zi?Ni:function(){return Ni()-zi};function Hi(){switch(Ri()){case Oi:return 99;case Pi:return 98;case Di:return 97;case Li:return 96;case ji:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Oi;case 98:return Pi;case 97:return Di;case 96:return Li;case 95:return ji;default:throw Error(o(332))}}function Ki(e,t){return e=Wi(e),Ei(e,t)}function Gi(e,t,n){return e=Wi(e),Ti(e,t,n)}function Qi(){if(null!==Bi){var e=Bi;Bi=null,Si(e)}Ji()}function Ji(){if(!Vi&&null!==Fi){Vi=!0;var e=0;try{var t=Fi;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ti(Oi,Qi),n}finally{Vi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=$i.current;li($i),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Vs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Xu(t,e.mode,n)).return=e,t}if(xa(t)||z(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||z(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=_a(e,r,a),u.return=e,e=u)}return s(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Yu(a,e.mode,u)).return=e,e=r),s(e);if(xa(a))return v(e,r,a,u);if(z(a))return m(e,r,a,u);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Aa=ci(Ca),Na=ci(Ca),Ra=ci(Ca);function Oa(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Ra,t),fi(Na,e),fi(Aa,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Aa),fi(Aa,t)}function Da(){li(Aa),li(Na),li(Ra)}function La(e){Oa(Ra.current);var t=Oa(Aa.current),n=pe(t,e.type);t!==n&&(fi(Na,e),fi(Aa,n))}function ja(e){Na.current===e&&(li(Aa),li(Na))}var Ma=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fa=null,Ba=null,Va=!1;function za(e,t){var n=Hu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ha(e){if(Va){var t=Ba;if(t){var n=t;if(!qa(e,t)){if(!(t=Qr(n.nextSibling))||!qa(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(Fa=e);za(Fa,n)}Fa=e,Ba=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,Fa=e}}function Wa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Fa=e}function Ka(e){if(e!==Fa)return!1;if(!Va)return Wa(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Ba;t;)za(e,t),t=Qr(t.nextSibling);if(Wa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=Fa?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Ba=Fa=null,Va=!1}var Qa=[];function Ja(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=b.ReactCurrentDispatcher,Xa=b.ReactCurrentBatchConfig,$a=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if($a=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Po:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Oo,t=null!==eo&&null!==eo.next,$a=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ps;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ya.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Ht(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function wo(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function No(e,t){var n=Hi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ro(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Oo={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=No.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Ao,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},jo=b.ReactCurrentOwner,Mo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Fo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Bo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Wu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Ho(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Uo(e,t,i,n),t.child}function qo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Wo(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&wa(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&wa(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){qo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),as(e,t,a);r=t.stateNode,jo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,Jo,Yo,Xo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ma,1&a),null===e?(void 0!==i.fallback&&Ha(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Ju({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ju(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ja(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:ja(t);var a=Oa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Jo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Aa.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$r]=t,r[Zr]=s,n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Nr(Tr[e],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":ee(r,s),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Nr("invalid",r);break;case"textarea":ue(r,s),Nr("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Nr("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),a=r;break;case"iframe":case"object":case"embed":Nr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Nr(Tr[a],e);a=r;break;case"source":Nr("error",e),a=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),a=r;break;case"details":Nr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Nr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Nr("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?xe(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Nr("scroll",e):null!=f&&w(e,s,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Br)}qr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Ra.current),Oa(Aa.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return li(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Ps||0===(134217727&Vs)&&0===(134217727&zs)||gu(Ps,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ma),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=Ma.current,fi(Ma,s?1&t|2:1&t),n):null;case 23:case 24:return _u(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ja(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return ja(e),null;case 13:return li(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ma),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return _u(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Jo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(Aa.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Br)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Nr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===$s?$s=new Set([this]):$s.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Mu(n,e),ju(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&qr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Mu(t,n);else{r=t;try{i()}catch(a){Bu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function ws(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_s(e,n,t):Is(e,n,t)}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ws=qi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var As=Math.ceil,Ns=b.ReactCurrentDispatcher,Rs=b.ReactCurrentOwner,Os=0,Ps=null,Ds=null,Ls=0,js=0,Ms=ci(0),Us=0,Fs=null,Bs=0,Vs=0,zs=0,qs=0,Hs=null,Ws=0,Ks=1/0;function Gs(){Ks=qi()+500}var Qs,Js=null,Ys=!1,Xs=null,$s=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Os)?qi():-1!==su?su:su=qi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Hi()?1:2;if(0===uu&&(uu=Bs),0!==Yi.transition){0!==cu&&(cu=null!==Hs?Hs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!==(4&Os)&&98===e?e=Bt(12,uu):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;qt(e,t,n),e===Ps&&(zs|=t,4===Us&&gu(e,Ls));var r=Hi();1===t?0!==(8&Os)&&0===(48&Os)?ku(e):(mu(e,n),0===Os&&(Gs(),Qi())):(0===(4&Os)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Hs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=jt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Ps?Ls:0),t=jt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=ku.bind(null,e),null===Fi?(Fi=[n],Bi=Ti(Oi,Ji)):Fi.push(n),n=Mi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Os))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ps?Ls:0);if(0===n)return null;var r=n,i=Os;Os|=16;var a=Tu();for(Ps===e&&Ls===r||(Gs(),Iu(e,r));;)try{Au();break}catch(u){Eu(e,u)}if(na(),Ns.current=a,Os=i,null!==Ds?r=0:(Ps=null,Ls=0,r=Us),0!==(Bs&zs))Iu(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ft(e))&&(r=Su(e,n))),1===r)throw t=Fs,Iu(e,0),gu(e,n),mu(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ou(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Ws+500-qi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Wr(Ou.bind(null,e),r);break}Ou(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*As(n/1960))-n)){e.timeoutHandle=Wr(Ou.bind(null,e),n);break}Ou(e);break;default:throw Error(o(329))}}return mu(e,qi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~qs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Os))throw Error(o(327));if(Lu(),e===Ps&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(Bs&zs)&&(n=Su(e,t=Ut(e,t)))}else n=Su(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ft(e))&&(n=Su(e,t))),1===n)throw n=Fs,Iu(e,0),gu(e,t),mu(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ou(e),mu(e,qi()),null}function wu(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(Gs(),Qi())}}function bu(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(Gs(),Qi())}}function xu(e,t){fi(Ms,js),js|=t,Bs|=t}function _u(){js=Ms.current,li(Ms)}function Iu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ja();break;case 5:ja(r);break;case 4:Da();break;case 13:case 19:li(Ma);break;case 10:ra(r);break;case 23:case 24:_u()}n=n.return}Ps=e,Ds=Ku(e.current,null),Ls=js=Bs=t,Us=0,Fs=null,qs=zs=Vs=0}function Eu(e,t){for(;;){var n=Ds;try{if(na(),Ya.current=Oo,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($a=0,to=eo=Za=null,ro=!1,Rs.current=null,null===n||null===n.return){Us=1,Fs=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var w=Vu.bind(null,a,c,s);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===$s||!$s.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Ru(n)}catch(_){t=_,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Tu(){var e=Ns.current;return Ns.current=Oo,null===e?Oo:e}function Su(e,t){var n=Os;Os|=16;var r=Tu();for(Ps===e&&Ls===t||Iu(e,t);;)try{Cu();break}catch(i){Eu(e,i)}if(na(),Os=n,Ns.current=r,null!==Ds)throw Error(o(261));return Ps=null,Ls=0,Us}function Cu(){for(;null!==Ds;)Nu(Ds)}function Au(){for(;null!==Ds&&!Ci();)Nu(Ds)}function Nu(e){var t=Qs(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ds=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&js)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Us&&(Us=5)}function Ou(e){var t=Hi();return Ki(99,Pu.bind(null,e,t)),null}function Pu(e,t){do{Lu()}while(null!==eu);if(0!==(48&Os))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Ht(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ps&&(Ds=Ps=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Os,Os|=32,Rs.current=null,Vr=Jt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Jt=!1,lu=null,fu=!1,Js=r;do{try{Du()}catch(T){if(null===Js)throw Error(o(330));Bu(Js,T),Js=Js.nextEffect}}while(null!==Js);lu=null,Js=r;do{try{for(s=e;null!==Js;){var k=Js.flags;if(16&k&&ge(Js.stateNode,""),128&k){var w=Js.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xs(Js),Js.flags&=-3;break;case 6:xs(Js),Js.flags&=-3,Ts(Js.alternate,Js);break;case 1024:Js.flags&=-1025;break;case 1028:Js.flags&=-1025,Ts(Js.alternate,Js);break;case 4:Ts(Js.alternate,Js);break;case 8:Es(s,u=Js);var x=u.alternate;ws(u),null!==x&&ws(x)}Js=Js.nextEffect}}catch(T){if(null===Js)throw Error(o(330));Bu(Js,T),Js=Js.nextEffect}}while(null!==Js);if(b=zr,w=mr(),k=b.focusedElem,s=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&yr(k)&&(w=s.start,void 0===(b=s.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),u=k.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!b.extend&&x>s&&(u=s,s=x,x=u),u=pr(k,x),a=pr(k,s),u&&a&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),x>s?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Jt=!!Vr,zr=Vr=null,e.current=n,Js=r;do{try{for(k=e;null!==Js;){var _=Js.flags;if(36&_&&ys(k,Js.alternate,Js),128&_){w=void 0;var I=Js.ref;if(null!==I){var E=Js.stateNode;Js.tag,w=E,"function"===typeof I?I(w):I.current=w}}Js=Js.nextEffect}}catch(T){if(null===Js)throw Error(o(330));Bu(Js,T),Js=Js.nextEffect}}while(null!==Js);Js=null,Ui(),Os=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Js=r;null!==Js;)t=Js.nextEffect,Js.nextEffect=null,8&Js.flags&&((_=Js).sibling=null,_.stateNode=null),Js=t;if(0===(r=e.pendingLanes)&&($s=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,qi()),Ys)throw Ys=!1,e=Xs,Xs=null,e;return 0!==(8&Os)||Qi(),null}function Du(){for(;null!==Js;){var e=Js.alternate;fu||null===lu||(0!==(8&Js.flags)?et(Js,lu)&&(fu=!0):13===Js.tag&&Cs(e,Js)&&et(Js,lu)&&(fu=!0));var t=Js.flags;0!==(256&t)&&ms(e,Js),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Js=Js.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,Uu)}return!1}function ju(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Mu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Os))throw Error(o(331));var t=Os;Os|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Bu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Bu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Os=t,Qi(),!0}function Fu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(qt(e,1,t),mu(e,t))}function Bu(e,t){if(3===e.tag)Fu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))qt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===$s||!$s.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Ps===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>qi()-Ws?Iu(e,0):qs|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Hi()?1:2:(0===uu&&(uu=Bs),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(qt(e,t,n),mu(e,n))}function qu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hu(e,t,n,r){return new qu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Hu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Wu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Qu(n.children,i,a,t);case j:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Hu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case N:return(e=Hu(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=Hu(19,n,t,i)).elementType=R,e.lanes=a,e;case M:return Ju(n,i,a,t);case U:return(e=Hu(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case A:s=11;break e;case O:s=14;break e;case P:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Hu(7,e,r,t)).lanes=n,e}function Ju(e,t,n,r){return(e=Hu(23,e,r,t)).elementType=M,e.lanes=n,e}function Yu(e,t,n){return(e=Hu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Hu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $u(e,t,null!=n&&!0===n.hydrate),t=Hu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}bu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?$o(e,t,n):(fi(Ma,1&Ma.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return as(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Wu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===O)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ho(null,t,i,e,n);break e;case 1:t=Wo(null,t,i,e,n);break e;case 11:t=Fo(null,t,i,e,n);break e;case 14:t=Bo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ba=Qr(t.stateNode.containerInfo.firstChild),Fa=t,a=Va=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ha(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Hr(r,i)?s=null:null!==a&&Hr(r,a)&&(t.flags|=16),qo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Ha(t),null;case 13:return $o(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi($i,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Bo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=wu,De=function(e,t,n,r,i){var a=Os;Os|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Os=a)&&(Gs(),Qi())}},Le=function(){0===(49&Os)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,qi())}))}Qi()}(),Lu())},je=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Re,Oe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Os=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=wu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},234:function(e,t,n){var r,i=n(575).default,a=n(913).default,o=n(506).default,s=n(205).default,u=n(842).default,c=n(109).default;e.exports=(r=n(791),function(){"use strict";var e={418:function(e){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},251:function(e,t,n){n(418);var r=n(427),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},893:function(e,t,n){e.exports=n(251)},427:function(e){e.exports=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return function(){n.r(l),n.d(l,{Component:function(){return k},containCrop:function(){return y},default:function(){return k},makeAspectCrop:function(){return p}});var e=n(893),t=n(427);function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}var f={x:0,y:0,width:0,height:0,unit:"px"};function h(e,t,n){return Math.min(Math.max(e,t),n)}function d(e){return e&&e.width&&!isNaN(e.width)&&e.height&&!isNaN(e.height)}function p(e,t,n){if(!e.aspect||isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),c(c({},f),e);var r={unit:"px",x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0,aspect:e.aspect};return e.width&&(r.height=r.width/e.aspect),e.height&&(r.width=r.height*e.aspect),r.y+r.height>n&&(r.height=n-r.y,r.width=r.height*e.aspect),r.x+r.width>t&&(r.width=t-r.x,r.height=r.width/e.aspect),r}function v(e,t,n){return"%"===e.unit?c(c({},f),e):{unit:"%",aspect:e.aspect,x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function m(e,t,n){return e.unit?"px"===e.unit?c(c({},f),e):{unit:"px",aspect:e.aspect,x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:c(c(c({},f),e),{},{unit:"px"})}function y(e,t,n,r){var i=m(t,n,r),a=m(e,n,r);if(!i.aspect)return i.x<0?(i.width+=i.x,i.x=0):i.x+i.width>n&&(i.width=n-i.x),i.y+i.height>r&&(i.height=r-i.y),i;var o=!1;i.x<0?(i.x=0,i.width+=i.x,i.height=i.width/i.aspect,o=!0):i.x+i.width>n&&(i.width=n-i.x,i.height=i.width/i.aspect,o=!0),o&&a.y>i.y&&(i.y=i.y+(i.height-i.height));var s=!1;return i.y+i.height>r&&(i.height=r-i.y,i.width=i.height*i.aspect,s=!0),s&&a.x>i.x&&(i.x=i.x+(i.width-i.width)),i}var g={capture:!0,passive:!1},k=function(n){s(k,n);var l=u(k);function k(){var e;return i(this,k),(e=l.apply(this,arguments)).keysDown=new Set,e.docMoveBound=!1,e.mouseDownOnCrop=!1,e.dragStarted=!1,e.evData={clientStartX:0,clientStartY:0,cropStartWidth:0,cropStartHeight:0,cropStartX:0,cropStartY:0,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.componentRef=(0,t.createRef)(),e.mediaWrapperRef=(0,t.createRef)(),e.imageRef=(0,t.createRef)(),e.cropSelectRef=(0,t.createRef)(),e.state={cropIsActive:!1,newCropIsBeingDrawn:!1},e.onCropPointerDown=function(t){var n=e.props,r=n.crop,i=n.disabled,a=e.mediaDimensions,o=m(r,a.width,a.height);if(!i){t.cancelable&&t.preventDefault(),e.bindDocMove(),e.componentRef.current.focus({preventScroll:!0});var s=t.target.dataset.ord,u="nw"===s||"w"===s||"sw"===s,c="nw"===s||"n"===s||"ne"===s;e.evData={clientStartX:t.clientX,clientStartY:t.clientY,cropStartWidth:o.width,cropStartHeight:o.height,cropStartX:u?o.x+o.width:o.x,cropStartY:c?o.y+o.height:o.y,xDiff:0,yDiff:0,xInversed:u,yInversed:c,xCrossOver:u,yCrossOver:c,lastYCrossover:c,startXCrossOver:u,startYCrossOver:c,isResize:Boolean(s),ord:s||"ne"},e.mouseDownOnCrop=!0,e.setState({cropIsActive:!0})}},e.onComponentPointerDown=function(t){var n=e.props,r=n.crop,i=n.disabled,a=n.locked,o=n.keepSelection,s=n.onChange,u=n.zoom,c=void 0===u?1:u,l=n.spin,f=void 0===l?0:l,h=e.mediaWrapperRef.current.firstChild;if(t.target===h&&h.contains(t.target)&&!(i||a||o&&d(r))){t.cancelable&&t.preventDefault(),e.bindDocMove(),e.componentRef.current.focus({preventScroll:!0});var p=e.mediaWrapperRef.current.getBoundingClientRect(),y=0,g=0,k=(t.clientX-p.left)/c,w=(t.clientY-p.top)/c,b=f,x=Math.abs(b*Math.PI/180);b>-45&&b<=45||Math.abs(b)>135&&Math.abs(b)<=180?(y=k*Math.cos(x),g=w*Math.cos(x)):b>45&&b<=135?(y=w*Math.sin(x),g=k*Math.sin(x)*-1):b>-135&&b<=-45&&(y=w*Math.sin(x)*-1,g=k*Math.sin(x));var _={unit:"px",aspect:r?r.aspect:void 0,x:y,y:g,width:0,height:0};e.evData={clientStartX:t.clientX,clientStartY:t.clientY,cropStartWidth:_.width,cropStartHeight:_.height,cropStartX:_.x,cropStartY:_.y,xDiff:0,yDiff:0,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,lastYCrossover:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.mouseDownOnCrop=!0;var I=e.mediaDimensions,E=I.width,T=I.height;s(m(_,E,T),v(_,E,T)),e.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}},e.onDocPointerMove=function(t){var n=e.props,r=n.crop,i=n.disabled,a=n.onChange,s=n.onDragStart,u=n.zoom,c=void 0===u?1:u,l=n.spin,f=void 0===l?0:l;if(!i&&e.mouseDownOnCrop){t.cancelable&&t.preventDefault(),e.dragStarted||(e.dragStarted=!0,s&&s(t));var h,d=o(e).evData,p=(t.clientX-d.clientStartX)/c,y=(t.clientY-d.clientStartY)/c,g=f,k=Math.abs(g*Math.PI/180);if(g>-45&&g<=45||Math.abs(g)>135&&Math.abs(g)<=180?(d.xDiff=p*Math.cos(k),d.yDiff=y*Math.cos(k)):g>45&&g<=135?(d.xDiff=y*Math.sin(k),d.yDiff=p*Math.sin(k)*-1):g>-135&&g<=-45&&(d.xDiff=y*Math.sin(k)*-1,d.yDiff=p*Math.sin(k)),(h=d.isResize?e.resizeCrop():e.dragCrop())!==r){var w=e.mediaDimensions,b=w.width,x=w.height;a(m(h,b,x),v(h,b,x))}}},e.onComponentKeyDown=function(t){var n=e.props,r=n.crop,i=n.disabled,a=n.onChange,o=n.onComplete;if(!i){e.keysDown.add(t.key);var s=!1;if(d(r)){var u=e.makeNewCrop(),c=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?k.nudgeStepLarge:t.shiftKey?k.nudgeStepMedium:k.nudgeStep;if(e.keysDown.has("ArrowLeft")&&(u.x-=c,s=!0),e.keysDown.has("ArrowRight")&&(u.x+=c,s=!0),e.keysDown.has("ArrowUp")&&(u.y-=c,s=!0),e.keysDown.has("ArrowDown")&&(u.y+=c,s=!0),s){t.cancelable&&t.preventDefault();var l=e.mediaDimensions,f=l.width,p=l.height;u.x=h(u.x,0,f-u.width),u.y=h(u.y,0,p-u.height);var y=m(u,f,p),g=v(u,f,p);a(y,g),o&&o(y,g)}}}},e.onComponentKeyUp=function(t){e.keysDown.delete(t.key)},e.onDocPointerDone=function(t){var n=e.props,r=n.crop,i=n.disabled,a=n.onComplete,o=n.onDragEnd;if(e.unbindDocMove(),!i&&e.mouseDownOnCrop){e.mouseDownOnCrop=!1,e.dragStarted=!1;var s=e.mediaDimensions,u=s.width,c=s.height;o&&o(t),a&&a(m(r,u,c),v(r,u,c)),e.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}},e.onMediaLoaded=function(){var t=e.props,n=t.onComplete,r=t.onChange,i=e.createNewCrop(),a=i.pixelCrop,o=i.percentCrop;r(a,o),n&&n(a,o)},e.onImageLoad=function(t){var n=e.props,r=n.onComplete,i=n.onChange,a=n.onImageLoaded;if(!1!==(!a||a(t.currentTarget))){var o=e.createNewCrop(),s=o.pixelCrop,u=o.percentCrop;i(s,u),r&&r(s,u)}},e}return a(k,[{key:"componentDidMount",value:function(){this.componentRef.current&&this.componentRef.current.addEventListener("medialoaded",this.onMediaLoaded)}},{key:"componentWillUnmount",value:function(){this.componentRef.current&&this.componentRef.current.removeEventListener("medialoaded",this.onMediaLoaded)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.crop,r=t.onChange,i=t.onComplete;if(this.imageRef.current&&n&&e.crop!==n&&n.aspect&&(n.width&&!n.height||!n.width&&n.height)){var a=this.imageRef.current,o=a.width,s=a.height,u=p(this.makeNewCrop(),o,s),c=m(u,o,s),l=v(u,o,s);r(c,l),i&&i(c,l)}}},{key:"bindDocMove",value:function(){this.docMoveBound||(document.addEventListener("pointermove",this.onDocPointerMove,g),document.addEventListener("pointerup",this.onDocPointerDone,g),document.addEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!0)}},{key:"unbindDocMove",value:function(){this.docMoveBound&&(document.removeEventListener("pointermove",this.onDocPointerMove,g),document.removeEventListener("pointerup",this.onDocPointerDone,g),document.removeEventListener("pointercancel",this.onDocPointerDone,g),this.docMoveBound=!1)}},{key:"createNewCrop",value:function(){var e,t,n,r=this.mediaDimensions,i=r.width,a=r.height,o=(t=i,n=a,!(e=this.makeNewCrop()).aspect||e.width&&e.height?e:p(e,t,n));return{pixelCrop:m(o,i,a),percentCrop:v(o,i,a)}}},{key:"mediaDimensions",get:function(){var e=0,t=0;return this.mediaWrapperRef.current&&(e=this.mediaWrapperRef.current.clientWidth,t=this.mediaWrapperRef.current.clientHeight),{width:e,height:t}}},{key:"getCropStyle",value:function(){var e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"getNewSize",value:function(){var e,t=this.props,n=t.crop,r=t.minWidth,i=void 0===r?0:r,a=t.maxWidth,o=t.minHeight,s=void 0===o?0:o,u=t.maxHeight,c=this.evData,l=this.mediaDimensions,f=l.width,d=l.height,p=c.cropStartWidth+c.xDiff;return c.xCrossOver&&(p=Math.abs(p)),p=h(p,i,a||f),e=n.aspect?p/n.aspect:c.cropStartHeight+c.yDiff,c.yCrossOver&&(e=Math.min(Math.abs(e),c.cropStartY)),e=h(e,s,u||d),n.aspect&&(p=h(e*n.aspect,0,f)),{width:p,height:e}}},{key:"dragCrop",value:function(){var e=this.makeNewCrop(),t=this.evData,n=this.mediaDimensions,r=n.width,i=n.height;return e.x=h(t.cropStartX+t.xDiff,0,r-e.width),e.y=h(t.cropStartY+t.yDiff,0,i-e.height),e}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.props,n=t.crop,r=t.minWidth,i=void 0===r?0:r,a=t.minHeight,o=void 0===a?0:a,s=this.makeNewCrop(),u=e.ord;e.xInversed&&(e.xDiff-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight);var c=this.getNewSize(),l=e.cropStartX,f=e.cropStartY;e.xCrossOver&&(l=s.x+(s.width-c.width)),e.yCrossOver&&(f=!1===e.lastYCrossover?s.y-c.height:s.y+(s.height-c.height));var h=this.mediaDimensions,d=h.width,p=h.height,v=y(this.props.crop,{unit:s.unit,x:l,y:f,width:c.width,height:c.height,aspect:s.aspect},d,p);return s.aspect||k.xyOrds.indexOf(u)>-1?(s.x=v.x,s.y=v.y,s.width=v.width,s.height=v.height):k.xOrds.indexOf(u)>-1?(s.x=v.x,s.width=v.width):k.yOrds.indexOf(u)>-1&&(s.y=v.y,s.height=v.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),s.width<i||s.height<o?n:s}},{key:"getRotatedCursor",value:function(e,t){if(t>-135&&t<=-45||t>45&&t<=135)switch(e){case"nw":return{cursor:"ne-resize"};case"n":return{cursor:"w-resize"};case"ne":return{cursor:"nw-resize"};case"e":return{cursor:"s-resize"};case"se":return{cursor:"sw-resize"};case"s":return{cursor:"e-resize"};case"sw":return{cursor:"se-resize"};case"w":return{cursor:"n-resize"}}}},{key:"createCropSelection",value:function(){var t=this.props,n=t.disabled,r=t.locked,i=t.renderSelectionAddon,a=t.ruleOfThirds,o=t.crop,s=t.spin,u=void 0===s?0:s,c=this.getCropStyle();return(0,e.jsxs)("div",Object.assign({style:c,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown},{children:[!n&&!r&&(0,e.jsxs)("div",Object.assign({className:"ReactCrop__drag-elements"},{children:[(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",style:this.getRotatedCursor("nw",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",style:this.getRotatedCursor("n",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",style:this.getRotatedCursor("ne",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",style:this.getRotatedCursor("e",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",style:this.getRotatedCursor("se",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",style:this.getRotatedCursor("s",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",style:this.getRotatedCursor("sw",u)},void 0),(0,e.jsx)("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",style:this.getRotatedCursor("w",u)},void 0)]}),void 0),i&&d(o)&&(0,e.jsx)("div",Object.assign({className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()}},{children:i(this.state)}),void 0),a&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-hz"},void 0),(0,e.jsx)("div",{className:"ReactCrop__rule-of-thirds-vt"},void 0)]},void 0)]}),void 0)}},{key:"makeNewCrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=c(c({},f),this.props.crop||{}),n=this.mediaDimensions,r=n.width,i=n.height;return"px"===e?m(t,r,i):v(t,r,i)}},{key:"crossOverCheck",value:function(){var e=this.evData,t=this.props,n=t.minWidth,r=t.minHeight;!n&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!r&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver)}},{key:"render",value:function(){var t=this.props,n=t.children,i=t.circularCrop,a=t.className,o=t.crossorigin,s=t.crop,u=t.disabled,c=t.imageStyle,l=t.locked,f=t.imageAlt,h=t.onImageError,p=t.renderComponent,v=t.scale,m=void 0===v?1:v,y=t.src,g=t.style,k=t.rotate,w=void 0===k?0:k,b=t.ruleOfThirds,x=this.state,_=x.cropIsActive,I=x.newCropIsBeingDrawn,E=d(s)&&this.componentRef?this.createCropSelection():null,T=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}("ReactCrop",a,{"ReactCrop--active":_,"ReactCrop--disabled":u,"ReactCrop--locked":l,"ReactCrop--new-crop":I,"ReactCrop--fixed-aspect":s&&s.aspect,"ReactCrop--circular-crop":s&&i,"ReactCrop--rule-of-thirds":s&&b,"ReactCrop--invisible-crop":!this.dragStarted&&s&&!s.width&&!s.height});return(0,e.jsxs)("div",Object.assign({ref:this.componentRef,className:T,style:g,onPointerDown:this.onComponentPointerDown,tabIndex:0,onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp},{children:[(0,e.jsx)("div",Object.assign({ref:this.mediaWrapperRef,style:{transform:"scale(".concat(m,") rotate(").concat(w,"deg)")}},{children:p||(0,e.jsx)("img",{ref:this.imageRef,crossOrigin:o,className:"ReactCrop__image",style:c,src:y,onLoad:this.onImageLoad,onError:h,alt:f},void 0)}),void 0),n,E]}),void 0)}}]),k}(t.PureComponent);k.xOrds=["e","w"],k.yOrds=["n","s"],k.xyOrds=["nw","ne","se","sw"],k.nudgeStep=1,k.nudgeStepMedium=10,k.nudgeStepLarge=100}(),l}())},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},203:function(){"use strict"},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};u(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(A([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return y.prototype=g,u(x,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),u(x,s,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,A=null,N=3,R=!1,O=!1,P=!1;function D(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(P=!1,D(e),!O)if(null!==_(T))O=!0,n(j);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function j(e,n){O=!1,P&&(P=!1,i()),R=!0;var a=N;try{for(D(n),A=_(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var s=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?A.callback=s:A===_(T)&&I(T),D(n)}else I(T);A=_(T)}if(null!==A)var u=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{A=null,N=a,R=!1}}var M=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(P?i():P=!0,r(L,o-s))):(e.sortIndex=u,x(T,e),O||R||(O=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},756:function(e,t,n){"use strict";e.exports=n.p+"static/media/auth_img.57be92258f6efeadba3e.jpg"},561:function(e,t,n){"use strict";e.exports=n.p+"static/media/auth_img_width.df0a51dcb5cc85858d14.jpg"},891:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAAFACAIAAAAeeHHZAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAOxSURBVHhe7dQxAQAADMOg+ffbfxrygwhuAJE4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAMnEAmTiATBxAJg4gEweQiQPIxAFk4gAycQCZOIBMHEAmDiATB5CJA8jEAWTiADJxAJk4gEwcQCYOIBMHkIkDyMQBZOIAou0BWmxJtavFhsIAAAAASUVORK5CYII="}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".ded06d66.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="myrefactoring:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/twitter/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[o[c]]=0},r=self.webpackChunkmyrefactoring=self.webpackChunkmyrefactoring||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Se},SDK_VERSION:function(){return xt},_DEFAULT_ENTRY_NAME:function(){return st},_addComponent:function(){return ft},_addOrOverwriteComponent:function(){return ht},_apps:function(){return ct},_clearComponents:function(){return mt},_components:function(){return lt},_getProvider:function(){return pt},_registerComponent:function(){return dt},_removeServiceInstance:function(){return vt},deleteApp:function(){return Tt},getApp:function(){return It},getApps:function(){return Et},initializeApp:function(){return _t},onLog:function(){return At},registerVersion:function(){return Ct},setLogLevel:function(){return Nt}});var t=n(791),r=n(164);function i(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)}))}}function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||u(e,t)||c()}var f=n(757),h=n.n(f);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}var y,g=y||(y={});g.Pop="POP",g.Push="PUSH",g.Replace="REPLACE";var k=function(e){return e};function w(e){e.preventDefault(),e.returnValue=""}function b(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function x(){return Math.random().toString(36).substr(2,8)}function _(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function I(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function E(e,t){if(!e)throw new Error(t)}var T=(0,t.createContext)(null);var S=(0,t.createContext)(null);var C=(0,t.createContext)({outlet:null,matches:[]});function A(e){return function(e){var n=(0,t.useContext)(C).outlet;if(n)return(0,t.createElement)(M.Provider,{value:e},n);return n}(e.context)}function N(e){E(!1)}function R(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?y.Pop:s,c=e.navigator,l=e.static,f=void 0!==l&&l;D()&&E(!1);var h=Y(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=I(o));var p=o,v=p.pathname,m=void 0===v?"/":v,g=p.search,k=void 0===g?"":g,w=p.hash,b=void 0===w?"":w,x=p.state,_=void 0===x?null:x,C=p.key,A=void 0===C?"default":C,N=(0,t.useMemo)((function(){var e=Q(m,h);return null==e?null:{pathname:e,search:k,hash:b,state:_,key:A}}),[h,m,k,b,_,A]);return null==N?null:(0,t.createElement)(T.Provider,{value:d},(0,t.createElement)(S.Provider,{children:a,value:{location:N,navigationType:u}}))}function O(e){var n=e.children,r=e.location;return function(e,n){D()||E(!1);var r=(0,t.useContext)(C).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=L();if(n){var c,l="string"===typeof n?I(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||E(!1),s=l}else s=u;var f=s.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=Q(("string"===typeof t?I(t):t).pathname||"/",n);if(null==r)return null;var i=B(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=H(i[o],r);return a}(e,{pathname:h});0;return W(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:J([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:J([o,e.pathnameBase])})})),r)}(F(n),r)}function P(e){D()||E(!1);var n=(0,t.useContext)(T),r=n.basename,i=n.navigator,a=U(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?I(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===s?r+(f?"/":""):J([r,s])}return i.createHref({pathname:c,search:u,hash:o})}function D(){return null!=(0,t.useContext)(S)}function L(){return D()||E(!1),(0,t.useContext)(S).location}function j(){D()||E(!1);var e=(0,t.useContext)(T),n=e.basename,r=e.navigator,i=(0,t.useContext)(C).matches,a=L().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=G(e,JSON.parse(o),a);"/"!==n&&(i.pathname=J([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}var M=(0,t.createContext)(null);function U(e){var n=(0,t.useContext)(C).matches,r=L().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return G(e,JSON.parse(i),r)}),[e,i,r])}function F(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==N&&E(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=F(e.props.children)),n.push(r)}else n.push.apply(n,F(e.props.children))})),n}function B(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||E(!1),a.relativePath=a.relativePath.slice(r.length));var o=J([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&E(!1),B(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:q(o,e.index),routesMeta:s})})),t}var V=/^:\w+$/,z=function(e){return"*"===e};function q(e,t){var n=e.split("/"),r=n.length;return n.some(z)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!z(e)})).reduce((function(e,t){return e+(V.test(t)?3:""===t?1:10)}),r)}function H(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=K({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:J([i,l.pathname]),pathnameBase:J([i,l.pathnameBase]),route:f}),"/"!==l.pathnameBase&&(i=J([i,l.pathnameBase]))}return a}function W(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(C.Provider,{children:void 0!==i.route.element?i.route.element:(0,t.createElement)(A,null),value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function K(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function G(e,t,n){var r,i="string"===typeof e?I(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?I(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:X(a),hash:$(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var J=function(e){return e.join("/").replace(/\/\/+/g,"/")},Y=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},X=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},$=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&ie(e,t)}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function se(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function le(e){var t=se();return function(){var n,r=oe(e);if(t){var i=oe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}function fe(e,t,n){return fe=se()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},fe.apply(null,arguments)}function he(e){var t="function"===typeof Map?new Map:void 0;return he=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return fe(e,arguments,oe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},he(e)}var de=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(de(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ve=function(e){return function(e){var t=de(e);return pe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},me=function(e){try{return pe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ye(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ye(e[n],t[n]));return e}var ge=function(){function e(){var t=this;Z(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return te(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ke(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(a)),""].join(".")}function we(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function xe(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function _e(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ie(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ee(){var e=we();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Te(){return"object"===typeof indexedDB}var Se=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(re(a),Ce.prototype.create),a}return te(n)}(he(Error)),Ce=function(){function e(t,n,r){Z(this,e),this.service=t,this.serviceName=n,this.errors=r}return te(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ae(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Se(n,a,t);return o}}]),e}();function Ae(e,t){return e.replace(Ne,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ne=/\{\$([^}]+)}/g;function Re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Oe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Pe(s)&&Pe(u)){if(!Oe(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Pe(e){return null!==e&&"object"===typeof e}function De(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Le(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function je(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Me(e,t){var n=new Ue(e,t);return n.subscribe.bind(n)}var Ue=function(){function e(t,n){var r=this;Z(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return te(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ne(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Fe),void 0===r.error&&(r.error=Fe),void 0===r.complete&&(r.complete=Fe);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Fe(){}function Be(e){return e&&e._delegate?e._delegate:e}function Ve(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ze(e){return function(e){if(Array.isArray(e))return s(e)}(e)||Ve(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qe=function(){function e(t,n,r){Z(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return te(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),He="[DEFAULT]",We=function(){function e(t,n){Z(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return te(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ge;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:He})}catch(u){}var t,n=ne(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ze(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ze(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ne(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=l(i.value,2),u=s[0],c=s[1],f=this.normalizeInstanceIdentifier(u);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(pb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===He?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(pb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He;return this.component?this.component.multipleInstances?e:He:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ke,Ge,Qe=function(){function e(t){Z(this,e),this.name=t,this.providers=new Map}return te(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new We(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Je=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ge||(Ge={}));var Ye,Xe,$e={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Ze=Ge.INFO,et=(d(Ke={},Ge.DEBUG,"log"),d(Ke,Ge.VERBOSE,"log"),d(Ke,Ge.INFO,"info"),d(Ke,Ge.WARN,"warn"),d(Ke,Ge.ERROR,"error"),Ke),tt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=et[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},nt=function(){function e(t){Z(this,e),this.name=t,this._logLevel=Ze,this._logHandler=tt,this._userLogHandler=null,Je.push(this)}return te(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?$e[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.INFO].concat(t)),this._logHandler.apply(this,[this,Ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.WARN].concat(t)),this._logHandler.apply(this,[this,Ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ge.ERROR].concat(t)),this._logHandler.apply(this,[this,Ge.ERROR].concat(t))}}]),e}();var rt=function(){function e(t){Z(this,e),this.container=t}return te(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var it="@firebase/app",at="0.7.11",ot=new nt("@firebase/app"),st="[DEFAULT]",ut=(d(Ye={},it,"fire-core"),d(Ye,"@firebase/app-compat","fire-core-compat"),d(Ye,"@firebase/analytics","fire-analytics"),d(Ye,"@firebase/analytics-compat","fire-analytics-compat"),d(Ye,"@firebase/app-check","fire-app-check"),d(Ye,"@firebase/app-check-compat","fire-app-check-compat"),d(Ye,"@firebase/auth","fire-auth"),d(Ye,"@firebase/auth-compat","fire-auth-compat"),d(Ye,"@firebase/database","fire-rtdb"),d(Ye,"@firebase/database-compat","fire-rtdb-compat"),d(Ye,"@firebase/functions","fire-fn"),d(Ye,"@firebase/functions-compat","fire-fn-compat"),d(Ye,"@firebase/installations","fire-iid"),d(Ye,"@firebase/installations-compat","fire-iid-compat"),d(Ye,"@firebase/messaging","fire-fcm"),d(Ye,"@firebase/messaging-compat","fire-fcm-compat"),d(Ye,"@firebase/performance","fire-perf"),d(Ye,"@firebase/performance-compat","fire-perf-compat"),d(Ye,"@firebase/remote-config","fire-rc"),d(Ye,"@firebase/remote-config-compat","fire-rc-compat"),d(Ye,"@firebase/storage","fire-gcs"),d(Ye,"@firebase/storage-compat","fire-gcs-compat"),d(Ye,"@firebase/firestore","fire-fst"),d(Ye,"@firebase/firestore-compat","fire-fst-compat"),d(Ye,"fire-js","fire-js"),d(Ye,"firebase","fire-js-all"),Ye),ct=new Map,lt=new Map;function ft(e,t){try{e.container.addComponent(t)}catch(n){ot.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ht(e,t){e.container.addOrOverwriteComponent(t)}function dt(e){var t=e.name;if(lt.has(t))return ot.debug("There were multiple attempts to register component ".concat(t,".")),!1;lt.set(t,e);var n,r=ne(ct.values());try{for(r.s();!(n=r.n()).done;){ft(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function pt(e,t){return e.container.getProvider(t)}function vt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:st;pt(e,t).clearInstance(n)}function mt(){lt.clear()}var yt,gt,kt=(d(Xe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(Xe,"bad-app-name","Illegal App name: '{$appName}"),d(Xe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),d(Xe,"app-deleted","Firebase App named '{$appName}' already deleted"),d(Xe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),d(Xe,"invalid-log-argument","First argument to `onLog` must be null or a function."),Xe),wt=new Ce("app","Firebase",kt),bt=function(){function e(t,n,r){var i=this;Z(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qe("app",(function(){return i}),"PUBLIC"))}return te(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}]),e}(),xt="9.6.1";function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:st,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wt.create("bad-app-name",{appName:String(i)});var a=ct.get(i);if(a){if(Oe(e,a.options)&&Oe(r,a.config))return a;throw wt.create("duplicate-app",{appName:i})}var o,s=new Qe(i),u=ne(lt.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new bt(e,r,s);return ct.set(i,l),l}function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=ct.get(e);if(!t)throw wt.create("no-app",{appName:e});return t}function Et(){return Array.from(ct.values())}function Tt(e){return St.apply(this,arguments)}function St(){return(St=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ct.has(n)){e.next=6;break}return ct.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t,n){var r,i=null!==(r=ut[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ot.warn(s.join(" "))}dt(new qe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function At(e,t){if(null!==e&&"function"!==typeof e)throw wt.create("invalid-log-argument");!function(e,t){var n,r=ne(Je);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=$e[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ge[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Nt(e){var t;t=e,Je.forEach((function(e){e.setLogLevel(t)}))}yt="",dt(new qe("platform-logger",(function(e){return new rt(e)}),"PRIVATE")),Ct(it,at,yt),Ct(it,at,"esm2017"),Ct("fire-js","");var Rt=function(){function e(t,n){var r=this;Z(this,e),this._delegate=t,this.firebase=n,ft(t,new qe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return te(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Tt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ft(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ht(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ot=(d(gt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(gt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),gt),Pt=new Ce("app-compat","Firebase",Ot);var Dt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=_t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ct,setLogLevel:Nt,onLog:At,apps:null,SDK_VERSION:xt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(dt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Pt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ye(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Re(n,e=e||st))throw Pt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Rt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ye(n,e)},createSubscribe:Me,ErrorFactory:Ce,deepExtend:ye}),n}(),Lt=new nt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Lt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var jt=self.firebase.SDK_VERSION;jt&&jt.indexOf("LITE")>=0&&Lt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Mt=Dt;!function(e){Ct("@firebase/app-compat","0.1.12",e)}();function Ut(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oe(e)););return e}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ut(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}Mt.registerVersion("firebase","9.6.1","app-compat");function Bt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Vt;Object.create;var zt="facebook.com",qt="github.com",Ht="google.com",Wt="password",Kt="twitter.com",Gt="EMAIL_SIGNIN",Qt="PASSWORD_RESET",Jt="RECOVER_EMAIL",Yt="REVERT_SECOND_FACTOR_ADDITION",Xt="VERIFY_AND_CHANGE_EMAIL",$t="VERIFY_EMAIL";function Zt(){return d({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var en=function(){var e;return d(e={},"admin-restricted-operation","This operation is restricted to administrators only."),d(e,"argument-error",""),d(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),d(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),d(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),d(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),d(e,"cordova-not-ready","Cordova framework is not ready."),d(e,"cors-unsupported","This browser is not supported."),d(e,"credential-already-in-use","This credential is already associated with a different user account."),d(e,"custom-token-mismatch","The custom token corresponds to a different audience."),d(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),d(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),d(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),d(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),d(e,"email-already-in-use","The email address is already in use by another account."),d(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),d(e,"expired-action-code","The action code has expired."),d(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),d(e,"internal-error","An internal AuthError has occurred."),d(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),d(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),d(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),d(e,"invalid-auth-event","An internal AuthError has occurred."),d(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),d(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),d(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),d(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),d(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),d(e,"invalid-email","The email address is badly formatted."),d(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),d(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),d(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),d(e,"invalid-credential","The supplied auth credential is malformed or has expired."),d(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),d(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),d(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),d(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),d(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),d(e,"wrong-password","The password is invalid or the user does not have a password."),d(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),d(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),d(e,"invalid-provider-id","The specified provider ID is invalid."),d(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),d(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),d(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),d(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),d(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),d(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),d(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),d(e,"missing-continue-uri","A continue URL must be provided in the request."),d(e,"missing-iframe-start","An internal AuthError has occurred."),d(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),d(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),d(e,"missing-multi-factor-info","No second factor identifier is provided."),d(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),d(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),d(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),d(e,"app-deleted","This instance of FirebaseApp has been deleted."),d(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),d(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),d(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),d(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),d(e,"no-auth-event","An internal AuthError has occurred."),d(e,"no-such-provider","User was not linked to an account with the given provider."),d(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),d(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),d(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),d(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),d(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),d(e,"provider-already-linked","User can only be linked to one identity for the given provider."),d(e,"quota-exceeded","The project's quota for this operation has been exceeded."),d(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),d(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),d(e,"rejected-credential","The request contains malformed or mismatching credentials."),d(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),d(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),d(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),d(e,"timeout","The operation has timed out."),d(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),d(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),d(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),d(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),d(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),d(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),d(e,"unverified-email","The operation requires a verified email."),d(e,"user-cancelled","The user did not grant your application the permissions it requested."),d(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),d(e,"user-disabled","The user account has been disabled by an administrator."),d(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),d(e,"user-signed-out",""),d(e,"weak-password","The password must be 6 characters long or more."),d(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),d(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},tn=Zt,nn=new Ce("auth","Firebase",Zt()),rn=new nt("@firebase/auth");function an(e){if(rn.logLevel<=Ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];rn.error.apply(rn,["Auth (".concat(xt,"): ").concat(e)].concat(n))}}function on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ln.apply(void 0,[e].concat(n))}function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ln.apply(void 0,[e].concat(n))}function un(e,t,n){var r=Object.assign(Object.assign({},tn()),d({},t,n));return new Ce("auth","Firebase",r).create(t,{appName:e.name})}function cn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&on(e,"argument-error"),un(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ze(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ze(o)))}return nn.create.apply(nn,[e].concat(n))}function fn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ln.apply(void 0,[t].concat(r))}}function hn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw an(t),new Error(t)}function dn(e,t){e||hn(t)}var pn=new Map;function vn(e){dn(e instanceof Function,"Expected a class definition");var t=pn.get(e);return t?(dn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}function mn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yn(){return"http:"===gn()||"https:"===gn()}function gn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var kn=function(){function e(t,n){Z(this,e),this.shortDelay=t,this.longDelay=n,dn(n>t,"Short delay should be less than long delay!"),this.isMobile=be()||Ie()}return te(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(yn()||_e()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function wn(e,t){dn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var bn=function(){function e(){Z(this,e)}return te(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),xn=(d(Vt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),d(Vt,"MISSING_CUSTOM_TOKEN","internal-error"),d(Vt,"INVALID_IDENTIFIER","invalid-email"),d(Vt,"MISSING_CONTINUE_URI","internal-error"),d(Vt,"INVALID_PASSWORD","wrong-password"),d(Vt,"MISSING_PASSWORD","internal-error"),d(Vt,"EMAIL_EXISTS","email-already-in-use"),d(Vt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),d(Vt,"INVALID_IDP_RESPONSE","invalid-credential"),d(Vt,"INVALID_PENDING_TOKEN","invalid-credential"),d(Vt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),d(Vt,"MISSING_REQ_TYPE","internal-error"),d(Vt,"EMAIL_NOT_FOUND","user-not-found"),d(Vt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),d(Vt,"EXPIRED_OOB_CODE","expired-action-code"),d(Vt,"INVALID_OOB_CODE","invalid-action-code"),d(Vt,"MISSING_OOB_CODE","internal-error"),d(Vt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),d(Vt,"INVALID_ID_TOKEN","invalid-user-token"),d(Vt,"TOKEN_EXPIRED","user-token-expired"),d(Vt,"USER_NOT_FOUND","user-token-expired"),d(Vt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),d(Vt,"INVALID_CODE","invalid-verification-code"),d(Vt,"INVALID_SESSION_INFO","invalid-verification-id"),d(Vt,"INVALID_TEMPORARY_PROOF","invalid-credential"),d(Vt,"MISSING_SESSION_INFO","missing-verification-id"),d(Vt,"SESSION_EXPIRED","code-expired"),d(Vt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),d(Vt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),d(Vt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),d(Vt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),d(Vt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),d(Vt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),d(Vt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),d(Vt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),d(Vt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),d(Vt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),d(Vt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Vt),_n=new kn(3e4,6e4);function In(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function En(e,t,n,r){return Tn.apply(this,arguments)}function Tn(){return Tn=a(h().mark((function e(t,n,r,i){var o,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",Sn(t,o,a(h().mark((function e(){var a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=De(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",bn.fetch()(Rn(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}function Sn(e,t,n){return Cn.apply(this,arguments)}function Cn(){return(Cn=a(h().mark((function e(t,n,r){var i,a,o,s,u,c,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},xn),n),e.prev=2,a=new On(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Pn(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),f=l(c,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Pn(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw Pn(t,"email-already-in-use",s);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw un(t,v,p);case 30:on(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Se)){e.next=37;break}throw e.t0;case 37:on(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function An(e,t,n,r){return Nn.apply(this,arguments)}function Nn(){return Nn=a(h().mark((function e(t,n,r,i){var a,o,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,En(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&on(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Rn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?wn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var On=function(){function e(t){var n=this;Z(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sn(n.auth,"timeout"))}),_n.get())}))}return te(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Pn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sn(e,t,r);return i.customData._tokenResponse=n,i}function Dn(e,t){return Ln.apply(this,arguments)}function Ln(){return(Ln=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(e,t){return Mn.apply(this,arguments)}function Mn(){return(Mn=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Un(e,t){return Fn.apply(this,arguments)}function Fn(){return(Fn=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Vn(){return Vn=a(h().mark((function e(t){var n,r,i,a,o,s,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Be(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,fn((a=qn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Bn(zn(a.auth_time)),issuedAtTime:Bn(zn(a.iat)),expirationTime:Bn(zn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Vn.apply(this,arguments)}function zn(e){return 1e3*Number(e)}function qn(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return an("JWT malformed, contained fewer than 3 sections"),null;try{var a=me(r);return a?JSON.parse(a):(an("Failed to decode base64 JWT payload"),null)}catch(o){return an("Caught error parsing JWT payload as JSON",o),null}}function Hn(e,t){return Wn.apply(this,arguments)}function Wn(){return Wn=a(h().mark((function e(t,n){var r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Se&&Kn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Wn.apply(this,arguments)}function Kn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Gn=function(){function e(t){Z(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return te(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qn=function(){function e(t,n){Z(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return te(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Bn(this.lastLoginAt),this.creationTime=Bn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Jn(e){return Yn.apply(this,arguments)}function Yn(){return Yn=a(h().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Hn(t,Un(r,{idToken:i}));case 6:fn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Zn(o.providerUserInfo):[],u=$n(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Qn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}function Xn(){return(Xn=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be(t),e.next=3,Jn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $n(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ze(n),ze(t))}function Zn(e){return e.map((function(e){var t=e.providerId,n=Bt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function er(e,t){return tr.apply(this,arguments)}function tr(){return(tr=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(t,{},a(h().mark((function e(){var r,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=De({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Rn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",bn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nr=function(){function e(){Z(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return te(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){fn(e.idToken,"internal-error"),fn("undefined"!==typeof e.idToken,"internal-error"),fn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=qn(e);return fn(t,"internal-error"),fn("undefined"!==typeof t.exp,"internal-error"),fn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],fn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return hn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(fn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(fn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(fn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function rr(e,t){fn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ir=function(){function e(t){Z(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Bt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.metadata=new Qn(a.createdAt||void 0,a.lastLoginAt||void 0)}return te(e,[{key:"getIdToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(fn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Vn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Xn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(fn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){fn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(h().mark((function e(t){var n,r,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Jn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Hn(this,Dn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;fn(k&&_,t,"internal-error");var I=nr.fromJSON(this.name,_);fn("string"===typeof k,t,"internal-error"),rr(f,t.name),rr(h,t.name),fn("boolean"===typeof w,t,"internal-error"),fn("boolean"===typeof b,t,"internal-error"),rr(d,t.name),rr(p,t.name),rr(v,t.name),rr(m,t.name),rr(y,t.name),rr(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r){var i,a,o,s=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new nr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Jn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ar=function(){function e(){Z(this,e),this.type="NONE",this.storage={}}return te(e,[{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ar.type="NONE";var or=ar;function sr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ur=function(){function e(t,n,r){Z(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=sr(this.userKey,a.apiKey,o),this.fullPersistenceKey=sr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return te(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ir._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(h().mark((function t(n,r){var i,o,s,u,c,l,f,d,p,v,m,y=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(vn(or),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||vn(or),u=sr(i,n.config.apiKey,n.name),c=null,l=ne(r),t.prev=10,l.s();case 12:if((f=l.n()).done){t.next=29;break}return d=f.value,t.prev=14,t.next=17,d._get(u);case 17:if(!(p=t.sent)){t.next=23;break}return v=ir._fromJSON(n,p),d!==s&&(c=v),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(m=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&m.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=m[0],!c){t.next=44;break}return t.next=44,s._set(u,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function cr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(lr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vr(t))return"Blackberry";if(mr(t))return"Webos";if(fr(t))return"Safari";if((t.includes("chrome/")||hr(t))&&!t.includes("edge/"))return"Chrome";if(pr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/firefox\//i.test(e)}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/crios\//i.test(e)}function dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iemobile/i.test(e)}function pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/android/i.test(e)}function vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/blackberry/i.test(e)}function mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/webos/i.test(e)}function yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/iphone|ipad|ipod/i.test(e)}function gr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return yr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function kr(){return Ee()&&10===document.documentMode}function wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return yr(e)||pr(e)||mr(e)||vr(e)||/windows phone/i.test(e)||dr(e)}function br(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=cr(we());break;case"Worker":t="".concat(cr(we()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xt,"/").concat(r)}var xr=function(){function e(t,n){Z(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ir(this),this.idTokenSubscription=new Ir(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return te(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=vn(t)),this._initializationPromise=this.queue(a(h().mark((function r(){var i,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ur.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return fn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Be(t):null)&&fn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&fn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(vn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ce("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return fn(n=t&&vn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ur.create(this,[vn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return fn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return fn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=br(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function _r(e){return Be(e)}var Ir=function(){function e(t){var n=this;Z(this,e),this.auth=t,this.observer=null,this.addObserver=Me((function(e){return n.observer=e}))}return te(e,[{key:"next",get:function(){return fn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Er(e,t,n){var r=_r(e);fn(r._canInitEmulator,r,"emulator-config-failed"),fn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Tr(t),o=function(e){var t=Tr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Sr(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:Sr(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Tr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Cr=function(){function e(t,n){Z(this,e),this.providerId=t,this.signInMethod=n}return te(e,[{key:"toJSON",value:function(){return hn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return hn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return hn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return hn("not implemented")}}]),e}();function Ar(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:resetPassword",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e,t){return Or.apply(this,arguments)}function Or(){return(Or=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(e,t){return Dr.apply(this,arguments)}function Dr(){return(Dr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t){return jr.apply(this,arguments)}function jr(){return(jr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithPassword",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e,t){return Ur.apply(this,arguments)}function Ur(){return(Ur=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:sendOobCode",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e,t){return Br.apply(this,arguments)}function Br(){return(Br=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e,t){return zr.apply(this,arguments)}function zr(){return(zr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e,t){return Kr.apply(this,arguments)}function Kr(){return(Kr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return Qr.apply(this,arguments)}function Qr(){return(Qr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithEmailLink",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithEmailLink",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xr=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Z(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return te(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Lr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Gr(t,{email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Rr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Jr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:on(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Cr);function $r(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithIdp",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ei=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return te(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return $r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$r(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=De(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):on("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Bt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Cr);function ti(e,t){return ni.apply(this,arguments)}function ni(){return(ni=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:sendVerificationCode",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ri(){return(ri=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithPhoneNumber",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(){return(ii=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An(t,"POST","/v1/accounts:signInWithPhoneNumber",In(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Pn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ai=d({},"USER_NOT_FOUND","user-not-found");function oi(){return(oi=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",An(t,"POST","/v1/accounts:signInWithPhoneNumber",In(t,r),ai));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var si=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone","phone")).params=e,r}return te(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return ri.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ii.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return oi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Cr);var ui=function(){function e(t){var n,r,i,a,o,s;Z(this,e);var u=Le(je(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);fn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return te(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Le(je(e)).link,n=t?Le(je(t)).deep_link_id:null,r=Le(je(e)).deep_link_id;return(r?Le(je(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(pb){return null}}}]),e}();var ci=function(){function e(){Z(this,e),this.providerId=e.PROVIDER_ID}return te(e,null,[{key:"credential",value:function(e,t){return Xr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ui.parseLink(t);return fn(n,"argument-error"),Xr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ci.PROVIDER_ID="password",ci.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ci.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var li=function(){function e(t){Z(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return te(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),fi=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).scopes=[],e}return te(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ze(this.scopes)}}]),n}(li),hi=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return fn(e.idToken||e.accessToken,"argument-error"),ei._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return fn("providerId"in t&&"signInMethod"in t,"argument-error"),ei._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(fi),di=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"facebook.com")}return te(n,null,[{key:"credential",value:function(e){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pb){return null}}}]),n}(fi);di.FACEBOOK_SIGN_IN_METHOD="facebook.com",di.PROVIDER_ID="facebook.com";var pi=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return te(n,null,[{key:"credential",value:function(e,t){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(pb){return null}}}]),n}(fi);pi.GOOGLE_SIGN_IN_METHOD="google.com",pi.PROVIDER_ID="google.com";var vi=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"github.com")}return te(n,null,[{key:"credential",value:function(e){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pb){return null}}}]),n}(fi);vi.GITHUB_SIGN_IN_METHOD="github.com",vi.PROVIDER_ID="github.com";var mi=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return te(n,[{key:"_getIdTokenResponse",value:function(e){return $r(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,$r(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,$r(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Cr),yi=function(e){ae(n,e);var t=le(n);function n(e){return Z(this,n),fn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return te(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=mi.fromJSON(e);return fn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return mi._create(r,n)}catch(i){return null}}}]),n}(li),gi=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,"twitter.com")}return te(n,null,[{key:"credential",value:function(e,t){return ei._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(pb){return null}}}]),n}(fi);function ki(e,t){return wi.apply(this,arguments)}function wi(){return(wi=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signUp",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}gi.TWITTER_SIGN_IN_METHOD="twitter.com",gi.PROVIDER_ID="twitter.com";var bi=function(){function e(t){Z(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return te(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r,i){var a,o,s,u,c=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ir._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=xi(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(h().mark((function t(n,r,i){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=xi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function xi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function _i(){return _i=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new bi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ki(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,bi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}var Ii=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o,s;return Z(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return te(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Se);function Ei(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ii._fromErrorAndOperation(e,n,t,r);throw n}))}function Ti(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Si(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Ri(!0,r,n);case 3:return e.t0=jn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Ti(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ai(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=a(h().mark((function e(t,n){var r,i,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Hn,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",bi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ri(e,t,n){return Oi.apply(this,arguments)}function Oi(){return(Oi=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jn(n);case 2:i=Ti(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",fn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(e,t){return Di.apply(this,arguments)}function Di(){return Di=a(h().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Hn(t,Ei(i,a,n,t),r);case 6:return fn((o=e.sent).idToken,i,"internal-error"),fn(s=qn(o.idToken),i,"internal-error"),u=s.sub,fn(t.uid===u,i,"user-mismatch"),e.abrupt("return",bi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&on(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Di.apply(this,arguments)}function Li(e,t){return ji.apply(this,arguments)}function ji(){return ji=a(h().mark((function e(t,n){var r,i,a,o,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Ei(t,i,n);case 4:return a=e.sent,e.next=7,bi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Mi(e,t){return Ui.apply(this,arguments)}function Ui(){return(Ui=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Li(_r(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Ri(!1,r,n.providerId);case 3:return e.abrupt("return",Ai(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vi(e,t){return zi.apply(this,arguments)}function zi(){return(zi=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pi(Be(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(e,t){return Hi.apply(this,arguments)}function Hi(){return(Hi=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",An(t,"POST","/v1/accounts:signInWithCustomToken",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(){return(Wi=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r(t),e.next=3,qi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,bi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ki=function(){function e(t,n){Z(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return te(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Gi._fromServerResponse(e,t):on(e,"internal-error")}}]),e}(),Gi=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return te(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ki);function Qi(e,t,n){var r;fn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),fn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(fn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(fn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ji(){return(Ji=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),a={requestType:"PASSWORD_RESET",email:n},r&&Qi(i,a,r),e.next=5,Vr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yi(){return(Yi=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(Be(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr(Be(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $i(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,Ar(r,{oobCode:n});case 3:i=e.sent,fn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return fn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:fn(i.mfaInfo,r,"internal-error");case 13:fn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ki._fromServerResponse(_r(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(){return(ea=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(Be(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ta(e,t,n){return na.apply(this,arguments)}function na(){return(na=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),e.next=3,ki(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,bi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ra(){return(ra=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),a={requestType:"EMAIL_SIGNIN",email:n},fn(r.handleCodeInApp,i,"argument-error"),r&&Qi(i,a,r),e.next=6,qr(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return(ia=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),fn((a=ci.credentialWithLink(n,r||mn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Mi(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return(oa=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:createAuthUri",In(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(){return(sa=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yn()?mn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,aa(Be(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(){return(ua=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Qi(r.auth,a,n),e.next=8,Fr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(){return(ca=a(h().mark((function e(t,n,r){var i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Qi(i.auth,o,r),e.next=8,Wr(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function la(e,t){return fa.apply(this,arguments)}function fa(){return(fa=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",En(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(){return(ha=a(h().mark((function e(t,n){var r,i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Be(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Hn(a,la(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(e,t,n){return pa.apply(this,arguments)}function pa(){return(pa=a(h().mark((function e(t,n,r){var i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Hn(t,Rr(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var va=te((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Z(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ma=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o;return Z(this,n),(o=t.call(this,e,r,i)).username=a,o}return te(n)}(va),ya=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"facebook.com",r)}return te(n)}(va),ga=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return te(n)}(ma),ka=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"google.com",r)}return te(n)}(va),wa=function(e){ae(n,e);var t=le(n);function n(e,r,i){return Z(this,n),t.call(this,e,"twitter.com",r,i)}return te(n)}(ma);function ba(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=qn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new va(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ya(a,i);case"github.com":return new ga(a,i);case"google.com":return new ka(a,i);case"twitter.com":return new wa(a,i,e.screenName||null);case"custom":case"anonymous":return new va(a,null);default:return new va(a,r,i)}}(n)}var xa=function(){function e(t,n){Z(this,e),this.type=t,this.credential=n}return te(e,[{key:"toJSON",value:function(){return{multiFactorSession:d({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),_a=function(){function e(t,n,r){Z(this,e),this.session=t,this.hints=n,this.signInResolver=r}return te(e,[{key:"resolveSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=_r(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return Ki._fromServerResponse(r,e)}));fn(i.mfaPendingCredential,r,"internal-error");var s=xa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=a(h().mark((function e(t){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,bi._fromIdTokenResponse(r,n.operationType,o);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return fn(n.user,r,"internal-error"),e.abrupt("return",bi._forOperation(n.user,n.operationType,o));case 17:on(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ia(e,t){return En(e,"POST","/v2/accounts/mfaEnrollment:start",In(e,t))}var Ea=function(){function e(t){var n=this;Z(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ki._fromServerResponse(t.auth,e)})))}))}return te(e,[{key:"getSession",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=xa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Hn(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Hn(this.user,En(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",In(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ta=new WeakMap;var Sa="__sak",Ca=function(){function e(t,n){Z(this,e),this.storageRetriever=t,this.type=n}return te(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Sa,"1"),this.storage.removeItem(Sa),Promise.resolve(!0)):Promise.resolve(!1)}catch(pb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Aa=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=we();return fr(e)||yr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=wr(),e._shouldAllowMigration=!0,e}return te(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);kr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(oe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(oe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(oe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ca);Aa.type="LOCAL";var Na=Aa,Ra=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return te(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ca);Ra.type="SESSION";var Oa=Ra;function Pa(e){return Promise.all(e.map(function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Da=function(){function e(t){Z(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return te(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,o,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(u=this.handlersMap[o])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),c=Array.from(u).map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Pa(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function La(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Da.receivers=[];var ja=function(){function e(t){Z(this,e),this.target=t,this.handlers=new Set}return te(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=La("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ma(){return window}function Ua(){return"undefined"!==typeof Ma().WorkerGlobalScope&&"function"===typeof Ma().importScripts}function Fa(){return Ba.apply(this,arguments)}function Ba(){return(Ba=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Va(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var za="firebaseLocalStorageDb",qa="firebaseLocalStorage",Ha="fbase_key",Wa=function(){function e(t){Z(this,e),this.request=t}return te(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ka(e,t){return e.transaction([qa],t?"readwrite":"readonly").objectStore(qa)}function Ga(){var e=indexedDB.deleteDatabase(za);return new Wa(e).toPromise()}function Qa(){var e=indexedDB.open(za,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(qa,{keyPath:Ha})}catch(r){n(r)}})),e.addEventListener("success",a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(qa)){n.next=12;break}return r.close(),n.next=5,Ga();case 5:return n.t0=t,n.next=8,Qa();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ja(e,t,n){return Ya.apply(this,arguments)}function Ya(){return Ya=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ka(t,!0).put((d(i={},Ha,n),d(i,"value",r),i)),e.abrupt("return",new Wa(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function Xa(e,t){return $a.apply(this,arguments)}function $a(){return $a=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ka(t,!1).get(n),e.next=3,new Wa(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Za(e,t){var n=Ka(e,!0).delete(t);return new Wa(n).toPromise()}var eo=function(){function e(){Z(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return te(e,[{key:"_openDb",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Qa();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ua()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Da._getInstance(Ua()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(h().mark((function e(n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fa();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new ja(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Va()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Qa();case 5:return t=e.sent,e.next=8,Ja(t,Sa,"1");case 8:return e.next=10,Za(t,Sa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ja(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Xa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Za(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ka(e,!1).getAll();return new Wa(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ne(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();eo.type="LOCAL";var to=eo;function no(e,t){return En(e,"POST","/v2/accounts/mfaSignIn:start",In(e,t))}function ro(e){return io.apply(this,arguments)}function io(){return(io=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function oo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var so=1e12,uo=function(){function e(t){Z(this,e),this.auth=t,this.counter=so,this._widgets=new Map}return te(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new co(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||so;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||so;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||so,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),co=function(){function e(t,n,r){var i=this;Z(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;fn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return te(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var lo=oo("rcb"),fo=new kn(3e4,6e4),ho="https://www.google.com/recaptcha/api.js?",po=function(){function e(){Z(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ma().grecaptcha}return te(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return fn(vo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ma().grecaptcha):new Promise((function(r,i){var a=Ma().setTimeout((function(){i(sn(e,"network-request-failed"))}),fo.get());Ma()[lo]=function(){Ma().clearTimeout(a),delete Ma()[lo];var o=Ma().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(sn(e,"internal-error"))},ao("".concat(ho,"?").concat(De({onload:lo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(sn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ma().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function vo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var mo=function(){function e(){Z(this,e)}return te(e,[{key:"load",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new uo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),yo="recaptcha",go={theme:"light",type:"image"},ko=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},go),r=arguments.length>2?arguments[2]:void 0;Z(this,e),this.parameters=n,this.type=yo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_r(r),this.isInvisible="invisible"===this.parameters.size,fn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;fn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mo:new po,this.validateStartingState()}return te(e,[{key:"verify",value:function(){var e=a(h().mark((function e(){var t,n,r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){fn(!this.parameters.sitekey,this.auth,"argument-error"),fn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ma()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){fn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fn(yn()&&!Ua(),this.auth,"internal-error"),e.next=3,wo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,ro(this.auth);case 8:fn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return fn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function wo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var bo=function(){function e(t,n){Z(this,e),this.verificationId=t,this.onConfirmation=n}return te(e,[{key:"confirm",value:function(e){var t=si._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function xo(){return(xo=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),e.next=3,To(i,n,Be(r));case 3:return a=e.sent,e.abrupt("return",new bo(a,(function(e){return Mi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e,t,n){return Io.apply(this,arguments)}function Io(){return(Io=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,Ri(!1,i,"phone");case 3:return e.next=5,To(i.auth,n,Be(r));case 5:return a=e.sent,e.abrupt("return",new bo(a,(function(e){return Fi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(){return(Eo=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Be(t),e.next=3,To(i.auth,n,Be(r));case 3:return a=e.sent,e.abrupt("return",new bo(a,(function(e){return Vi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(e,t,n){return So.apply(this,arguments)}function So(){return So=a(h().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,fn("string"===typeof a,t,"argument-error"),fn(r.type===yo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return fn("enroll"===s.type,t,"internal-error"),e.next=13,Ia(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return fn("signin"===s.type,t,"internal-error"),fn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,no(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ti(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),So.apply(this,arguments)}function Co(){return(Co=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ai(Be(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ao=function(){function e(t){Z(this,e),this.providerId=e.PROVIDER_ID,this.auth=_r(t)}return te(e,[{key:"verifyPhoneNumber",value:function(e,t){return To(this.auth,e,Be(t))}}],[{key:"credential",value:function(e,t){return si._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?si._fromTokenResponse(n,r):null}}]),e}();function No(e,t){return t?vn(t):(fn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ao.PROVIDER_ID="phone",Ao.PHONE_SIGN_IN_METHOD="phone";var Ro=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"custom","custom")).params=e,r}return te(n,[{key:"_getIdTokenResponse",value:function(e){return $r(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return $r(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return $r(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Cr);function Oo(e){return Li(e.auth,new Ro(e),e.bypassAuthState)}function Po(e){var t=e.auth,n=e.user;return fn(n,t,"internal-error"),Pi(n,new Ro(e),e.bypassAuthState)}function Do(e){return Lo.apply(this,arguments)}function Lo(){return(Lo=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,fn(r=t.user,n,"internal-error"),e.abrupt("return",Ai(r,new Ro(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Z(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return te(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(h().mark((function t(n,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Oo;case"linkViaPopup":case"linkViaRedirect":return Do;case"reauthViaPopup":case"reauthViaRedirect":return Po;default:on(this.auth,"internal-error")}}},{key:"resolve",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Mo=new kn(2e3,1e4);function Uo(e,t,n){return Fo.apply(this,arguments)}function Fo(){return(Fo=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),cn(t,n,li),a=No(i,r),o=new qo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(){return(Bo=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=Be(t)).auth,n,li),a=No(i.auth,r),o=new qo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t,n){return zo.apply(this,arguments)}function zo(){return(zo=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=Be(t)).auth,n,li),a=No(i.auth,r),o=new qo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qo=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o){var s;return Z(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=re(s),s}return te(n,[{key:"executeNotNull",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return fn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(1===this.filter.length,"Popup operations only handle one event"),t=La(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Mo.get())}()}}]),n}(jo);qo.currentPopupAction=null;var Ho=new Map,Wo=function(e){ae(n,e);var t=le(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return te(n,[{key:"execute",value:function(){var e=a(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ho.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ko(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(oe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ho.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ho.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(oe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(oe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(jo);function Ko(e,t){return Go.apply(this,arguments)}function Go(){return(Go=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(n),i=Yo(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t){return Jo.apply(this,arguments)}function Jo(){return(Jo=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yo(t)._set(Xo(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(e){return vn(e._redirectPersistence)}function Xo(e){return sr("pendingRedirect",e.config.apiKey,e.name)}function $o(e,t,n){return function(e,t,n){return Zo.apply(this,arguments)}(e,t,n)}function Zo(){return(Zo=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_r(t),cn(t,n,li),a=No(i,r),e.next=5,Qo(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return function(e,t,n){return ts.apply(this,arguments)}(e,t,n)}function ts(){return(ts=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=Be(t)).auth,n,li),a=No(i.auth,r),e.next=5,Qo(a,i.auth);case 5:return e.next=7,us(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t,n){return function(e,t,n){return rs.apply(this,arguments)}(e,t,n)}function rs(){return(rs=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cn((i=Be(t)).auth,n,li),a=No(i.auth,r),e.next=5,Ri(!1,i,n.providerId);case 5:return e.next=7,Qo(a,i.auth);case 7:return e.next=9,us(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function is(e,t){return as.apply(this,arguments)}function as(){return(as=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t)._initializationPromise;case 2:return e.abrupt("return",os(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function os(e,t){return ss.apply(this,arguments)}function ss(){return ss=a(h().mark((function e(t,n){var r,i,a,o,s,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=_r(t),a=No(i,n),o=new Wo(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function us(e){return cs.apply(this,arguments)}function cs(){return(cs=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=La("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ls=function(){function e(t){Z(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return te(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!hs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(fs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function fs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function hs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ds(e){return ps.apply(this,arguments)}function ps(){return ps=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",En(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}var vs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ms=/^https?/;function ys(){return(ys=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ds(t);case 4:n=e.sent,r=n.authorizedDomains,i=ne(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!gs(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:on(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function gs(e){var t=mn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ms.test(r))return!1;if(vs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ks=new kn(3e4,6e4);function ws(){var e=Ma().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ze(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var bs=null;function xs(e){return bs=bs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ws(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ws(),n(sn(e,"network-request-failed"))},timeout:ks.get()})}if(null===(i=null===(r=Ma().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ma().gapi)||void 0===a?void 0:a.load)){var s=oo("iframefcb");return Ma()[s]=function(){gapi.load?o():n(sn(e,"network-request-failed"))},ao("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw bs=null,e}))}(e),bs}var _s=new kn(5e3,15e3),Is={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Es=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ts(e){var t=e.config;fn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?wn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:xt},i=Es.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(De(r).slice(1))}function Ss(e){return Cs.apply(this,arguments)}function Cs(){return Cs=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs(t);case 2:return n=e.sent,fn(r=Ma().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ts(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Is,dontclear:!0},(function(e){return new Promise(function(){var n=a(h().mark((function n(r,i){var a,o,s;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Ma().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sn(t,"network-request-failed"),o=Ma().setTimeout((function(){i(a)}),_s.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}var As={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ns="_blank",Rs="http://localhost",Os=function(){function e(t){Z(this,e),this.window=t,this.associatedEvent=null}return te(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ps(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},As),{width:r.toString(),height:i.toString(),top:a,left:o}),c=we().toLowerCase();n&&(s=hr(c)?Ns:n),lr(c)&&(t=t||Rs,u.scrollbars="yes");var f=Object.entries(u).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(gr(c)&&"_self"!==s)return Ds(t||"",s),new Os(null);var h=window.open(t||"",s,f);fn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Os(h)}function Ds(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ls="__/auth/handler",js="emulator/auth/handler";function Ms(e,t,n,r,i,a){fn(e.config.authDomain,e,"auth-domain-config-required"),fn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xt,eventId:i};if(t instanceof li){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=l(u[s],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof fi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ls);return wn(t,js)}(e),"?").concat(De(p).slice(1))}var Us="webStorageSupport",Fs=function(){function e(){Z(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oa,this._completeRedirectFn=os}return te(e,[{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ms(t,n,r,mn(),i),e.abrupt("return",Ps(t,o,La()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ms(t,n,r,mn(),i),Ma().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(dn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ss(t);case 2:return n=e.sent,r=new ls(t),n.register("authEvent",(function(e){return fn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Us,{type:Us},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),on(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ys.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return wr()||fr()||yr()}}]),e}(),Bs=Fs,Vs=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,"phone")).credential=e,r}return te(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return En(e,"POST","/v2/accounts/mfaEnrollment:finalize",In(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return En(e,"POST","/v2/accounts/mfaSignIn:finalize",In(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Z(this,e),this.factorId=t}return te(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return hn("unexpected MultiFactorSessionType")}}}]),e}()),zs=function(){function e(){Z(this,e)}return te(e,null,[{key:"assertion",value:function(e){return Vs._fromCredential(e)}}]),e}();zs.FACTOR_ID="phone";var qs,Hs="@firebase/auth",Ws="0.19.4",Ks=function(){function e(t){Z(this,e),this.auth=t,this.internalListeners=new Map}return te(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){fn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Gs(){return window}qs="Browser",dt(new qe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){fn(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),fn(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:qs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:br(qs)},r=new xr(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),dt(new qe("auth-internal",(function(e){return function(e){return new Ks(e)}(_r(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(Hs,Ws,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qs)),Ct(Hs,Ws,"esm2017");function Qs(e,t,n){return Js.apply(this,arguments)}function Js(){return Js=a(h().mark((function e(t,n,r){var i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gs(),o=a.BuildInfo,dn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,tu(n.sessionId);case 4:return s=e.sent,u={},yr()?u.ibi=o.packageName:pr()?u.apn=o.packageName:on(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Ms(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}function Ys(){return(Ys=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gs(),r=n.BuildInfo,i={},yr()?i.iosBundleId=r.packageName:pr()?i.androidPackageName=r.packageName:on(t,"operation-not-supported-in-this-environment"),e.next=5,ds(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xs(e){var t=Gs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function $s(e,t,n){return Zs.apply(this,arguments)}function Zs(){return Zs=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Gs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(sn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),pr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Zs.apply(this,arguments)}function eu(e){var t,n,r,i,a,o,s,u,c,l,f=Gs();fn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fn("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ru(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e){if(dn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var iu=function(e){ae(n,e);var t=le(n);function n(){var e;return Z(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return te(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Ft(oe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ls);function au(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:lu(),postBody:null,tenantId:e.tenantId,error:sn(e,"no-auth-event")}}function ou(e,t){return fu()._set(hu(e),t)}function su(e){return uu.apply(this,arguments)}function uu(){return(uu=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fu()._get(hu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,fu()._remove(hu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e,t){var n,r,i=function(e){var t=du(e),n=t.link?decodeURIComponent(t.link):void 0,r=du(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return du(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=du(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?sn(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function lu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function fu(){return vn(Na)}function hu(e){return sr("authEvent",e.config.apiKey,e.name)}function du(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||Ve(t)||u(t)||c();r[0];return Le(r.slice(1).join("?"))}var pu=function(){function e(){Z(this,e),this._redirectPersistence=Oa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=os}return te(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new iu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){on(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return eu(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ho.clear(),e.next=10,this._originValidation(t);case 10:return o=au(t,r,i),e.next=13,ou(t,o);case 13:return e.next=15,Qs(t,o,n);case 15:return s=e.sent,e.next=18,Xs(s);case 18:return u=e.sent,e.abrupt("return",$s(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ys.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Gs(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,su(e);case 2:t.onEvent(mu());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=a(h().mark((function n(r){var i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,su(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=cu(i,r.url)),t.onEvent(a||mu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var c=i,l="".concat(o.packageName.toLowerCase(),"://");Gs().handleOpenURL=function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&u({url:t}),"function"===typeof c)try{c(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),vu=pu;function mu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sn("no-auth-event")}}function yu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return!("file:"!==yu()&&"ionic:"!==yu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ku(){return Ee()&&11===(null===document||void 0===document?void 0:document.documentMode)}function wu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return/Edge\/\d+/.test(e)}function bu(){try{var e=self.localStorage,t=La();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();return ku()||wu(e)}()||Te()}catch(n){return xu()&&Te()}return!1}function xu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _u(){return("http:"===yu()||"https:"===yu()||_e()||gu())&&!(Ie()||xe())&&bu()&&!xu()}function Iu(){return gu()&&"undefined"!==typeof document}function Eu(){return Tu.apply(this,arguments)}function Tu(){return(Tu=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Iu()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Su={LOCAL:"local",NONE:"none",SESSION:"session"},Cu=fn,Au="persistence";function Nu(e,t){Cu(Object.values(Su).includes(t),e,"invalid-persistence-type"),Ie()?Cu(t!==Su.SESSION,e,"unsupported-persistence-type"):xe()?Cu(t===Su.NONE,e,"unsupported-persistence-type"):xu()?Cu(t===Su.NONE||t===Su.LOCAL&&Te(),e,"unsupported-persistence-type"):Cu(t===Su.NONE||bu(),e,"unsupported-persistence-type")}function Ru(e){return Ou.apply(this,arguments)}function Ou(){return(Ou=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Pu(),r=sr(Au,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(){return"undefined"!==typeof window?window:null}var Du=fn,Lu=function(){function e(){Z(this,e),this.browserResolver=vn(Bs),this.cordovaResolver=vn(vu),this.underlyingResolver=null,this._redirectPersistence=Oa,this._completeRedirectFn=os}return te(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Iu()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Du(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Eu();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ju(e){return e.unwrap()}function Mu(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new zu(e,function(e,t){var n,r=Be(e),i=t;return fn(t.customData.operationType,r,"argument-error"),fn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_a._fromError(r,i)}(e,t));else if(r){var i=Uu(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Uu(e){var t=(e instanceof Se?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Se)&&"temporaryProof"in t&&"phoneNumber"in t)return Ao.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Wt)return null;switch(r){case Ht:n=pi;break;case zt:n=di;break;case qt:n=vi;break;case Kt:n=gi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?mi._create(r,s):ei._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new hi(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Se?n.credentialFromError(e):n.credentialFromResult(e)}function Fu(e,t){return t.catch((function(t){throw t instanceof Se&&Mu(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Uu(t)),additionalUserInfo:ba(e),user:qu.getOrCreate(r)}}))}function Bu(e,t){return Vu.apply(this,arguments)}function Vu(){return(Vu=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Fu(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zu=function(){function e(t,n){Z(this,e),this.resolver=n,this.auth=t.wrapped()}return te(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Fu(ju(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),qu=function(){function e(t){Z(this,e),this._delegate=t,this.multiFactor=function(e){var t=Be(e);return Ta.has(t)||Ta.set(t,Ea._fromUser(t)),Ta.get(t)}(t)}return te(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Fi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bu(this.auth,_o(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Vo(this._delegate,t,Lu)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(_r(this.auth));case 2:return e.abrupt("return",ns(this._delegate,t,Lu));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Vi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Bu(this.auth,function(e,t,n){return Eo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Fu(this.auth,function(e,t,n){return Bo.apply(this,arguments)}(this._delegate,e,Lu))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(_r(this.auth));case 2:return e.abrupt("return",es(this._delegate,t,Lu));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ua.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Si(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return da(Be(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return da(Be(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Co.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ha.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ca.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();qu.USER_MAP=new WeakMap;var Hu=fn,Wu=function(){function e(t,n){if(Z(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Hu(r,"invalid-api-key",{appName:t.name});var i=[or];if("undefined"!==typeof window){i=function(e,t){var n=Pu();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=sr(Au,e,t);switch(n.sessionStorage.getItem(r)){case Su.NONE:return[or];case Su.LOCAL:return[to,Oa];case Su.SESSION:return[Oa];default:return[]}}(r,t.name);for(var a=0,o=[to,Na,Oa];a<o.length;a++){var s=o[a];i.includes(s)||i.push(s)}}Hu(r,"invalid-api-key",{appName:t.name});var u="undefined"!==typeof window?Lu:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:u}}),this._delegate._updateErrorMap(en),this.linkUnderlyingAuth()}return te(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?qu.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Er(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Xi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return $i(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Yi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this._delegate,ta(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return sa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ui.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(_u(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,is(this._delegate,Lu);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Fu(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){_r(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ku(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ku(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ra.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ji.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nu(this._delegate,t),e.t0=t,e.next=e.t0===Su.SESSION?4:e.t0===Su.LOCAL?6:e.t0===Su.NONE?11:13;break;case 4:return n=Oa,e.abrupt("break",14);case 6:return e.next=8,vn(to)._isAvailable();case 8:return r=e.sent,n=r?to:Na,e.abrupt("break",14);case 11:return n=or,e.abrupt("break",14);case 13:return e.abrupt("return",on("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Fu(this._delegate,function(e){return _i.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Fu(this._delegate,Mi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Fu(this._delegate,function(e,t){return Wi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Fu(this._delegate,function(e,t,n){return Mi(Be(e),ci.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Fu(this._delegate,function(e,t,n){return ia.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Bu(this._delegate,function(e,t,n){return xo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(_u(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Fu(this._delegate,Uo(this._delegate,t,Lu)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hu(_u(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ru(this._delegate);case 3:return e.abrupt("return",$o(this._delegate,t,Lu));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return ea.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ku(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&qu.getOrCreate(e))},error:t,complete:n}}Wu.Persistence=Su;var Gu=function(){function e(){Z(this,e),this.providerId="phone",this._delegate=new Ao(ju(Mt.auth()))}return te(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ao.credential(e,t)}}]),e}();Gu.PHONE_SIGN_IN_METHOD=Ao.PHONE_SIGN_IN_METHOD,Gu.PROVIDER_ID=Ao.PROVIDER_ID;var Qu,Ju=fn,Yu=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt.app();Z(this,e),Ju(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ko(t,n,i.auth()),this.type=this._delegate.type}return te(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Qu=Mt).INTERNAL.registerComponent(new qe("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Wu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Gt,PASSWORD_RESET:Qt,RECOVER_EMAIL:Jt,REVERT_SECOND_FACTOR_ADDITION:Yt,VERIFY_AND_CHANGE_EMAIL:Xt,VERIFY_EMAIL:$t}},EmailAuthProvider:ci,FacebookAuthProvider:di,GithubAuthProvider:vi,GoogleAuthProvider:pi,OAuthProvider:hi,SAMLAuthProvider:yi,PhoneAuthProvider:Gu,PhoneMultiFactorGenerator:zs,RecaptchaVerifier:Yu,TwitterAuthProvider:gi,Auth:Wu,AuthCredential:Cr,Error:Se}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Qu.registerVersion("@firebase/auth-compat","0.2.4");var Xu,$u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Zu={},ec=ec||{},tc=$u||self;function nc(){}function rc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ic(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ac="closure_uid_"+(1e9*Math.random()>>>0),oc=0;function sc(e,t,n){return e.call.apply(e.bind,arguments)}function uc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function cc(e,t,n){return(cc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sc:uc).apply(null,arguments)}function lc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function hc(){this.s=this.s,this.o=this.o}var dc={};hc.prototype.s=!1,hc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ac)&&e[ac]||(e[ac]=++oc)}(this);delete dc[e]}},hc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var pc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},vc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function mc(e){return Array.prototype.concat.apply([],arguments)}function yc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function gc(e){return/^[\s\xa0]*$/.test(e)}var kc,wc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function bc(e,t){return-1!=e.indexOf(t)}function xc(e,t){return e<t?-1:e>t?1:0}e:{var _c=tc.navigator;if(_c){var Ic=_c.userAgent;if(Ic){kc=Ic;break e}}kc=""}function Ec(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Tc(e){var t={};for(var n in e)t[n]=e[n];return t}var Sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Sc.length;a++)n=Sc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ac(e){return Ac[" "](e),e}Ac[" "]=nc;var Nc,Rc=bc(kc,"Opera"),Oc=bc(kc,"Trident")||bc(kc,"MSIE"),Pc=bc(kc,"Edge"),Dc=Pc||Oc,Lc=bc(kc,"Gecko")&&!(bc(kc.toLowerCase(),"webkit")&&!bc(kc,"Edge"))&&!(bc(kc,"Trident")||bc(kc,"MSIE"))&&!bc(kc,"Edge"),jc=bc(kc.toLowerCase(),"webkit")&&!bc(kc,"Edge");function Mc(){var e=tc.document;return e?e.documentMode:void 0}e:{var Uc="",Fc=function(){var e=kc;return Lc?/rv:([^\);]+)(\)|;)/.exec(e):Pc?/Edge\/([\d\.]+)/.exec(e):Oc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):jc?/WebKit\/(\S+)/.exec(e):Rc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Fc&&(Uc=Fc?Fc[1]:""),Oc){var Bc=Mc();if(null!=Bc&&Bc>parseFloat(Uc)){Nc=String(Bc);break e}}Nc=Uc}var Vc,zc={};function qc(){return function(e){var t=zc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=wc(String(Nc)).split("."),n=wc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=xc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||xc(0==a[2].length,0==o[2].length)||xc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(tc.document&&Oc){var Hc=Mc();Vc=Hc||(parseInt(Nc,10)||void 0)}else Vc=void 0;var Wc=Vc,Kc=function(){if(!tc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tc.addEventListener("test",nc,t),tc.removeEventListener("test",nc,t)}catch(n){}return e}();function Gc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Qc(e,t){if(Gc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lc){e:{try{Ac(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Jc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qc.Z.h.call(this)}}Gc.prototype.h=function(){this.defaultPrevented=!0},fc(Qc,Gc);var Jc={2:"touch",3:"pen",4:"mouse"};Qc.prototype.h=function(){Qc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yc="closure_listenable_"+(1e6*Math.random()|0),Xc=0;function $c(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xc,this.ca=this.fa=!1}function Zc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function el(e){this.src=e,this.g={},this.h=0}function tl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=pc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function nl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}el.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=nl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new $c(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var rl="closure_lm_"+(1e6*Math.random()|0),il={};function al(e,t,n,r,i){if(r&&r.once)return sl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)al(e,t[a],n,r,i);return null}return n=pl(n),e&&e[Yc]?e.N(t,n,ic(r)?!!r.capture:!!r,i):ol(e,t,n,!1,r,i)}function ol(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ic(i)?!!i.capture:!!i,s=hl(e);if(s||(e[rl]=s=new el(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=fl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ll(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function sl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)sl(e,t[a],n,r,i);return null}return n=pl(n),e&&e[Yc]?e.O(t,n,ic(r)?!!r.capture:!!r,i):ol(e,t,n,!0,r,i)}function ul(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ul(e,t[a],n,r,i);else r=ic(r)?!!r.capture:!!r,n=pl(n),e&&e[Yc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=nl(a=e.g[t],n,r,i))&&(Zc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=hl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=nl(t,n,r,i)),(n=-1<e?t[e]:null)&&cl(n))}function cl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yc])tl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ll(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hl(t))?(tl(n,e),0==n.h&&(n.src=null,t[rl]=null)):Zc(e)}}}function ll(e){return e in il?il[e]:il[e]="on"+e}function fl(e,t){if(e.ca)e=!0;else{t=new Qc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&cl(e),e=n.call(r,t)}return e}function hl(e){return(e=e[rl])instanceof el?e:null}var dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function pl(e){return"function"===typeof e?e:(e[dl]||(e[dl]=function(t){return e.handleEvent(t)}),e[dl])}function vl(){hc.call(this),this.i=new el(this),this.P=this,this.I=null}function ml(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Gc(t,e);else if(t instanceof Gc)t.target=t.target||e;else{var i=t;Cc(t=new Gc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=yl(o,r,!0,t)&&i}if(i=yl(o=t.g=e,r,!0,t)&&i,i=yl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=yl(o=t.g=n[a],r,!1,t)&&i}function yl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&tl(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}fc(vl,hc),vl.prototype[Yc]=!0,vl.prototype.removeEventListener=function(e,t,n,r){ul(this,e,t,n,r)},vl.prototype.M=function(){if(vl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zc(n[r]);delete t.g[e],t.h--}}this.I=null},vl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var gl=tc.JSON.stringify;function kl(){var e=Sl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wl,bl=function(){function e(){Z(this,e),this.h=this.g=null}return te(e,[{key:"add",value:function(e,t){var n=xl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),xl=new(function(){function e(t,n){Z(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return te(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new _l}),(function(e){return e.reset()})),_l=function(){function e(){Z(this,e),this.next=this.g=this.h=null}return te(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Il(e){tc.setTimeout((function(){throw e}),0)}function El(e,t){wl||function(){var e=tc.Promise.resolve(void 0);wl=function(){e.then(Cl)}}(),Tl||(wl(),Tl=!0),Sl.add(e,t)}var Tl=!1,Sl=new bl;function Cl(){for(var e;e=kl();){try{e.h.call(e.g)}catch(n){Il(n)}var t=xl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Tl=!1}function Al(e,t){vl.call(this),this.h=e||1,this.g=t||tc,this.j=cc(this.kb,this),this.l=Date.now()}function Nl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Rl(e,t,n){if("function"===typeof e)n&&(e=cc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=cc(e.handleEvent,e)}return 2147483647<Number(t)?-1:tc.setTimeout(e,t||0)}function Ol(e){e.g=Rl((function(){e.g=null,e.i&&(e.i=!1,Ol(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}fc(Al,vl),(Xu=Al.prototype).da=!1,Xu.S=null,Xu.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ml(this,"tick"),this.da&&(Nl(this),this.start()))}},Xu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xu.M=function(){Al.Z.M.call(this),Nl(this),delete this.g};var Pl=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return te(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ol(this)}},{key:"M",value:function(){Ft(oe(n.prototype),"M",this).call(this),this.g&&(tc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(hc);function Dl(e){hc.call(this),this.h=e,this.g={}}fc(Dl,hc);var Ll=[];function jl(e,t,n,r){Array.isArray(n)||(n&&(Ll[0]=n.toString()),n=Ll);for(var i=0;i<n.length;i++){var a=al(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ml(e){Ec(e.g,(function(e,t){this.g.hasOwnProperty(t)&&cl(e)}),e),e.g={}}function Ul(){this.g=!0}function Fl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return gl(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Dl.prototype.M=function(){Dl.Z.M.call(this),Ml(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ul.prototype.Aa=function(){this.g=!1},Ul.prototype.info=function(){};var Bl={},Vl=null;function zl(){return Vl=Vl||new vl}function ql(e){Gc.call(this,Bl.Ma,e)}function Hl(e){var t=zl();ml(t,new ql(t,e))}function Wl(e,t){Gc.call(this,Bl.STAT_EVENT,e),this.stat=t}function Kl(e){var t=zl();ml(t,new Wl(t,e))}function Gl(e,t){Gc.call(this,Bl.Na,e),this.size=t}function Ql(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return tc.setTimeout((function(){e()}),t)}Bl.Ma="serverreachability",fc(ql,Gc),Bl.STAT_EVENT="statevent",fc(Wl,Gc),Bl.Na="timingevent",fc(Gl,Gc);var Jl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Yl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Xl(){}function $l(e){return e.h||(e.h=e.i())}function Zl(){}Xl.prototype.h=null;var ef,tf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function nf(){Gc.call(this,"d")}function rf(){Gc.call(this,"c")}function af(){}function of(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Dl(this),this.P=uf,e=Dc?125:void 0,this.W=new Al(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sf}function sf(){this.i=null,this.g="",this.h=!1}fc(nf,Gc),fc(rf,Gc),fc(af,Xl),af.prototype.g=function(){return new XMLHttpRequest},af.prototype.i=function(){return{}},ef=new af;var uf=45e3,cf={},lf={};function ff(e,t,n){e.K=1,e.v=Df(Cf(t)),e.s=n,e.U=!0,hf(e,null)}function hf(e,t){e.F=Date.now(),mf(e),e.A=Cf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Gf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new sf,e.g=Jh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Pl(cc(e.Ia,e,e.g),e.O)),jl(e.V,e.g,"readystatechange",e.gb),t=e.H?Tc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Hl(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function df(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function pf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=vf(e,n))==lf){4==t&&(e.o=4,Kl(14),i=!1),Fl(e.j,e.m,null,"[Incomplete Response]");break}if(r==cf){e.o=4,Kl(15),Fl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fl(e.j,e.m,r,null),bf(e,r)}df(e)&&r!=lf&&r!=cf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Kl(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vh(t),t.L=!0,Kl(11))):(Fl(e.j,e.m,n,"[Invalid Chunked Response]"),wf(e),kf(e))}function vf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?lf:(n=Number(t.substring(n,r)),isNaN(n)?cf:(r+=1)+n>t.length?lf:(t=t.substr(r,n),e.C=r+n,t))}function mf(e){e.Y=Date.now()+e.P,yf(e,e.P)}function yf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ql(cc(e.eb,e),t)}function gf(e){e.B&&(tc.clearTimeout(e.B),e.B=null)}function kf(e){0==e.l.G||e.I||Hh(e.l,e)}function wf(e){gf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Nl(e.W),Ml(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function bf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||th(n.i,e)))if(n.I=e.N,!e.J&&th(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;qh(n),Oh(n)}Bh(n),Kl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ql(cc(n.ab,n),6e3));if(1>=eh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Kh(n,11)}else if((e.J||n.g==e)&&qh(n),!gc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(bc(l,"spdy")||bc(l,"quic")||bc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(nh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Qh(r,r.H?r.la:null,r.W),d.J){rh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(gf(p),mf(p)),r.g=d}else Fh(r);0<n.l.length&&Lh(n)}else"stop"!=a[0]&&"close"!=a[0]||Kh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Kh(n,7):Rh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Hl(4)}catch(a){}}function xf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rc(e)||"string"===typeof e)vc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(rc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(rc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function _f(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof _f)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function If(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ef(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ef(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ef(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xu=of.prototype).setTimeout=function(e){this.P=e},Xu.gb=function(e){e=e.target;var t=this.L;t&&3==Th(e)?t.l():this.Ia(e)},Xu.Ia=function(e){try{if(e==this.g)e:{var t=Th(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Dc||this.g&&(this.h.h||this.g.ga()||Sh(this.g)))){this.I||4!=t||7==n||Hl(8==n||0>=r?3:2),gf(this);var i=this.g.ba();this.N=i;t:if(df(this)){var a=Sh(this.g);e="";var o=a.length,s=4==Th(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wf(this),kf(this);var u="";break t}this.h.i=new tc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Kl(12),wf(this),kf(this);break e}Fl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bf(this,i)}this.U?(pf(this,t,u),Dc&&this.i&&3==t&&(jl(this.V,this.W,"tick",this.fb),this.W.start())):(Fl(this.j,this.m,u,null),bf(this,u)),4==t&&wf(this),this.i&&!this.I&&(4==t?Hh(this.l,this):(this.i=!1,mf(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Kl(12)):(this.o=0,Kl(13)),wf(this),kf(this)}}}catch(t){}},Xu.fb=function(){if(this.g){var e=Th(this.g),t=this.g.ga();this.C<t.length&&(gf(this),pf(this,e,t),this.i&&4!=e&&mf(this))}},Xu.cancel=function(){this.I=!0,wf(this)},Xu.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Hl(3),Kl(17)),wf(this),this.o=2,kf(this)):yf(this,this.Y-e)},(Xu=_f.prototype).R=function(){If(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xu.T=function(){return If(this),this.g.concat()},Xu.get=function(e,t){return Ef(this.h,e)?this.h[e]:t},Xu.set=function(e,t){Ef(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xu.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Tf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Sf){this.g=void 0!==t?t:e.g,Af(this,e.j),this.s=e.s,Nf(this,e.i),Rf(this,e.m),this.l=e.l,t=e.h;var n=new qf;n.i=t.i,t.g&&(n.g=new _f(t.g),n.h=t.h),Of(this,n),this.o=e.o}else e&&(n=String(e).match(Tf))?(this.g=!!t,Af(this,n[1]||"",!0),this.s=Lf(n[2]||""),Nf(this,n[3]||"",!0),Rf(this,n[4]),this.l=Lf(n[5]||"",!0),Of(this,n[6]||"",!0),this.o=Lf(n[7]||"")):(this.g=!!t,this.h=new qf(null,this.g))}function Cf(e){return new Sf(e)}function Af(e,t,n){e.j=n?Lf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Nf(e,t,n){e.i=n?Lf(t,!0):t}function Rf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Of(e,t,n){t instanceof qf?(e.h=t,function(e,t){t&&!e.j&&(Hf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Wf(this,t),Gf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=jf(t,Vf)),e.h=new qf(t,e.g))}function Pf(e,t,n){e.h.set(t,n)}function Df(e){return Pf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Mf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Sf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jf(t,Uf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jf(t,Uf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jf(n,"/"==n.charAt(0)?Bf:Ff,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jf(n,zf)),e.join("")};var Uf=/[#\/\?@]/g,Ff=/[#\?:]/g,Bf=/[#\?]/g,Vf=/[#\?@]/g,zf=/#/g;function qf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Hf(e){e.g||(e.g=new _f,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Wf(e,t){Hf(e),t=Qf(e,t),Ef(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ef((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&If(e)))}function Kf(e,t){return Hf(e),t=Qf(e,t),Ef(e.g.h,t)}function Gf(e,t,n){Wf(e,t),0<n.length&&(e.i=null,e.g.set(Qf(e,t),yc(n)),e.h+=n.length)}function Qf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xu=qf.prototype).add=function(e,t){Hf(this),this.i=null,e=Qf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xu.forEach=function(e,t){Hf(this),this.g.forEach((function(n,r){vc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xu.T=function(){Hf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xu.R=function(e){Hf(this);var t=[];if("string"===typeof e)Kf(this,e)&&(t=mc(t,this.g.get(Qf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=mc(t,e[n])}return t},Xu.set=function(e,t){return Hf(this),this.i=null,Kf(this,e=Qf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xu.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Jf=te((function e(t,n){Z(this,e),this.h=t,this.g=n}));function Yf(e){this.l=e||$f,tc.PerformanceNavigationTiming?e=0<(e=tc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tc.g&&tc.g.Ea&&tc.g.Ea()&&tc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xf,$f=10;function Zf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eh(e){return e.h?1:e.g?e.g.size:0}function th(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nh(e,t){e.g?e.g.add(t):e.h=t}function rh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ih(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ne(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return yc(e.i)}function ah(){}function oh(){this.g=new ah}function sh(e,t,n){var r=n||"";try{xf(e,(function(e,n){var i=e;ic(e)&&(i=gl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function uh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ch(e){this.l=e.$b||null,this.j=e.ib||!1}function lh(e,t){vl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=fh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yf.prototype.cancel=function(){if(this.i=ih(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ne(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ah.prototype.stringify=function(e){return tc.JSON.stringify(e,void 0)},ah.prototype.parse=function(e){return tc.JSON.parse(e,void 0)},fc(ch,Xl),ch.prototype.g=function(){return new lh(this.l,this.j)},ch.prototype.i=(Xf={},function(){return Xf}),fc(lh,vl);var fh=0;function hh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function dh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ph(e)}function ph(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xu=lh.prototype).open=function(e,t){if(this.readyState!=fh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ph(this)},Xu.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||tc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,dh(this)),this.readyState=fh},Xu.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ph(this)),this.g&&(this.readyState=3,ph(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof tc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xu.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?dh(this):ph(this),3==this.readyState&&hh(this)}},Xu.Ua=function(e){this.g&&(this.response=this.responseText=e,dh(this))},Xu.Ta=function(e){this.g&&(this.response=e,dh(this))},Xu.ha=function(){this.g&&dh(this)},Xu.setRequestHeader=function(e,t){this.v.append(e,t)},Xu.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xu.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(lh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vh=tc.JSON.parse;function mh(e){vl.call(this),this.headers=new _f,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yh,this.K=this.L=!1}fc(mh,vl);var yh="",gh=/^https?$/i,kh=["POST","PUT"];function wh(e){return"content-type"==e.toLowerCase()}function bh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,xh(e),Ih(e)}function xh(e){e.D||(e.D=!0,ml(e,"complete"),ml(e,"error"))}function _h(e){if(e.h&&"undefined"!=typeof ec&&(!e.C[1]||4!=Th(e)||2!=e.ba()))if(e.v&&4==Th(e))Rl(e.Fa,0,e);else if(ml(e,"readystatechange"),4==Th(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Tf)[1]||null;if(!a&&tc.self&&tc.self.location){var o=tc.self.location.protocol;a=o.substr(0,o.length-1)}i=!gh.test(a?a.toLowerCase():"")}t=i}if(t)ml(e,"complete"),ml(e,"success");else{e.m=6;try{var s=2<Th(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",xh(e)}}finally{Ih(e)}}}function Ih(e,t){if(e.g){Eh(e);var n=e.g,r=e.C[0]?nc:null;e.g=null,e.C=null,t||ml(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Eh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(tc.clearTimeout(e.A),e.A=null)}function Th(e){return e.g?e.g.readyState:0}function Sh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ch(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ec(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pf(e,t,n))}function Ah(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Nh(e){this.za=0,this.l=[],this.h=new Ul,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ah("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ah("baseRetryDelayMs",5e3,e),this.$a=Ah("retryDelaySeedMs",1e4,e),this.Ya=Ah("forwardChannelMaxRetries",2,e),this.ra=Ah("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yf(e&&e.concurrentRequestLimit),this.Ca=new oh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Rh(e){if(Ph(e),3==e.G){var t=e.V++,n=Cf(e.F);Pf(n,"SID",e.J),Pf(n,"RID",t),Pf(n,"TYPE","terminate"),Mh(e,n),(t=new of(e,e.h,t,void 0)).K=2,t.v=Df(Cf(n)),n=!1,tc.navigator&&tc.navigator.sendBeacon&&(n=tc.navigator.sendBeacon(t.v.toString(),"")),!n&&tc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),mf(t)}Gh(e)}function Oh(e){e.g&&(Vh(e),e.g.cancel(),e.g=null)}function Ph(e){Oh(e),e.u&&(tc.clearTimeout(e.u),e.u=null),qh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&tc.clearTimeout(e.m),e.m=null)}function Dh(e,t){e.l.push(new Jf(e.Za++,t)),3==e.G&&Lh(e)}function Lh(e){Zf(e.i)||e.m||(e.m=!0,El(e.Ha,e),e.C=0)}function jh(e,t){var n;n=t?t.m:e.V++;var r=Cf(e.F);Pf(r,"SID",e.J),Pf(r,"RID",n),Pf(r,"AID",e.U),Mh(e,r),e.o&&e.s&&Ch(r,e.o,e.s),n=new of(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Uh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),nh(e.i,n),ff(n,r,t)}function Mh(e,t){e.j&&xf({},(function(e,n){Pf(t,n,e)}))}function Uh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?cc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{sh(l,o,"req"+c+"_")}catch(Sd){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Fh(e){e.g||e.u||(e.Y=1,El(e.Ga,e),e.A=0)}function Bh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ql(cc(e.Ga,e),Wh(e,e.A)),e.A++,!0)}function Vh(e){null!=e.B&&(tc.clearTimeout(e.B),e.B=null)}function zh(e){e.g=new of(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Cf(e.oa);Pf(t,"RID","rpc"),Pf(t,"SID",e.J),Pf(t,"CI",e.N?"0":"1"),Pf(t,"AID",e.U),Mh(e,t),Pf(t,"TYPE","xmlhttp"),e.o&&e.s&&Ch(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Df(Cf(t)),n.s=null,n.U=!0,hf(n,e)}function qh(e){null!=e.v&&(tc.clearTimeout(e.v),e.v=null)}function Hh(e,t){var n=null;if(e.g==t){qh(e),Vh(e),e.g=null;var r=2}else{if(!th(e.i,t))return;n=t.D,rh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ml(r=zl(),new Gl(r,n,t,i)),Lh(e)}else Fh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(eh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ql(cc(e.Ha,e,t),Wh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Bh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Kh(e,5);break;case 4:Kh(e,10);break;case 3:Kh(e,6);break;default:Kh(e,2)}}function Wh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Kh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=cc(e.jb,e);n||(n=new Sf("//www.google.com/images/cleardot.gif"),tc.location&&"http"==tc.location.protocol||Af(n,"https"),Df(n)),function(e,t){var n=new Ul;if(tc.Image){var r=new Image;r.onload=lc(uh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lc(uh,n,r,"TestLoadImage: error",!1,t),r.onabort=lc(uh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lc(uh,n,r,"TestLoadImage: timeout",!1,t),tc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Kl(2);e.G=0,e.j&&e.j.va(t),Gh(e),Ph(e)}function Gh(e){e.G=0,e.I=-1,e.j&&(0==ih(e.i).length&&0==e.l.length||(e.i.i.length=0,yc(e.l),e.l.length=0),e.j.ua())}function Qh(e,t,n){var r=function(e){return e instanceof Sf?Cf(e):new Sf(e,void 0)}(n);if(""!=r.i)t&&Nf(r,t+"."+r.i),Rf(r,r.m);else{var i=tc.location;r=function(e,t,n,r){var i=new Sf(null,void 0);return e&&Af(i,e),t&&Nf(i,t),n&&Rf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ec(e.aa,(function(e,t){Pf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pf(r,t,n),Pf(r,"VER",e.ma),Mh(e,r),r}function Jh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new mh(new ch({ib:!0})):new mh(e.qa)).L=e.H,t}function Yh(){}function Xh(){if(Oc&&!(10<=Number(Wc)))throw Error("Environmental error: no available transport.")}function $h(e,t){vl.call(this),this.g=new Nh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!gc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new td(this)}function Zh(e){nf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ed(){rf.call(this),this.status=1}function td(e){this.g=e}(Xu=mh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ef.g(),this.C=this.u?$l(this.u):$l(ef),this.g.onreadystatechange=cc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void bh(this,a)}e=n||"";var i=new _f(this.headers);r&&xf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=tc.FormData&&e instanceof tc.FormData,!(0<=pc(kh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Eh(this),0<this.B&&((this.K=function(e){return Oc&&qc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=cc(this.pa,this)):this.A=Rl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){bh(this,a)}},Xu.pa=function(){"undefined"!=typeof ec&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ml(this,"timeout"),this.abort(8))},Xu.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ml(this,"complete"),ml(this,"abort"),Ih(this))},Xu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ih(this,!0)),mh.Z.M.call(this)},Xu.Fa=function(){this.s||(this.F||this.v||this.l?_h(this):this.cb())},Xu.cb=function(){_h(this)},Xu.ba=function(){try{return 2<Th(this)?this.g.status:-1}catch(Xf){return-1}},Xu.ga=function(){try{return this.g?this.g.responseText:""}catch(Xf){return""}},Xu.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vh(t)}},Xu.Da=function(){return this.m},Xu.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Xu=Nh.prototype).ma=8,Xu.G=1,Xu.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Xu.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new of(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Cc(n=Tc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Uh(this,t,r),Pf(i=Cf(this.F),"RID",e),Pf(i,"CVER",22),this.D&&Pf(i,"X-HTTP-Session-Id",this.D),Mh(this,i),this.o&&n&&Ch(i,this.o,n),nh(this.i,t),this.Ra&&Pf(i,"TYPE","init"),this.ja?(Pf(i,"$req",r),Pf(i,"SID","null"),t.$=!0,ff(t,i,null)):ff(t,i,r),this.G=2}}else 3==this.G&&(e?jh(this,e):0==this.l.length||Zf(this.i)||jh(this))},Xu.Ga=function(){if(this.u=null,zh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ql(cc(this.bb,this),e)}},Xu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kl(10),Oh(this),zh(this))},Xu.ab=function(){null!=this.v&&(this.v=null,Oh(this),Bh(this),Kl(19))},Xu.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Kl(2)):(this.h.info("Failed to ping google.com"),Kl(1))},(Xu=Yh.prototype).xa=function(){},Xu.wa=function(){},Xu.va=function(){},Xu.ua=function(){},Xu.Oa=function(){},Xh.prototype.g=function(e,t){return new $h(e,t)},fc($h,vl),$h.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),El(cc(e.hb,e,t))),Kl(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qh(e,null,e.W),Lh(e)},$h.prototype.close=function(){Rh(this.g)},$h.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Dh(this.g,t)}else this.v?((t={}).__data__=gl(e),Dh(this.g,t)):Dh(this.g,e)},$h.prototype.M=function(){this.g.j=null,delete this.j,Rh(this.g),delete this.g,$h.Z.M.call(this)},fc(Zh,nf),fc(ed,rf),fc(td,Yh),td.prototype.xa=function(){ml(this.g,"a")},td.prototype.wa=function(e){ml(this.g,new Zh(e))},td.prototype.va=function(e){ml(this.g,new ed(e))},td.prototype.ua=function(){ml(this.g,"b")},Xh.prototype.createWebChannel=Xh.prototype.g,$h.prototype.send=$h.prototype.u,$h.prototype.open=$h.prototype.m,$h.prototype.close=$h.prototype.close,Jl.NO_ERROR=0,Jl.TIMEOUT=8,Jl.HTTP_ERROR=6,Yl.COMPLETE="complete",Zl.EventType=tf,tf.OPEN="a",tf.CLOSE="b",tf.ERROR="c",tf.MESSAGE="d",vl.prototype.listen=vl.prototype.N,mh.prototype.listenOnce=mh.prototype.O,mh.prototype.getLastError=mh.prototype.La,mh.prototype.getLastErrorCode=mh.prototype.Da,mh.prototype.getStatus=mh.prototype.ba,mh.prototype.getResponseJson=mh.prototype.Qa,mh.prototype.getResponseText=mh.prototype.ga,mh.prototype.send=mh.prototype.ea;var nd=Zu.createWebChannelTransport=function(){return new Xh},rd=Zu.getStatEventTarget=function(){return zl()},id=Zu.ErrorCode=Jl,ad=Zu.EventType=Yl,od=Zu.Event=Bl,sd=Zu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ud=Zu.FetchXmlHttpFactory=ch,cd=Zu.WebChannel=Zl,ld=Zu.XhrIo=mh,fd="@firebase/firestore",hd=function(){function e(t){Z(this,e),this.uid=t}return te(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();hd.UNAUTHENTICATED=new hd(null),hd.GOOGLE_CREDENTIALS=new hd("google-credentials-uid"),hd.FIRST_PARTY=new hd("first-party-uid"),hd.MOCK_USER=new hd("mock-user");var dd="9.6.1",pd=new nt("@firebase/firestore");function vd(){return pd.logLevel}function md(e){if(pd.logLevel<=Ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kd);pd.debug.apply(pd,["Firestore (".concat(dd,"): ").concat(e)].concat(ze(i)))}}function yd(e){if(pd.logLevel<=Ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kd);pd.error.apply(pd,["Firestore (".concat(dd,"): ").concat(e)].concat(ze(i)))}}function gd(e){if(pd.logLevel<=Ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(kd);pd.warn.apply(pd,["Firestore (".concat(dd,"): ").concat(e)].concat(ze(i)))}}function kd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function wd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(dd,") INTERNAL ASSERTION FAILED: ")+e;throw yd(t),new Error(t)}function bd(e,t){e||wd()}function xd(e,t){return e}var _d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Id=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return te(n)}(he(Error)),Ed=te((function e(){var t=this;Z(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Td=te((function e(t,n){Z(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Sd=function(){function e(){Z(this,e)}return te(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Cd=function(){function e(t){Z(this,e),this.token=t,this.changeListener=null}return te(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ad=function(){function e(t){Z(this,e),this.t=t,this.currentUser=hd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return te(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Ed;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Ed,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){md("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(md("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ed)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(md("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(bd("string"==typeof n.accessToken),new Td(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return bd(null===e||"string"==typeof e),new hd(e)}}]),e}(),Nd=te((function e(t,n,r){Z(this,e),this.type="FirstParty",this.user=hd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Rd=function(){function e(t,n,r){Z(this,e),this.h=t,this.l=n,this.m=r}return te(e,[{key:"getToken",value:function(){return Promise.resolve(new Nd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(hd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Od=te((function e(t){Z(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Pd=function(){function e(t){Z(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return te(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable((function(){return function(e){return null!=e.error&&md("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token)}(n)}))};var r=function(e){md("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):md("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(bd("string"==typeof e.token),new Od(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Dd=function(){function e(t,n){var r=this;Z(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return te(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ld(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Dd.I=-1;var jd=function(){function e(){Z(this,e)}return te(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ld(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Md(e,t){return e<t?-1:e>t?1:0}function Ud(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fd(e){return e+"\0"}var Bd=function(){function e(t,n){if(Z(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Id(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Id(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Id(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Id(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return te(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Md(this.nanoseconds,e.nanoseconds):Md(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Vd=function(){function e(t){Z(this,e),this.timestamp=t}return te(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Bd(0,0))}}]),e}();function zd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Hd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Wd=function(){function e(t,n,r){Z(this,e),void 0===n?n=0:n>t.length&&wd(),void 0===r?r=t.length-n:r>t.length-n&&wd(),this.segments=t,this.offset=n,this.len=r}return te(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Kd=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Id(_d.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,ze(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Wd),Gd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qd=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Gd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Id(_d.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Id(_d.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Id(_d.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Id(_d.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Wd),Jd=function(){function e(t){Z(this,e),this.fields=t,t.sort(Qd.comparator)}return te(e,[{key:"covers",value:function(e){var t,n=ne(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ud(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Yd=function(){function e(t){Z(this,e),this.binaryString=t}return te(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Md(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();Yd.EMPTY_BYTE_STRING=new Yd("");var Xd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $d(e){if(bd(!!e),"string"==typeof e){var t=0,n=Xd.exec(e);if(bd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zd(e.seconds),nanos:Zd(e.nanos)}}function Zd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ep(e){return"string"==typeof e?Yd.fromBase64String(e):Yd.fromUint8Array(e)}function tp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function np(e){var t=e.mapValue.fields.__previous_value__;return tp(t)?np(t):t}function rp(e){var t=$d(e.mapValue.fields.__local_write_time__.timestampValue);return new Bd(t.seconds,t.nanos)}function ip(e){return null==e}function ap(e){return 0===e&&1/e==-1/0}function op(e){return"number"==typeof e&&Number.isInteger(e)&&!ap(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var sp=function(){function e(t){Z(this,e),this.path=t}return te(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Kd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Kd.fromString(t))}},{key:"fromName",value:function(t){return new e(Kd.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Kd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Kd(t.slice()))}}]),e}();function up(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tp(e)?4:10:wd()}function cp(e,t){var n=up(e);if(n!==up(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rp(e).isEqual(rp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$d(e.timestampValue),r=$d(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ep(e.bytesValue).isEqual(ep(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zd(e.geoPointValue.latitude)===Zd(t.geoPointValue.latitude)&&Zd(e.geoPointValue.longitude)===Zd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zd(e.integerValue)===Zd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zd(e.doubleValue),r=Zd(t.doubleValue);return n===r?ap(n)===ap(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ud(e.arrayValue.values||[],t.arrayValue.values||[],cp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zd(n)!==zd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cp(n[i],r[i])))return!1;return!0}(e,t);default:return wd()}}function lp(e,t){return void 0!==(e.values||[]).find((function(e){return cp(e,t)}))}function fp(e,t){var n=up(e),r=up(t);if(n!==r)return Md(n,r);switch(n){case 0:return 0;case 1:return Md(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Zd(e.integerValue||e.doubleValue),r=Zd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hp(e.timestampValue,t.timestampValue);case 4:return hp(rp(e),rp(t));case 5:return Md(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ep(e),r=ep(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Md(n[i],r[i]);if(0!==a)return a}return Md(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Md(Zd(e.latitude),Zd(t.latitude));return 0!==n?n:Md(Zd(e.longitude),Zd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=fp(n[i],r[i]);if(a)return a}return Md(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Md(r[o],a[o]);if(0!==s)return s;var u=fp(n[r[o]],i[a[o]]);if(0!==u)return u}return Md(r.length,a.length)}(e.mapValue,t.mapValue);default:throw wd()}}function hp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Md(e,t);var n=$d(e),r=$d(t),i=Md(n.seconds,r.seconds);return 0!==i?i:Md(n.nanos,r.nanos)}function dp(e){return pp(e)}function pp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$d(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ep(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,sp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ne(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=pp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ne(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(pp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):wd();var t,n}function vp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function mp(e){return!!e&&"integerValue"in e}function yp(e){return!!e&&"arrayValue"in e}function gp(e){return!!e&&"nullValue"in e}function kp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wp(e){return!!e&&"mapValue"in e}function bp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bp(e.arrayValue.values[r]);return n}return Object.assign({},e)}var xp=function(){function e(t){Z(this,e),this.value=t}return te(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!wp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bp(t)}},{key:"setAll",value:function(e){var t=this,n=Qd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());wp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];wp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qd(t,(function(t,n){return e[t]=n}));var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function _p(e){var t=[];return qd(e.fields,(function(e,n){var r=new Qd([e]);if(wp(n)){var i=_p(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ne(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Jd(t)}var Ip=function(){function e(t,n,r,i,a){Z(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return te(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=xp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=xp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Vd.min(),xp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,xp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,xp.empty(),2)}}]),e}(),Ep=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Z(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.R=null}));function Tp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ep(e,t,n,r,i,a,o)}function Sp(e){var t=xd(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+dp(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ip(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Bp(t.startAt)),t.endAt&&(n+="|ub:",n+=Bp(t.endAt)),t.R=n}return t.R}function Cp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!zp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!cp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hp(e.startAt,t.startAt)&&Hp(e.endAt,t.endAt)}function Ap(e){return sp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Np=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(fp(t,this.value)):null!==t&&up(this.value)===up(t)&&this.v(fp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wd()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Rp(e,t,r):"array-contains"===t?new Lp(e,r):"in"===t?new jp(e,r):"not-in"===t?new Mp(e,r):"array-contains-any"===t?new Up(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new Op(e,n):new Pp(e,n)}}]),n}(function(){return te((function e(){Z(this,e)}))}());var Rp=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,i)).key=sp.fromName(i.referenceValue),a}return te(n,[{key:"matches",value:function(e){var t=sp.comparator(e.key,this.key);return this.v(t)}}]),n}(Np),Op=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,"in",r)).keys=Dp("in",r),i}return te(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Np),Pp=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,"not-in",r)).keys=Dp("not-in",r),i}return te(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Np);function Dp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return sp.fromName(e.referenceValue)}))}var Lp=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"array-contains",r)}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return yp(t)&&lp(t.arrayValue,this.value)}}]),n}(Np),jp=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"in",r)}return te(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&lp(this.value.arrayValue,t)}}]),n}(Np),Mp=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"not-in",r)}return te(n,[{key:"matches",value:function(e){if(lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!lp(this.value.arrayValue,t)}}]),n}(Np),Up=function(e){ae(n,e);var t=le(n);function n(e,r){return Z(this,n),t.call(this,e,"array-contains-any",r)}return te(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return lp(t.value.arrayValue,e)}))}}]),n}(Np),Fp=te((function e(t,n){Z(this,e),this.position=t,this.before=n}));function Bp(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return dp(e)})).join(","))}var Vp=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Z(this,e),this.field=t,this.dir=n}));function zp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function qp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?sp.comparator(sp.fromName(o.referenceValue),n.key):fp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Hp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cp(e.position[n],t.position[n]))return!1;return!0}var Wp=te((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Z(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt}));function Kp(e,t,n,r,i,a,o,s){return new Wp(e,t,n,r,i,a,o,s)}function Gp(e){return new Wp(e)}function Qp(e){return!ip(e.limit)&&"F"===e.limitType}function Jp(e){return!ip(e.limit)&&"L"===e.limitType}function Yp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Xp(e){var t,n=ne(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function $p(e){return null!==e.collectionGroup}function Zp(e){var t=xd(e);if(null===t.S){t.S=[];var n=Xp(t),r=Yp(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new Vp(n)),t.S.push(new Vp(Qd.keyField(),"asc"));else{var i,a=!1,o=ne(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.S.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Vp(Qd.keyField(),u))}}}return t.S}function ev(e){var t=xd(e);if(!t.D)if("F"===t.limitType)t.D=Tp(t.path,t.collectionGroup,Zp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ne(Zp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Vp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Fp(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Fp(t.startAt.position,!t.startAt.before):null;t.D=Tp(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.D}function tv(e,t,n){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nv(e,t){return Cp(ev(e),ev(t))&&e.limitType===t.limitType}function rv(e){return"".concat(Sp(ev(e)),"|lt:").concat(e.limitType)}function iv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(dp(t.value));var t})).join(", "),"]")),ip(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+Bp(e.startAt)),e.endAt&&(t+=", endAt: "+Bp(e.endAt)),"Target(".concat(t,")")}(ev(e)),"; limitType=").concat(e.limitType,")")}function av(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ne(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!qp(e.startAt,Zp(e),t))&&(!e.endAt||!qp(e.endAt,Zp(e),t))}(e,t)}function ov(e){return function(t,n){var r,i=!1,a=ne(Zp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=sv(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function sv(e,t,n){var r=e.field.isKeyField()?sp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fp(r,i):wd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wd()}}function uv(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ap(t)?"-0":t}}function cv(e){return{integerValue:""+e}}function lv(e,t){return op(t)?cv(t):uv(e,t)}var fv=te((function e(){Z(this,e),this._=void 0}));function hv(e,t,n){return e instanceof vv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mv?yv(e,t):e instanceof gv?kv(e,t):function(e,t){var n=pv(e,t),r=bv(n)+bv(e.N);return mp(n)&&mp(e.N)?cv(r):uv(e.k,r)}(e,t)}function dv(e,t,n){return e instanceof mv?yv(e,t):e instanceof gv?kv(e,t):n}function pv(e,t){return e instanceof wv?mp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var vv=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n)}(fv),mv=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).elements=e,r}return te(n)}(fv);function yv(e,t){var n,r=xv(t),i=ne(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return cp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gv=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).elements=e,r}return te(n)}(fv);function kv(e,t){var n,r=xv(t),i=ne(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!cp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var wv=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).k=e,i.N=r,i}return te(n)}(fv);function bv(e){return Zd(e.integerValue||e.doubleValue)}function xv(e){return yp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _v=te((function e(t,n){Z(this,e),this.field=t,this.transform=n}));var Iv=te((function e(t,n){Z(this,e),this.version=t,this.transformResults=n})),Ev=function(){function e(t,n){Z(this,e),this.updateTime=t,this.exists=n}return te(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Tv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Sv=te((function e(){Z(this,e)}));function Cv(e,t,n){e instanceof Pv?function(e,t,n){var r=e.value.clone(),i=jv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dv?function(e,t,n){if(Tv(e.precondition,t)){var r=jv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Av(e,t,n){e instanceof Pv?function(e,t,n){if(Tv(e.precondition,t)){var r=e.value.clone(),i=Mv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ov(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Dv?function(e,t,n){if(Tv(e.precondition,t)){var r=Mv(e.fieldTransforms,n,t),i=t.data;i.setAll(Lv(e)),i.setAll(r),t.convertToFoundDocument(Ov(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Tv(e.precondition,t)&&t.convertToNoDocument(Vd.min())}(e,t)}function Nv(e,t){var n,r=null,i=ne(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=pv(a.transform,o||null);null!=s&&(null==r&&(r=xp.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Rv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ud(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mv&&t instanceof mv||e instanceof gv&&t instanceof gv?Ud(e.elements,t.elements,cp):e instanceof wv&&t instanceof wv?cp(e.N,t.N):e instanceof vv&&t instanceof vv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ov(e){return e.isFoundDocument()?e.version:Vd.min()}var Pv=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Z(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return te(n)}(Sv),Dv=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Z(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return te(n)}(Sv);function Lv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function jv(e,t,n){var r=new Map;bd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,dv(o,s,n[i]))}return r}function Mv(e,t,n){var r,i=new Map,a=ne(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,hv(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Uv,Fv,Bv=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return te(n)}(Sv),Vv=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return te(n)}(Sv),zv=te((function e(t){Z(this,e),this.count=t}));function qv(e){switch(e){default:return wd();case _d.CANCELLED:case _d.UNKNOWN:case _d.DEADLINE_EXCEEDED:case _d.RESOURCE_EXHAUSTED:case _d.INTERNAL:case _d.UNAVAILABLE:case _d.UNAUTHENTICATED:return!1;case _d.INVALID_ARGUMENT:case _d.NOT_FOUND:case _d.ALREADY_EXISTS:case _d.PERMISSION_DENIED:case _d.FAILED_PRECONDITION:case _d.ABORTED:case _d.OUT_OF_RANGE:case _d.UNIMPLEMENTED:case _d.DATA_LOSS:return!0}}function Hv(e){if(void 0===e)return yd("GRPC error has no .code"),_d.UNKNOWN;switch(e){case Uv.OK:return _d.OK;case Uv.CANCELLED:return _d.CANCELLED;case Uv.UNKNOWN:return _d.UNKNOWN;case Uv.DEADLINE_EXCEEDED:return _d.DEADLINE_EXCEEDED;case Uv.RESOURCE_EXHAUSTED:return _d.RESOURCE_EXHAUSTED;case Uv.INTERNAL:return _d.INTERNAL;case Uv.UNAVAILABLE:return _d.UNAVAILABLE;case Uv.UNAUTHENTICATED:return _d.UNAUTHENTICATED;case Uv.INVALID_ARGUMENT:return _d.INVALID_ARGUMENT;case Uv.NOT_FOUND:return _d.NOT_FOUND;case Uv.ALREADY_EXISTS:return _d.ALREADY_EXISTS;case Uv.PERMISSION_DENIED:return _d.PERMISSION_DENIED;case Uv.FAILED_PRECONDITION:return _d.FAILED_PRECONDITION;case Uv.ABORTED:return _d.ABORTED;case Uv.OUT_OF_RANGE:return _d.OUT_OF_RANGE;case Uv.UNIMPLEMENTED:return _d.UNIMPLEMENTED;case Uv.DATA_LOSS:return _d.DATA_LOSS;default:return wd()}}(Fv=Uv||(Uv={}))[Fv.OK=0]="OK",Fv[Fv.CANCELLED=1]="CANCELLED",Fv[Fv.UNKNOWN=2]="UNKNOWN",Fv[Fv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fv[Fv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fv[Fv.NOT_FOUND=5]="NOT_FOUND",Fv[Fv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fv[Fv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fv[Fv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fv[Fv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fv[Fv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fv[Fv.ABORTED=10]="ABORTED",Fv[Fv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fv[Fv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fv[Fv.INTERNAL=13]="INTERNAL",Fv[Fv.UNAVAILABLE=14]="UNAVAILABLE",Fv[Fv.DATA_LOSS=15]="DATA_LOSS";var Wv=function(){function e(t,n){Z(this,e),this.comparator=t,this.root=n||Gv.EMPTY}return te(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Kv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Kv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Kv(this.root,e,this.comparator,!0)}}]),e}(),Kv=function(){function e(t,n,r,i){Z(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return te(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gv=function(){function e(t,n,r,i,a){Z(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return te(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw wd();if(this.right.isRed())throw wd();var e=this.left.check();if(e!==this.right.check())throw wd();return e+(this.isRed()?0:1)}}]),e}();Gv.EMPTY=null,Gv.RED=!0,Gv.BLACK=!1,Gv.EMPTY=new(function(){function e(){Z(this,e),this.size=0}return te(e,[{key:"key",get:function(){throw wd()}},{key:"value",get:function(){throw wd()}},{key:"color",get:function(){throw wd()}},{key:"left",get:function(){throw wd()}},{key:"right",get:function(){throw wd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qv=function(){function e(t){Z(this,e),this.comparator=t,this.data=new Wv(this.comparator)}return te(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Jv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Jv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Jv=function(){function e(t){Z(this,e),this.iter=t}return te(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Yv=new Wv(sp.comparator);function Xv(){return Yv}var $v=new Wv(sp.comparator);function Zv(){return $v}var em=new Wv(sp.comparator);function tm(){return em}var nm=new Qv(sp.comparator);function rm(){for(var e=nm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var im=new Qv(Md);function am(){return im}var om=function(){function e(t,n,r,i,a){Z(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return te(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,sm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Vd.min(),r,am(),Xv(),rm())}}]),e}(),sm=function(){function e(t,n,r,i,a){Z(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return te(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Yd.EMPTY_BYTE_STRING,n,rm(),rm(),rm())}}]),e}(),um=te((function e(t,n,r,i){Z(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i})),cm=te((function e(t,n){Z(this,e),this.targetId=t,this.O=n})),lm=te((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Z(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),fm=function(){function e(){Z(this,e),this.M=0,this.L=pm(),this.B=Yd.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return te(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=rm(),t=rm(),n=rm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:wd()}})),new sm(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=pm()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),hm=function(){function e(t){Z(this,e),this.et=t,this.nt=new Map,this.st=Xv(),this.it=dm(),this.rt=new Qv(Md)}return te(e,[{key:"ot",value:function(e){var t,n=ne(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=ne(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:wd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((function(e,r){n.lt(r)&&t(r)}))}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(Ap(i))if(0===n){var a=new sp(i.path);this.ct(t,a,Ip.newNoDocument(a,Vd.min()))}else bd(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Ap(a.target)){var o=new sp(a.target.path);null!==t.st.get(o)||t.yt(i,o)||t.ct(i,o,Ip.newNoDocument(o,e))}r.j&&(n.set(i,r.G()),r.H())}}));var r=rm();this.it.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new om(e,n,this.rt,this.st,r);return this.st=Xv(),this.it=dm(),this.rt=new Qv(Md),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new fm,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Qv(Md),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||md("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new fm),this.et.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function dm(){return new Wv(sp.comparator)}function pm(){return new Wv(sp.comparator)}var vm={asc:"ASCENDING",desc:"DESCENDING"},mm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ym=te((function e(t,n){Z(this,e),this.databaseId=t,this.C=n}));function gm(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function km(e,t){return e.C?t.toBase64():t.toUint8Array()}function wm(e,t){return gm(e,t.toTimestamp())}function bm(e){return bd(!!e),Vd.fromTimestamp(function(e){var t=$d(e);return new Bd(t.seconds,t.nanos)}(e))}function xm(e,t){return function(e){return new Kd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _m(e){var t=Kd.fromString(e);return bd(Qm(t)),t}function Im(e,t){return xm(e.databaseId,t.path)}function Em(e,t){var n=_m(t);if(n.get(1)!==e.databaseId.projectId)throw new Id(_d.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Id(_d.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sp(Am(n))}function Tm(e,t){return xm(e.databaseId,t)}function Sm(e){var t=_m(e);return 4===t.length?Kd.emptyPath():Am(t)}function Cm(e){return new Kd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Am(e){return bd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Nm(e,t,n){return{name:Im(e,t),fields:n.value.mapValue.fields}}function Rm(e,t,n){var r=Em(e,t.name),i=bm(t.updateTime),a=new xp({mapValue:{fields:t.fields}}),o=Ip.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Om(e,t){return"found"in t?function(e,t){bd(!!t.found),t.found.name,t.found.updateTime;var n=Em(e,t.found.name),r=bm(t.found.updateTime),i=new xp({mapValue:{fields:t.found.fields}});return Ip.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){bd(!!t.missing),bd(!!t.readTime);var n=Em(e,t.missing),r=bm(t.readTime);return Ip.newNoDocument(n,r)}(e,t):wd()}function Pm(e,t){var n;if(t instanceof Pv)n={update:Nm(e,t.key,t.value)};else if(t instanceof Bv)n={delete:Im(e,t.key)};else if(t instanceof Dv)n={update:Nm(e,t.key,t.data),updateMask:Gm(t.fieldMask)};else{if(!(t instanceof Vv))return wd();n={verify:Im(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof vv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wv)return{fieldPath:t.field.canonicalString(),increment:n.N};throw wd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:wm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:wd()}(e,t.precondition)),n}function Dm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ev.updateTime(bm(e.updateTime)):void 0!==e.exists?Ev.exists(e.exists):Ev.none()}(t.currentDocument):Ev.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)bd("REQUEST_TIME"===t.setToServerValue),n=new vv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new mv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new gv(i)}else"increment"in t?n=new wv(e,t.increment):wd();var a=Qd.fromServerFormat(t.fieldPath);return new _v(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Em(e,t.update.name),a=new xp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Jd(t.map((function(e){return Qd.fromServerFormat(e)})))}(t.updateMask);return new Dv(i,a,o,n,r)}return new Pv(i,a,n,r)}if(t.delete){var s=Em(e,t.delete);return new Bv(s,n)}if(t.verify){var u=Em(e,t.verify);return new Vv(u,n)}return wd()}function Lm(e,t){return{documents:[Tm(e,t.path)]}}function jm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Tm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Tm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(kp(e.value))return{unaryFilter:{field:qm(e.field),op:"IS_NAN"}};if(gp(e.value))return{unaryFilter:{field:qm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kp(e.value))return{unaryFilter:{field:qm(e.field),op:"IS_NOT_NAN"}};if(gp(e.value))return{unaryFilter:{field:qm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qm(e.field),op:zm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:qm(e.field),direction:Vm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.C||ip(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Fm(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Fm(t.endAt)),n}function Mm(e){var t=Sm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Um(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Vp(Hm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ip(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Bm(n.startAt));var l=null;return n.endAt&&(l=Bm(n.endAt)),Kp(t,i,s,o,u,"F",c,l)}function Um(e){return e?void 0!==e.unaryFilter?[Km(e)]:void 0!==e.fieldFilter?[Wm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Um(e)})).reduce((function(e,t){return e.concat(t)})):wd():[]}function Fm(e){return{before:e.before,values:e.position}}function Bm(e){var t=!!e.before,n=e.values||[];return new Fp(n,t)}function Vm(e){return vm[e]}function zm(e){return mm[e]}function qm(e){return{fieldPath:e.canonicalString()}}function Hm(e){return Qd.fromServerFormat(e.fieldPath)}function Wm(e){return Np.create(Hm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wd()}}(e.fieldFilter.op),e.fieldFilter.value)}function Km(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Hm(e.unaryFilter.field);return Np.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Hm(e.unaryFilter.field);return Np.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hm(e.unaryFilter.field);return Np.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hm(e.unaryFilter.field);return Np.create(i,"!=",{nullValue:"NULL_VALUE"});default:return wd()}}function Gm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Qm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Jm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Xm(t)),t=Ym(e.get(n),t);return Xm(t)}function Ym(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Xm(e){return e+"\x01\x01"}function $m(e){var t=e.length;if(bd(t>=2),2===t)return bd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Kd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&wd(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:wd()}a=o+2}return new Kd(r)}var Zm=te((function e(t,n){Z(this,e),this.seconds=t,this.nanoseconds=n})),ey=te((function e(t,n,r){Z(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));ey.store="owner",ey.key="owner";var ty=te((function e(t,n,r){Z(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));ty.store="mutationQueues",ty.keyPath="userId";var ny=te((function e(t,n,r,i,a){Z(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));ny.store="mutations",ny.keyPath="batchId",ny.userMutationsIndex="userMutationsIndex",ny.userMutationsKeyPath=["userId","batchId"];var ry=function(){function e(){Z(this,e)}return te(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Jm(t)]}},{key:"key",value:function(e,t,n){return[e,Jm(t),n]}}]),e}();ry.store="documentMutations",ry.PLACEHOLDER=new ry;var iy=te((function e(t,n){Z(this,e),this.path=t,this.readTime=n})),ay=te((function e(t,n){Z(this,e),this.path=t,this.version=n})),oy=te((function e(t,n,r,i,a,o){Z(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));oy.store="remoteDocuments",oy.readTimeIndex="readTimeIndex",oy.readTimeIndexPath="readTime",oy.collectionReadTimeIndex="collectionReadTimeIndex",oy.collectionReadTimeIndexPath=["parentPath","readTime"];var sy=te((function e(t){Z(this,e),this.byteSize=t}));sy.store="remoteDocumentGlobal",sy.key="remoteDocumentGlobalKey";var uy=te((function e(t,n,r,i,a,o,s){Z(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));uy.store="targets",uy.keyPath="targetId",uy.queryTargetsIndexName="queryTargetsIndex",uy.queryTargetsKeyPath=["canonicalId","targetId"];var cy=te((function e(t,n,r){Z(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));cy.store="targetDocuments",cy.keyPath=["targetId","path"],cy.documentTargetsIndex="documentTargetsIndex",cy.documentTargetsKeyPath=["path","targetId"];var ly=te((function e(t,n,r,i){Z(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));ly.key="targetGlobalKey",ly.store="targetGlobal";var fy=te((function e(t,n){Z(this,e),this.collectionId=t,this.parent=n}));fy.store="collectionParents",fy.keyPath=["collectionId","parent"];var hy=te((function e(t,n,r,i){Z(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));hy.store="clientMetadata",hy.keyPath="clientId";var dy=te((function e(t,n,r){Z(this,e),this.bundleId=t,this.createTime=n,this.version=r}));dy.store="bundles",dy.keyPath="bundleId";var py=te((function e(t,n,r){Z(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));py.store="namedQueries",py.keyPath="name";var vy=[ty.store,ny.store,ry.store,oy.store,uy.store,ey.store,ly.store,cy.store].concat([hy.store]).concat([sy.store]).concat([fy.store]).concat([dy.store,py.store]),my="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yy=function(){function e(){Z(this,e),this.onCommittedListeners=[]}return te(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),gy=function(){function e(t){var n=this;Z(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return te(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&wd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ne(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),ky=function(){function e(t,n){var r=this;Z(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new Ed,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new xy(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=Sy(e.target.error);r.It.reject(new xy(t,n))}}return te(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(md("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Iy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new xy(n,t)}}}]),e}(),wy=function(){function e(t,n,r){Z(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt(we())&&yd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return te(e,[{key:"Ct",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return md("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new xy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Id(_d.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Id(_d.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new xy(t,n))},i.onupgradeneeded=function(e){md("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Rt.Nt(t,i.transaction,e.oldVersion,n.version).next((function(){md("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.kt&&(this.db.onversionchange=function(e){return n.kt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,s,u,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(h().mark((function e(){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Ct(t);case 2:return c.db=e.sent,n=ky.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),gy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.At;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,md("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return md("SimpleDb","Removing database:",e),Ey(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!Te())return!1;if(e.vt())return!0;var t=we(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/twitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAOO5NVjubCkhhhy0ClohwN4t9Scuv3t_U",REACT_APP_APP_ID:"1:244023652075:web:04eeb6d09174a0b66958ae",REACT_APP_AUTH_DOMAIN:"nwitter-c8556.firebaseapp.com",REACT_APP_MESSAGINSENDER_ID:"244023652075",REACT_APP_PROJECT_ID:"nwitter-c8556",REACT_APP_STORAGE_BUCKET:"nwitter-c8556.appspot.com"})||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),by=function(){function e(t){Z(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return te(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return Ey(this.$t.delete())}}]),e}(),xy=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,_d.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return te(n)}(Id);function _y(e){return"IndexedDbTransactionError"===e.name}var Iy=function(){function e(t){Z(this,e),this.store=t}return te(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(md("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(md("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ey(n)}},{key:"add",value:function(e){return md("SimpleDb","ADD",this.store.name,e,e),Ey(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ey(this.store.get(e)).next((function(n){return void 0===n&&(n=null),md("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return md("SimpleDb","DELETE",this.store.name,e),Ey(this.store.delete(e))}},{key:"count",value:function(){return md("SimpleDb","COUNT",this.store.name),Ey(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"qt",value:function(e,t){md("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,(function(e,t,n){return n.delete()}))}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new gy((function(n,r){t.onerror=function(e){var t=Sy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Ut",value:function(e,t){var n=[];return new gy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new by(i),o=t(i.primaryKey,i.value,a);if(o instanceof gy){var s=o.catch((function(e){return a.done(),gy.reject(e)}));n.push(s)}a.isDone?r():null===a.Mt?i.continue():i.continue(a.Mt)}else r()}})).next((function(){return gy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ey(e){return new gy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Sy(e.target.error);n(t)}}))}var Ty=!1;function Sy(e){var t=wy.Pt(we());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Id("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ty||(Ty=!0,setTimeout((function(){throw r}),0)),r}}return e}var Cy=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return te(n)}(yy);function Ay(e,t){var n=xd(e);return wy.Dt(n.Wt,t)}var Ny=function(){function e(t,n,r,i){Z(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return te(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Cv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ne(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Av(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=ne(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Av(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Vd.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),rm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ud(this.mutations,e.mutations,(function(e,t){return Rv(e,t)}))&&Ud(this.baseMutations,e.baseMutations,(function(e,t){return Rv(e,t)}))}}]),e}(),Ry=function(){function e(t,n,r,i){Z(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return te(e,null,[{key:"from",value:function(t,n,r){bd(t.mutations.length===r.length);for(var i=tm(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Oy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yd.EMPTY_BYTE_STRING;Z(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return te(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Py=te((function e(t){Z(this,e),this.Gt=t}));function Dy(e,t){if(t.document)return Rm(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=sp.fromSegments(t.noDocument.path),r=Fy(t.noDocument.readTime),i=Ip.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=sp.fromSegments(t.unknownDocument.path),o=Fy(t.unknownDocument.version);return Ip.newUnknownDocument(a,o)}return wd()}function Ly(e,t,n){var r=jy(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Im(e,t.key),fields:t.data.value.mapValue.fields,updateTime:gm(e,t.version.toTimestamp())}}(e.Gt,t),o=t.hasCommittedMutations;return new oy(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Uy(t.version),c=t.hasCommittedMutations;return new oy(null,new iy(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=Uy(t.version);return new oy(new ay(l,f),null,null,!0,r,i)}return wd()}function jy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function My(e){var t=new Bd(e[0],e[1]);return Vd.fromTimestamp(t)}function Uy(e){var t=e.toTimestamp();return new Zm(t.seconds,t.nanoseconds)}function Fy(e){var t=new Bd(e.seconds,e.nanoseconds);return Vd.fromTimestamp(t)}function By(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Dm(e.Gt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Dm(e.Gt,t)})),s=Bd.fromMillis(t.localWriteTimeMs);return new Ny(t.batchId,s,n,o)}function Vy(e){var t,n,r=Fy(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Fy(e.lastLimboFreeSnapshotVersion):Vd.min();return void 0!==e.query.documents?(bd(1===(n=e.query).documents.length),t=ev(Gp(Sm(n.documents[0])))):t=function(e){return ev(Mm(e))}(e.query),new Oy(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Yd.fromBase64String(e.resumeToken))}function zy(e,t){var n,r=Uy(t.snapshotVersion),i=Uy(t.lastLimboFreeSnapshotVersion);n=Ap(t.target)?Lm(e.Gt,t.target):jm(e.Gt,t.target);var a=t.resumeToken.toBase64();return new uy(t.targetId,Sp(t.target),r,a,t.sequenceNumber,i,n)}function qy(e){var t=Mm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?tv(t,t.limit,"L"):t}var Hy=function(){function e(){Z(this,e)}return te(e,[{key:"getBundleMetadata",value:function(e,t){return Wy(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Fy(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Wy(e).put({bundleId:(n=t).id,createTime:Uy(bm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ky(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:qy(t.bundledQuery),readTime:Fy(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ky(e).put(function(e){return{name:e.name,readTime:Uy(bm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Wy(e){return Ay(e,dy.store)}function Ky(e){return Ay(e,py.store)}var Gy=function(){function e(){Z(this,e),this.zt=new Qy}return te(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),gy.resolve()}},{key:"getCollectionParents",value:function(e,t){return gy.resolve(this.zt.getEntries(t))}}]),e}(),Qy=function(){function e(){Z(this,e),this.index={}}return te(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qv(Kd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qv(Kd.comparator)).toArray()}}]),e}(),Jy=function(){function e(){Z(this,e),this.Ht=new Qy}return te(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ht.add(t)}));var a={collectionId:r,parent:Jm(i)};return Yy(e).put(a)}return gy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fd(t),""],!1,!0);return Yy(e).Bt(r).next((function(e){var r,i=ne(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push($m(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Yy(e){return Ay(e,fy.store)}var Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$y=function(){function e(t,n,r){Z(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return te(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Zy(e,t,n){var r=e.store(ny.store),i=e.store(ry.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.jt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){bd(1===s)})));var c,l=[],f=ne(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ry.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return gy.waitFor(a).next((function(){return l}))}function eg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw wd();t=e.noDocument}return JSON.stringify(t).length}$y.DEFAULT_COLLECTION_PERCENTILE=10,$y.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$y.DEFAULT=new $y(41943040,$y.DEFAULT_COLLECTION_PERCENTILE,$y.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$y.DISABLED=new $y(-1,0,0);var tg=function(){function e(t,n,r,i){Z(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return te(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rg(e).jt({index:ny.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ig(e),o=rg(e);return o.add({}).next((function(s){bd("number"==typeof s);var u,c=new Ny(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Pm(e.Gt,t)})),i=n.mutations.map((function(t){return Pm(e.Gt,t)}));return new ny(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,c),f=[],h=new Qv((function(e,t){return Md(e.canonicalString(),t.canonicalString())})),d=ne(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=ry.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ry.PLACEHOLDER))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Yt[s]=c.keys()})),gy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return rg(e).get(t).next((function(e){return e?(bd(e.userId===n.userId),By(n.k,e)):null}))}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?gy.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return rg(e).jt({index:ny.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(bd(t.batchId>=r),a=By(n.k,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rg(e).jt({index:ny.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rg(e).Bt(ny.userMutationsIndex,n).next((function(e){return e.map((function(e){return By(t.k,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ry.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ig(e).jt({range:i},(function(r,i,o){var s=l(r,3),u=s[0],c=s[1],f=s[2],h=$m(c);if(u===n.userId&&t.path.isEqual(h))return rg(e).get(f).next((function(e){if(!e)throw wd();bd(e.userId===n.userId),a.push(By(n.k,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qv(Md),i=[];return t.forEach((function(t){var a=ry.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=ig(e).jt({range:o},(function(e,i,a){var o=l(e,3),s=o[0],u=o[1],c=o[2],f=$m(u);s===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(s)})),gy.waitFor(i).next((function(){return n.te(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ry.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Qv(Md);return ig(e).jt({range:o},(function(e,t,a){var o=l(e,3),u=o[0],c=o[1],f=o[2],h=$m(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.te(e,s)}))}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rg(e).get(t).next((function(e){if(null===e)throw wd();bd(e.userId===n.userId),r.push(By(n.k,e))})))})),gy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Zy(e.Wt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.ee(t.batchId)})),gy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return gy.resolve();var r=IDBKeyRange.lowerBound(ry.prefixForUser(t.userId)),i=[];return ig(e).jt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=$m(e[1]);i.push(a)}else r.done()})).next((function(){bd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ng(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return ag(e).get(this.userId).next((function(e){return e||new ty(t.userId,-1,"")}))}}],[{key:"Xt",value:function(t,n,r,i){return bd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ng(e,t,n){var r=ry.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ig(e).jt({range:a,Kt:!0},(function(e,n,r){var a=l(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function rg(e){return Ay(e,ny.store)}function ig(e){return Ay(e,ry.store)}function ag(e){return Ay(e,ty.store)}var og=function(){function e(t){Z(this,e),this.se=t}return te(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),sg=function(){function e(t,n){Z(this,e),this.referenceDelegate=t,this.k=n}return te(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next((function(n){var r=new og(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next((function(e){return Vd.fromTimestamp(new Bd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next((function(){return n.oe(e).next((function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ug(e).delete(t.targetId)})).next((function(){return n.oe(e)})).next((function(t){return bd(t.targetCount>0),t.targetCount-=1,n.ae(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ug(e).jt((function(o,s){var u=Vy(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return gy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ug(e).jt((function(e,n){var r=Vy(n);t(r)}))}},{key:"oe",value:function(e){return cg(e).get(ly.key).next((function(e){return bd(null!==e),e}))}},{key:"ae",value:function(e,t){return cg(e).put(ly.key,t)}},{key:"ce",value:function(e,t){return ug(e).put(zy(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Sp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ug(e).jt({range:r,index:uy.queryTargetsIndexName},(function(e,n,r){var a=Vy(n);Cp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=lg(e);return t.forEach((function(t){var o=Jm(t.path);i.push(a.put(new cy(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),gy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=lg(e);return gy.forEach(t,(function(t){var a=Jm(t.path);return gy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=lg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lg(e),i=rm();return r.jt({range:n,Kt:!0},(function(e,t,n){var r=$m(e[1]),a=new sp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Jm(t.path),r=IDBKeyRange.bound([n],[Fd(n)],!1,!0),i=0;return lg(e).jt({index:cy.documentTargetsIndex,Kt:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return ug(e).get(t).next((function(e){return e?Vy(e):null}))}}]),e}();function ug(e){return Ay(e,uy.store)}function cg(e){return Ay(e,ly.store)}function lg(e){return Ay(e,cy.store)}function fg(e){return hg.apply(this,arguments)}function hg(){return hg=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===_d.FAILED_PRECONDITION&&t.message===my){e.next=2;break}throw t;case 2:md("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),hg.apply(this,arguments)}function dg(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],s=a[1],u=Md(r,o);return 0===u?Md(i,s):u}var pg=function(){function e(t){Z(this,e),this.he=t,this.buffer=new Qv(dg),this.le=0}return te(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();dg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),vg=function(){function e(t,n){Z(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return te(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;md("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!_y(n.t0)){n.next=12;break}md("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,fg(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),mg=function(){function e(t,n){Z(this,e),this.ge=t,this.params=n}return te(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return gy.resolve(Dd.I);var r=new pg(t);return this.ge.forEachTarget(e,(function(e){return r.de(e.sequenceNumber)})).next((function(){return n.ge.pe(e,(function(e){return r.de(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(md("LruGarbageCollector","Garbage collection skipped; disabled"),gy.resolve(Xy)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(md("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Xy):n.Te(e,t)}))}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(md("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),vd()<=Ge.DEBUG&&md("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),gy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),yg=function(){function e(t,n){Z(this,e),this.db=t,this.garbageCollector=function(e,t){return new mg(e,t)}(this,n)}return te(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.pe(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return gg(e,n)}},{key:"removeReference",value:function(e,t,n){return gg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return gg(e,t)}},{key:"Ae",value:function(e,t){return function(e,t){var n=!1;return ag(e).Qt((function(r){return ng(e,r,t).next((function(e){return e&&(n=!0),gy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ie(e,(function(o,s){if(s<=t){var u=n.Ae(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),lg(e).delete([0,Jm(o.path)])}))}));i.push(u)}})).next((function(){return gy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return gg(e,t)}},{key:"Ie",value:function(e,t){var n,r=lg(e),i=Dd.I;return r.jt({index:cy.documentTargetsIndex},(function(e,r){var a=l(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Dd.I&&t(new sp($m(n)),i),i=u,n=s):i=Dd.I})).next((function(){i!==Dd.I&&t(new sp($m(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function gg(e,t){return lg(e).put(function(e,t){return new cy(0,Jm(e.path),t)}(t,e.currentSequenceNumber))}var kg=function(){function e(t,n){Z(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return te(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){qd(this.inner,(function(t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Hd(this.inner)}}]),e}(),wg=function(){function e(){Z(this,e),this.changes=new kg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return te(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Vd.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Ip.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?gy.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),bg=function(){function e(t,n){Z(this,e),this.k=t,this.Jt=n}return te(e,[{key:"addEntry",value:function(e,t,n){return Ig(e).put(Eg(t),n)}},{key:"removeEntry",value:function(e,t){var n=Ig(e),r=Eg(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Re(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Ig(e).get(Eg(t)).next((function(e){return n.Pe(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Ig(e).get(Eg(t)).next((function(e){return{document:n.Pe(t,e),size:eg(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Xv();return this.ve(e,t,(function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ve",value:function(e,t){var n=this,r=Xv(),i=new Wv(sp.comparator);return this.ve(e,t,(function(e,t){var a=n.Pe(e,t);r=r.insert(e,a),i=i.insert(e,eg(t))})).next((function(){return{documents:r,Se:i}}))}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return gy.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Ig(e).jt({range:r},(function(e,t,r){for(var o=sp.fromSegments(e);a&&sp.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Lt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Xv(),a=t.path.length+1,o={};if(n.isEqual(Vd.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=jy(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=oy.collectionReadTimeIndex}return Ig(e).jt(o,(function(e,n,o){if(e.length===a){var s=Dy(r.k,n);t.path.isPrefixOf(s.key.path)?av(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new xg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return _g(e).get(sy.key).next((function(e){return bd(!!e),e}))}},{key:"Re",value:function(e,t){return _g(e).put(sy.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=Dy(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(Vd.min()))return n}return Ip.newInvalidDocument(e)}}]),e}(),xg=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new kg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return te(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qv((function(e,t){return Md(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Ce.get(a);if(o.document.isValidDocument()){var u=Ly(t.De.k,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=eg(u);r+=c-s,n.push(t.De.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=Ly(t.De.k,Ip.newNoDocument(a,Vd.min()),t.getReadTime(a));n.push(t.De.addEntry(e,a,l))}else n.push(t.De.removeEntry(e,a))})),i.forEach((function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))})),n.push(this.De.updateMetadata(e,r)),gy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next((function(e){return n.Ce.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next((function(e){var t=e.documents;return e.Se.forEach((function(e,t){n.Ce.set(e,t)})),t}))}}]),n}(wg);function _g(e){return Ay(e,sy.store)}function Ig(e){return Ay(e,oy.store)}function Eg(e){return e.path.toArray()}var Tg=function(){function e(t){Z(this,e),this.k=t}return te(e,[{key:"Nt",value:function(e,t,n,r){var i=this;bd(n<r&&n>=0&&r<=11);var a=new ky("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ey.store)}(e),function(e){e.createObjectStore(ty.store,{keyPath:ty.keyPath}),e.createObjectStore(ny.store,{keyPath:ny.keyPath,autoIncrement:!0}).createIndex(ny.userMutationsIndex,ny.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ry.store)}(e),Sg(e),function(e){e.createObjectStore(oy.store)}(e));var o=gy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(cy.store),e.deleteObjectStore(uy.store),e.deleteObjectStore(ly.store)}(e),Sg(e)),o=o.next((function(){return function(e){var t=e.store(ly.store),n=new ly(0,0,Vd.min().toTimestamp(),0);return t.put(ly.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(ny.store).Bt().next((function(n){e.deleteObjectStore(ny.store),e.createObjectStore(ny.store,{keyPath:ny.keyPath,autoIncrement:!0}).createIndex(ny.userMutationsIndex,ny.userMutationsKeyPath,{unique:!0});var r=t.store(ny.store),i=n.map((function(e){return r.put(e)}));return gy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(hy.store,{keyPath:hy.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ne(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(sy.store)}(e),i.ke(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.$e(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(oy.store);t.createIndex(oy.readTimeIndex,oy.readTimeIndexPath,{unique:!1}),t.createIndex(oy.collectionReadTimeIndex,oy.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Fe(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(dy.store,{keyPath:dy.keyPath})}(e),function(e){e.createObjectStore(py.store,{keyPath:py.keyPath})}(e)}))),o}},{key:"ke",value:function(e){var t=0;return e.store(oy.store).jt((function(e,n){t+=eg(n)})).next((function(){var n=new sy(t);return e.store(sy.store).put(sy.key,n)}))}},{key:"Ne",value:function(e){var t=this,n=e.store(ty.store),r=e.store(ny.store);return n.Bt().next((function(n){return gy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(ny.userMutationsIndex,i).next((function(r){return gy.forEach(r,(function(r){bd(r.userId===n.userId);var i=By(t.k,r);return Zy(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(cy.store),n=e.store(oy.store);return e.store(ly.store).get(ly.key).next((function(e){var r=[];return n.jt((function(n,i){var a=new Kd(n),o=function(e){return[0,Jm(e)]}(a);r.push(t.get(o).next((function(n){return n?gy.resolve():function(n){return t.put(new cy(0,Jm(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return gy.waitFor(r)}))}))}},{key:"$e",value:function(e,t){e.createObjectStore(fy.store,{keyPath:fy.keyPath});var n=t.store(fy.store),r=new Qy,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Jm(i)})}};return t.store(oy.store).jt({Kt:!0},(function(e,t){var n=new Kd(e);return i(n.popLast())})).next((function(){return t.store(ry.store).jt({Kt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],$m(r));return i(a.popLast())}))}))}},{key:"Fe",value:function(e){var t=this,n=e.store(uy.store);return n.jt((function(e,r){var i=Vy(r),a=zy(t.k,i);return n.put(a)}))}}]),e}();function Sg(e){e.createObjectStore(cy.store,{keyPath:cy.keyPath}).createIndex(cy.documentTargetsIndex,cy.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(uy.store,{keyPath:uy.keyPath}).createIndex(uy.queryTargetsIndexName,uy.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ly.store)}var Cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ag=function(){function e(t,n,r,i,a,o,s,u,c,l){if(Z(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=s,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new Id(_d.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yg(this,i),this.Ge=n+"main",this.k=new Py(u),this.ze=new wy(this.Ge,11,new Tg(this.k)),this.He=new sg(this.referenceDelegate,this.k),this.Jt=new Jy,this.Je=function(e,t){return new bg(e,t)}(this.k,this.Jt),this.Ye=new Hy,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&yd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return te(e,[{key:"start",value:function(){var e=this;return this.Ze().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Id(_d.FAILED_PRECONDITION,Cg);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.He.getHighestSequenceNumber(t)}))})).then((function(t){e.Be=new Dd(t,e.Me)})).then((function(){e.Ue=!0})).catch((function(t){return e.ze&&e.ze.close(),Promise.reject(t)}))}},{key:"sn",value:function(e){var t=this;return this.We=function(){var n=a(h().mark((function n(r){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ze.xt(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Rg(t).put(new hy(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.rn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.We(!1)})))}))})).next((function(){return e.on(t)})).next((function(n){return e.isPrimary&&!n?e.an(t).next((function(){return!1})):!!n&&e.cn(t).next((function(){return!0}))}))})).catch((function(t){if(_y(t))return md("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return md("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.We(t)})),e.isPrimary=t}))}},{key:"rn",value:function(e){var t=this;return Ng(e).get(ey.key).next((function(e){return gy.resolve(t.un(e))}))}},{key:"hn",value:function(e){return Rg(e).delete(this.clientId)}},{key:"ln",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.fn(this.Qe,18e5)){e.next=6;break}return this.Qe=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ay(e,hy.store);return t.Bt().next((function(e){var n=a.dn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return gy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Xe){n=ne(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Xe.removeItem(this.wn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ze().then((function(){return e.ln()})).then((function(){return e.nn()}))}))}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?gy.resolve(!0):Ng(e).get(ey.key).next((function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new Id(_d.FAILED_PRECONDITION,Cg);return!1}}return!(!t.networkEnabled||!t.inForeground)||Rg(e).Bt().next((function(e){return void 0===t.dn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&md("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),e.next=7,this.ze.runTransaction("shutdown","readwrite",[ey.store,hy.store],(function(e){var n=new Cy(e,Dd.I);return t.an(n).next((function(){return t.hn(n)}))}));case 7:this.ze.close(),this.pn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dn",value:function(e,t){var n=this;return e.filter((function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)}))}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Rg(t).Bt().next((function(t){return e.dn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return tg.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;md("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.ze.runTransaction(e,a,vy,(function(a){return i=new Cy(a,r.Be?r.Be.next():Dd.I),"readwrite-primary"===t?r.rn(i).next((function(e){return!!e||r.on(i)})).next((function(t){if(!t)throw yd("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.We(!1)})),new Id(_d.FAILED_PRECONDITION,my);return n(i)})).next((function(e){return r.cn(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return Ng(e).get(ey.key).next((function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Id(_d.FAILED_PRECONDITION,Cg)}))}},{key:"cn",value:function(e){var t=new ey(this.clientId,this.allowTabSynchronization,Date.now());return Ng(e).put(ey.key,t)}},{key:"an",value:function(e){var t=this,n=Ng(e);return n.get(ey.key).next((function(e){return t.un(e)?(md("IndexedDbPersistence","Releasing primary lease."),n.delete(ey.key)):gy.resolve()}))}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(yd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()}))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),!xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return md("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return yd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(fc){yd("Failed to set zombie client id.",fc)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(fc){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return wy.bt()}}]),e}();function Ng(e){return Ay(e,ey.store)}function Rg(e){return Ay(e,hy.store)}function Og(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Pg=te((function e(t,n){Z(this,e),this.progress=t,this.In=n})),Dg=function(){function e(t,n,r){Z(this,e),this.Je=t,this.An=n,this.Jt=r}return te(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Pn(e,t,r)}))}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next((function(e){var t,r=ne(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=ne(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next((function(t){return n.Vn(e,t).next((function(){return t}))}))}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return sp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):$p(t)?this.Dn(e,t,n):this.Cn(e,t,n)}},{key:"Sn",value:function(e,t){return this.Rn(e,new sp(t)).next((function(e){var t=Zv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Zv();return this.Jt.getCollectionParents(e,i).next((function(o){return gy.forEach(o,(function(o){var s=function(e,t){return new Wp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Cn(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Cn",value:function(e,t,n){var r,i,a=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.An.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Nn(e,i,r).next((function(e){r=e;var t,n=ne(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,s=ne(o.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.key,l=r.get(c);null==l&&(l=Ip.newInvalidDocument(c),r=r.insert(c,l)),Av(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){av(t,n)||(r=r.remove(e))})),r}))}},{key:"Nn",value:function(e,t,n){var r,i=rm(),a=ne(t);try{for(a.s();!(r=a.n()).done;){var o,s=ne(r.value.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value;u instanceof Dv&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.Je.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),Lg=function(){function e(t,n,r,i){Z(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return te(e,null,[{key:"$n",value:function(t,n){var r,i=rm(),a=rm(),o=ne(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),jg=function(){function e(){Z(this,e)}return te(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Vd.min())?this.Mn(e,t):this.On.vn(e,r).next((function(a){var o=i.Ln(t,a);return(Qp(t)||Jp(t))&&i.Bn(t.limitType,o,r,n)?i.Mn(e,t):(vd()<=Ge.DEBUG&&md("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iv(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Ln",value:function(e,t){var n=new Qv(ov(e));return t.forEach((function(t,r){av(e,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return vd()<=Ge.DEBUG&&md("QueryEngine","Using full collection scan to execute query:",iv(t)),this.On.getDocumentsMatchingQuery(e,t,Vd.min())}}]),e}(),Mg=function(){function e(t,n,r,i){Z(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Wv(Md),this.Kn=new kg((function(e){return Sp(e)}),Cp),this.jn=Vd.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new Dg(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return te(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qn)}))}}]),e}();function Ug(e,t,n,r){return new Mg(e,t,n,r)}function Fg(e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),i=r.An,a=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.An.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Dg(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],s=rm(),u=ne(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,f=ne(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=ne(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ne(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return a.vn(e,s).next((function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.An=i,r.Wn=a,r.Un.Fn(r.Wn),o));case 6:case"end":return e.stop()}}),e)}))),Bg.apply(this,arguments)}function Vg(e,t){var n=xd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=gy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);bd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.An.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}function zg(e){var t=xd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.He.getLastRemoteSnapshotVersion(e)}))}function qg(e,t){var n=xd(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var o=[];t.targetChanges.forEach((function(t,a){var s=i.get(a);if(s){o.push(n.He.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.He.addMatchingKeys(e,t.addedDocuments,a)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return bd(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,t)&&o.push(n.He.updateTargetData(e,c))}}}));var s=Xv();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Hg(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(Vd.min())){var u=n.He.getLastRemoteSnapshotVersion(e).next((function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return gy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Wn.Vn(e,s)})).next((function(){return s}))})).then((function(e){return n.qn=i,e}))}function Hg(e,t,n,r,i){var a=rm();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Xv();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Vd.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):md("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function Wg(e,t){var n=xd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)}))}function Kg(e,t){var n=xd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.He.getTargetData(e,t).next((function(i){return i?(r=i,gy.resolve(r)):n.He.allocateTargetId(e).next((function(i){return r=new Oy(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}function Gg(e,t,n){return Qg.apply(this,arguments)}function Qg(){return Qg=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=xd(t),a=i.qn.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_y(e.t1)){e.next=12;break}throw e.t1;case 12:md("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Qg.apply(this,arguments)}function Jg(e,t,n){var r=xd(e),i=Vd.min(),a=rm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=xd(e),i=r.Kn.get(n);return void 0!==i?gy.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,ev(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:Vd.min(),n?a:rm())})).next((function(e){return{documents:e,zn:a}}))}))}function Yg(e,t){var n=xd(e),r=xd(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Xg(e){var t=xd(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=xd(e),i=Xv(),a=jy(n),o=Ig(t),s=IDBKeyRange.lowerBound(a,!0);return o.jt({index:oy.readTimeIndex,range:s},(function(e,t){var n=Dy(r.k,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{In:i,readTime:My(a)}}))}(t.Qn,e,t.jn)})).then((function(e){var n=e.In,r=e.readTime;return t.jn=r,n}))}function $g(e){return Zg.apply(this,arguments)}function Zg(){return Zg=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xd(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Ig(e),n=Vd.min();return t.jt({index:oy.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=My(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.jn=e})));case 2:case"end":return e.stop()}}),e)}))),Zg.apply(this,arguments)}function ek(e,t,n,r){return tk.apply(this,arguments)}function tk(){return tk=a(h().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=xd(t),o=rm(),s=Xv(),u=tm(),c=ne(r);try{for(c.s();!(l=c.n()).done;)f=l.value,d=n.Hn(f.metadata.name),f.document&&(o=o.add(d)),s=s.insert(d,n.Jn(f)),u=u.insert(d,n.Yn(f.metadata.readTime))}catch(h){c.e(h)}finally{c.f()}return p=a.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Kg(a,function(e){return ev(Gp(Kd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Hg(e,p,s,Vd.min(),u).next((function(t){return p.apply(e),t})).next((function(t){return a.He.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.He.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.Wn.Vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),tk.apply(this,arguments)}function nk(e,t){return rk.apply(this,arguments)}function rk(){return rk=a(h().mark((function e(t,n){var r,i,a,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:rm(),e.next=3,Kg(t,ev(qy(n.bundledQuery)));case 3:return i=e.sent,a=xd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=bm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ye.saveNamedQuery(e,n);var o=i.withResumeToken(Yd.EMPTY_BYTE_STRING,t);return a.qn=a.qn.insert(o.targetId,o),a.He.updateTargetData(e,o).next((function(){return a.He.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.He.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ye.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),rk.apply(this,arguments)}var ik=function(){function e(t){Z(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return te(e,[{key:"getBundleMetadata",value:function(e,t){return gy.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:bm(n.createTime)}),gy.resolve()}},{key:"getNamedQuery",value:function(e,t){return gy.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:qy(e.bundledQuery),readTime:bm(e.readTime)}}(t)),gy.resolve()}}]),e}(),ak=function(){function e(){Z(this,e),this.ts=new Qv(ok.es),this.ns=new Qv(ok.ss)}return te(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ok(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.os(new ok(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new sp(new Kd([])),r=new ok(n,e),i=new ok(n,e+1),a=[];return this.ns.forEachInRange([r,i],(function(e){t.os(e),a.push(e.key)})),a}},{key:"hs",value:function(){var e=this;this.ts.forEach((function(t){return e.os(t)}))}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new sp(new Kd([])),n=new ok(t,e),r=new ok(t,e+1),i=rm();return this.ns.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ok(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ok=function(){function e(t,n){Z(this,e),this.key=t,this.fs=n}return te(e,null,[{key:"es",value:function(e,t){return sp.comparator(e.key,t.key)||Md(e.fs,t.fs)}},{key:"ss",value:function(e,t){return Md(e.fs,t.fs)||sp.comparator(e.key,t.key)}}]),e}(),sk=function(){function e(t,n){Z(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Qv(ok.es)}return te(e,[{key:"checkEmpty",value:function(e){return gy.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var a=new Ny(i,t,n,r);this.An.push(a);var o,s=ne(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ws=this.ws.add(new ok(u.key,i)),this.Jt.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return gy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return gy.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.gs(n),i=r<0?0:r;return gy.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return gy.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return gy.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ok(t,0),i=new ok(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],(function(e){var t=n._s(e.fs);a.push(t)})),gy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qv(Md);return t.forEach((function(e){var t=new ok(e,0),i=new ok(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],(function(e){r=r.add(e.fs)}))})),gy.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;sp.isDocumentKey(i)||(i=i.child(""));var a=new ok(new sp(i),0),o=new Qv(Md);return this.ws.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),a),gy.resolve(this.ys(o))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;bd(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return gy.forEach(t.mutations,(function(i){var a=new ok(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ok(t,0),r=this.ws.firstAfterOrEqual(n);return gy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.An.length,gy.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),uk=function(){function e(t,n){Z(this,e),this.Jt=t,this.Ts=n,this.docs=new Wv(sp.comparator),this.size=0}return te(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return gy.resolve(n?n.document.clone():Ip.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Xv();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Ip.newInvalidDocument(e))})),gy.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Xv(),i=new sp(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||av(t,c)&&(r=r.insert(c.key,c.clone()))}return gy.resolve(r)}},{key:"Es",value:function(e,t){return gy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ck(this)}},{key:"getSize",value:function(e){return gy.resolve(this.size)}}]),e}(),ck=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).De=e,r}return te(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)})),gy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(wg),lk=function(){function e(t){Z(this,e),this.persistence=t,this.Is=new kg((function(e){return Sp(e)}),Cp),this.lastRemoteSnapshotVersion=Vd.min(),this.highestTargetId=0,this.As=0,this.Rs=new ak,this.targetCount=0,this.Ps=og.ie()}return te(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach((function(e,n){return t(n)})),gy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return gy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return gy.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),gy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),gy.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new og(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,gy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),gy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,gy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Is.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Is.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),gy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return gy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return gy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),gy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),gy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),gy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return gy.resolve(n)}},{key:"containsKey",value:function(e,t){return gy.resolve(this.Rs.containsKey(t))}}]),e}(),fk=function(){function e(t,n){var r=this;Z(this,e),this.bs={},this.Be=new Dd(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new lk(this),this.Jt=new Gy,this.Je=function(e,t){return new uk(e,(function(e){return r.referenceDelegate.vs(e)}))}(this.Jt),this.k=new Py(n),this.Ye=new ik(this.k)}return te(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new sk(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;md("MemoryPersistence","Starting transaction:",e);var i=new hk(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(e){return r.referenceDelegate.Ss(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ds",value:function(e,t){return gy.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),hk=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return te(n)}(yy),dk=function(){function e(t){Z(this,e),this.persistence=t,this.Cs=new ak,this.Ns=null}return te(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw wd()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),gy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),gy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),gy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gy.forEach(this.xs,(function(r){var i=sp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ns=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return gy.or([function(){return gy.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function pk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var yk=function(){function e(t,n,r,i){Z(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return te(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Id(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(yd("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),gk=function(){function e(t,n,r){Z(this,e),this.targetId=t,this.state=n,this.error=r}return te(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Id(i.error.code,i.error.message))),a?new e(t,i.state,r):(yd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),kk=function(){function e(t,n){Z(this,e),this.clientId=t,this.activeTargetIds=n}return te(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=am(),o=0;i&&o<r.activeTargetIds.length;++o)i=op(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(yd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),wk=function(){function e(t,n){Z(this,e),this.clientId=t,this.onlineState=n}return te(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(yd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),bk=function(){function e(){Z(this,e),this.activeTargetIds=am()}return te(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),xk=function(){function e(t,n,r,i,a){Z(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Wv(Md),this.started=!1,this.js=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=pk(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new bk),this.Gs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Js=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}return te(e,[{key:"start",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Tn();case 2:t=e.sent,n=ne(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Bs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pk(this.persistenceKey,i)))&&(o=kk.Fs(i,a))&&(this.Ks=this.Ks.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Xs(),(s=this.storage.getItem(this.Js))&&(u=this.Zs(s))&&this.ti(u),c=ne(this.js);try{for(c.s();!(l=c.n()).done;)f=l.value,this.qs(f)}catch(h){c.e(h)}finally{c.f()}this.js=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(mk(this.persistenceKey,e));if(n){var r=gk.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(mk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.si(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return md("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){md("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){md("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(md("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void yd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(a(h().mark((function e(){var r,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(a));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(o));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(s));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}u=function(e){var t=Dd.I;if(null!=e)try{var n=JSON.parse(e);bd("number"==typeof n),t=n}catch(e){yd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Dd.I&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new yk(this.currentUser,e,t,n),i=vk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=vk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){var t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}},{key:"ri",value:function(e,t,n){var r=mk(this.persistenceKey,e),i=new gk(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return kk.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yk.Fs(new hd(i),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return gk.Fs(r,t)}},{key:"Zs",value:function(e){return wk.Fs(e)}},{key:"fi",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.mi(t.batchId,t.state,t.error));case 2:md("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.yi(o,s).then((function(){n.Ks=r}))}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=am();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_k=function(){function e(){Z(this,e),this.pi=new bk,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return te(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new bk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Ik=function(){function e(){Z(this,e)}return te(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Ek=function(){function e(){var t=this;Z(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return te(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){md("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ne(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){md("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ne(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sk=function(){function e(t){Z(this,e),this.Vi=t.Vi,this.Si=t.Si}return te(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),Ck=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return te(n,[{key:"Ki",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ld;o.listenOnce(ad.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case id.NO_ERROR:var t=o.getResponseJson();md("Connection","XHR received:",JSON.stringify(t)),i(t);break;case id.TIMEOUT:md("Connection",'RPC "'+e+'" timed out'),a(new Id(_d.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:var n=o.getStatus();if(md("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(_d).indexOf(t)>=0?t:_d.UNKNOWN}(r.status);a(new Id(s,r.message))}else a(new Id(_d.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Id(_d.UNAVAILABLE,"Connection failed."));break;default:wd()}}finally{md("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=nd(),a=rd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ud({})),this.qi(o.initMessageHeaders,t,n),be()||Ie()||we().indexOf("Electron/")>=0||Ee()||we().indexOf("MSAppHost/")>=0||_e()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");md("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new Sk({Vi:function(e){l?md("Connection","Not sending because WebChannel is closed:",e):(c||(md("Connection","Opening WebChannel transport."),u.open(),c=!0),md("Connection","WebChannel sending:",e),u.send(e))},Si:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,cd.EventType.OPEN,(function(){l||md("Connection","WebChannel transport opened.")})),h(u,cd.EventType.CLOSE,(function(){l||(l=!0,md("Connection","WebChannel transport closed"),f.Fi())})),h(u,cd.EventType.ERROR,(function(e){l||(l=!0,gd("Connection","WebChannel transport errored:",e),f.Fi(new Id(_d.UNAVAILABLE,"The operation could not be completed")))})),h(u,cd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];bd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){md("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Uv[e];if(void 0!==t)return Hv(t)}(a),s=i.message;void 0===o&&(o=_d.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Fi(new Id(o,s)),u.close()}else md("Connection","WebChannel received:",n),f.Oi(n)}})),h(a,od.STAT_EVENT,(function(e){e.stat===sd.PROXY?md("Connection","Detected buffering proxy"):e.stat===sd.NOPROXY&&md("Connection","Detected no buffering proxy")})),setTimeout((function(){f.$i()}),0),f}}]),n}(function(){function e(t){Z(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return te(e,[{key:"Bi",value:function(e,t,n,r,i){var a=this.Ui(e,t);md("RestConnection","Sending: ",a,n);var o={};return this.qi(o,r,i),this.Ki(e,a,o,n).then((function(e){return md("RestConnection","Received: ",e),e}),(function(t){throw gd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Ui",value:function(e,t){var n=Tk[e];return"".concat(this.Mi,"/v1/").concat(t,":").concat(n)}}]),e}());function Ak(){return"undefined"!=typeof window?window:null}function Nk(){return"undefined"!=typeof document?document:null}function Rk(e){return new ym(e,!0)}var Ok=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Z(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return te(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&md("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Yi=Date.now(),e()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),Pk=function(){function e(t,n,r,i,a,o,s,u){Z(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Ok(t,n)}return te(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.hr(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return e.mr()})))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.lr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==t?this.ur.reset():n&&n.code===_d.RESOURCE_EXHAUSTED?(yd(n.toString()),yd("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===_d.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Ni(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.rr===n&&e.Ir(i,a)}),(function(n){t((function(){var t=new Id(_d.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ar(t)}))}))}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(e){r((function(){return n.Ar(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ar",value:function(e){return md("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.rr===e?n():(md("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Dk=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,s){var u;return Z(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).k=o,u}return te(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:wd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.C?(bd(void 0===t||"string"==typeof t),Yd.fromBase64String(t||"")):(bd(void 0===t||t instanceof Uint8Array),Yd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?_d.UNKNOWN:Hv(e.code);return new Id(t,e.message||"")}(o);n=new lm(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Em(e,u.document.name),l=bm(u.document.updateTime),f=new xp({mapValue:{fields:u.document.fields}}),h=Ip.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new um(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Em(e,v.document),y=v.readTime?bm(v.readTime):Vd.min(),g=Ip.newNoDocument(m,y),k=v.removedTargetIds||[];n=new um([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Em(e,w.document),x=w.removedTargetIds||[];n=new um([],x,b,null)}else{if(!("filter"in t))return wd();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new zv(I),T=_.targetId;n=new cm(T,E)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Vd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Vd.min():t.readTime?bm(t.readTime):Vd.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t={};t.database=Cm(this.k),t.addTarget=function(e,t){var n,r=t.target;return(n=Ap(r)?{documents:Lm(e,r)}:{query:jm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=km(e,t.resumeToken):t.snapshotVersion.compareTo(Vd.min())>0&&(n.readTime=gm(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}},{key:"vr",value:function(e){var t={};t.database=Cm(this.k),t.removeTarget=e,this.gr(t)}}]),n}(Pk),Lk=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,s){var u;return Z(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).k=o,u.Vr=!1,u}return te(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,Ft(oe(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(bd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(bd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?bm(e.updateTime):bm(t);return n.isEqual(Vd.min())&&(n=bm(t)),new Iv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=bm(e.commitTime);return this.listener.Cr(n,t)}return bd(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=Cm(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Pm(t.k,e)}))};this.gr(n)}}]),n}(Pk),jk=function(e){ae(n,e);var t=le(n);function n(e,r,i,a){var o;return Z(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.ir=i,o.k=a,o.$r=!1,o}return te(n,[{key:"Fr",value:function(){if(this.$r)throw new Id(_d.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.ir.Bi(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_d.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Id(_d.UNKNOWN,e.toString())}))}},{key:"ji",value:function(e,t,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],s=a[1];return r.ir.ji(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===_d.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Id(_d.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return te((function e(){Z(this,e)}))}()),Mk=function(){function e(t,n){Z(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return te(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(yd(t),this.Lr=!1):md("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),Uk=te((function e(t,n,r,i,o){var s=this;Z(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=o,this.Hr.Ei((function(e){r.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Jk(s),!e.t0){e.next=5;break}return md("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=xd(t)).Gr.add(4),e.next=4,Vk(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,Fk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.Jr=new Mk(r,i)}));function Fk(e){return Bk.apply(this,arguments)}function Bk(){return Bk=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Jk(t)){e.next=18;break}n=ne(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Bk.apply(this,arguments)}function Vk(e){return zk.apply(this,arguments)}function zk(){return zk=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ne(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),zk.apply(this,arguments)}function qk(e,t){var n=xd(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Qk(n)?Gk(n):xw(n).lr()&&Wk(n,t))}function Hk(e,t){var n=xd(e),r=xw(n);n.Wr.delete(t),r.lr()&&Kk(n,t),0===n.Wr.size&&(r.lr()?r._r():Jk(n)&&n.Jr.set("Unknown"))}function Wk(e,t){e.Yr.X(t.targetId),xw(e).br(t)}function Kk(e,t){e.Yr.X(t),xw(e).vr(t)}function Gk(e){e.Yr=new hm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),xw(e).start(),e.Jr.Br()}function Qk(e){return Jk(e)&&!xw(e).hr()&&e.Wr.size>0}function Jk(e){return 0===xd(e).Gr.size}function Yk(e){e.Yr=void 0}function Xk(e){return $k.apply(this,arguments)}function $k(){return $k=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach((function(e,n){Wk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function Zk(e,t){return ew.apply(this,arguments)}function ew(){return ew=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yk(t),Qk(t)?(t.Jr.Kr(n),Gk(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}function tw(e,t,n){return nw.apply(this,arguments)}function nw(){return nw=a(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof lm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ne(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Wr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Wr.delete(o),t.Yr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),md("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,rw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof um?t.Yr.ot(n):n instanceof cm?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(Vd.min())){e.next=29;break}return e.prev=14,e.next=17,zg(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Yd.EMPTY_BYTE_STRING,n.snapshotVersion)),Kk(e,t);var r=new Oy(n.target,t,1,n.sequenceNumber);Wk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),md("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,rw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),nw.apply(this,arguments)}function rw(e,t,n){return iw.apply(this,arguments)}function iw(){return iw=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_y(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,Vk(t);case 5:t.Jr.set("Offline"),r||(r=function(){return zg(t.localStore)}),t.asyncQueue.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return md("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,Fk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return t().catch((function(n){return rw(e,n,t)}))}function ow(e){return sw.apply(this,arguments)}function sw(){return sw=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xd(t),r=_w(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!uw(n)){e.next=19;break}return e.prev=3,e.next=6,Wg(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=a.batchId,cw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,rw(n,e.t0);case 17:e.next=2;break;case 19:lw(n)&&fw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),sw.apply(this,arguments)}function uw(e){return Jk(e)&&e.Qr.length<10}function cw(e,t){e.Qr.push(t);var n=_w(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function lw(e){return Jk(e)&&!_w(e).hr()&&e.Qr.length>0}function fw(e){_w(e).start()}function hw(e){return dw.apply(this,arguments)}function dw(){return dw=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_w(t).kr();case 1:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(e){return vw.apply(this,arguments)}function vw(){return vw=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_w(t),r=ne(t.Qr);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Dr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function mw(e,t,n){return yw.apply(this,arguments)}function yw(){return yw=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),a=Ry.from(i,n,r),e.next=3,aw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ow(t);case 5:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function gw(e,t){return kw.apply(this,arguments)}function kw(){return kw=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&_w(t).Sr,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qv(i=n.code)||i===_d.ABORTED){e.next=7;break}return r=t.Qr.shift(),_w(t).wr(),e.next=5,aw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ow(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lw(t)&&fw(t);case 5:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function ww(e,t){return bw.apply(this,arguments)}function bw(){return bw=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xd(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,Fk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,Vk(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function xw(e){return e.Xr||(e.Xr=function(e,t,n){var r=xd(e);return r.Fr(),new Dk(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Xk.bind(null,e),Ni:Zk.bind(null,e),Pr:tw.bind(null,e)}),e.zr.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),Qk(e)?Gk(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Yk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Xr}function _w(e){return e.Zr||(e.Zr=function(e,t,n){var r=xd(e);return r.Fr(),new Lk(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:hw.bind(null,e),Ni:gw.bind(null,e),Nr:pw.bind(null,e),Cr:mw.bind(null,e)}),e.zr.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,ow(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(md("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Zr}var Iw=function(){function e(t,n,r,i,a){Z(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ed,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return te(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Id(_d.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Ew(e,t){if(yd("AsyncQueue","".concat(t,": ").concat(e)),_y(e))return new Id(_d.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Tw=function(){function e(t){Z(this,e),this.comparator=t?function(e,n){return t(e,n)||sp.comparator(e.key,n.key)}:function(e,t){return sp.comparator(e.key,t.key)},this.keyedMap=Zv(),this.sortedSet=new Wv(this.comparator)}return te(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Sw=function(){function e(){Z(this,e),this.eo=new Wv(sp.comparator)}return te(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):wd():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Cw=function(){function e(t,n,r,i,a,o,s,u){Z(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return te(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Tw.emptySet(n),a,r,i,!0,!1)}}]),e}(),Aw=te((function e(){Z(this,e),this.so=void 0,this.listeners=[]})),Nw=te((function e(){Z(this,e),this.queries=new kg((function(e){return rv(e)}),nv),this.onlineState="Unknown",this.io=new Set}));function Rw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=a(h().mark((function e(t,n){var r,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Aw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Ew(e.t0,"Initialization of query '".concat(iv(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.ro(r.onlineState),o.so&&n.oo(o.so)&&Mw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ow.apply(this,arguments)}function Pw(e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=a(h().mark((function e(t,n){var r,i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Lw(e,t){var n,r=xd(e),i=!1,a=ne(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=ne(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.so=o}}}catch(f){a.e(f)}finally{a.f()}i&&Mw(r)}function jw(e,t,n){var r=xd(e),i=r.queries.get(t);if(i){var a,o=ne(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Mw(e){e.io.forEach((function(e){e.next()}))}var Uw=function(){function e(t,n,r){Z(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return te(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ne(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Cw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.co?this.ho(e)&&(this.ao.next(e),a=!0):this.lo(e,this.onlineState)&&(this.fo(e),a=!0),this.uo=e,a}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.wo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"ho",value:function(e){if(e.docChanges.length>0)return!0;var t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=Cw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),Fw=function(){function e(t,n){Z(this,e),this.payload=t,this.byteLength=n}return te(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),Bw=function(){function e(t){Z(this,e),this.k=t}return te(e,[{key:"Hn",value:function(e){return Em(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?Rm(this.k,e.document,!1):Ip.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return bm(e)}}]),e}(),Vw=function(){function e(t,n,r){Z(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=zw(t)}return te(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new Bw(this.k),i=ne(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Hn(a.metadata.name),u=ne(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||rm()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ek(this.localStore,new Bw(this.k),this.documents,this.mo.id);case 2:t=e.sent,n=this.po(this.documents),r=ne(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,nk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Pg(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function zw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var qw=te((function e(t){Z(this,e),this.key=t})),Hw=te((function e(t){Z(this,e),this.key=t})),Ww=function(){function e(t,n){Z(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=rm(),this.mutatedKeys=rm(),this.Ao=ov(t),this.Ro=new Tw(this.Ao)}return te(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new Sw,i=t?t.Ro:this.Ro,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Qp(this.query)&&i.size===this.query.limit?i.last():null,c=Jp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=av(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Vo(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Ao(f,u)>0||c&&n.Ao(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Qp(this.query)||Jp(this.query))for(;o.size>this.query.limit;){var l=Qp(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Ro:o,vo:r,Bn:s,mutatedKeys:a}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var a=e.vo.no();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wd()}};return n(e)-n(t)}(e.type,t.type)||r.Ao(e.doc,t.doc)})),this.So(n);var o=t?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==a.length||u?{snapshot:new Cw(this.query,e.Ro,i,a,e.mutatedKeys,0===s,u,!1),Co:o}:{Co:o}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Sw,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.To=t.To.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.To=t.To.delete(e)})),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=rm(),this.Ro.forEach((function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))}));var n=[];return t.forEach((function(t){e.Io.has(t)||n.push(new Hw(t))})),this.Io.forEach((function(e){t.has(e)||n.push(new qw(e))})),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=rm();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return Cw.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),Kw=te((function e(t,n,r){Z(this,e),this.query=t,this.targetId=n,this.view=r})),Gw=te((function e(t){Z(this,e),this.key=t,this.$o=!1})),Qw=function(){function e(t,n,r,i,a,o){Z(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new kg((function(e){return rv(e)}),nv),this.Mo=new Map,this.Lo=new Set,this.Bo=new Wv(sp.comparator),this.Uo=new Map,this.qo=new ak,this.Ko={},this.jo=new Map,this.Qo=og.re(),this.onlineState="Unknown",this.Wo=void 0}return te(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function Jw(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=a(h().mark((function e(t,n){var r,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zb(t),!(o=r.Oo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.xo(),e.next=15;break;case 6:return e.next=8,Kg(r.localStore,ev(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Xw(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&qk(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Xw(e,t,n,r){return $w.apply(this,arguments)}function $w(){return $w=a(h().mark((function e(t,n,r,i){var o,s,u,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return function(){var e=a(h().mark((function e(t,n,r,i){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.bo(r),e.t0=a.Bn,!e.t0){e.next=6;break}return e.next=5,Jg(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.bo(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(gb(t,n.targetId,s.Co),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Jg(t.localStore,n,!0);case 3:return o=e.sent,s=new Ww(n,o.zn),u=s.bo(o.documents),c=sm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=s.applyChanges(u,t.isPrimaryClient,c),gb(t,r,l.Co),f=new Kw(n,r,s),e.abrupt("return",(t.Oo.set(n,f),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),$w.apply(this,arguments)}function Zw(e,t){return eb.apply(this,arguments)}function eb(){return eb=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=xd(t),i=r.Oo.get(n),!((a=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,a.filter((function(e){return!nv(e,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Gg(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Hk(r.remoteStore,i.targetId),mb(r,i.targetId)})).catch(fg);case 9:e.next=14;break;case 11:return mb(r,i.targetId),e.next=14,Gg(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t,n){return nb.apply(this,arguments)}function nb(){return nb=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qb(t),e.prev=1,e.next=4,function(e,t){var n,r=xd(e),i=Bd.now(),a=t.reduce((function(e,t){return e.add(t.key)}),rm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Wn.vn(e,a).next((function(a){n=a;var o,s=[],u=ne(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Nv(c,n.get(c.key));null!=l&&s.push(new Dv(c.key,l,_p(l.value.mapValue),Ev.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.An.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Wv(Md)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,bb(i,a.changes);case 9:return e.next=11,ow(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Ew(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),nb.apply(this,arguments)}function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),e.prev=1,e.next=4,qg(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Uo.get(t);n&&(bd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?bd(n.$o):e.removedDocuments.size>0&&(bd(n.$o),n.$o=!1))})),e.next=8,bb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,fg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ib.apply(this,arguments)}function ab(e,t,n){var r=xd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=xd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ne(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ro(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Mw(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ob(e,t,n){return sb.apply(this,arguments)}function sb(){return sb=a(h().mark((function e(t,n,r){var i,a,o,s,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=xd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Uo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Wv(sp.comparator)).insert(o,Ip.newNoDocument(o,Vd.min())),u=rm().add(o),c=new om(Vd.min(),new Map,new Qv(Md),s,u),e.next=9,rb(i,c);case 9:i.Bo=i.Bo.remove(o),i.Uo.delete(n),wb(i),e.next=16;break;case 14:return e.next=16,Gg(i.localStore,n,!1).then((function(){return mb(i,n,r)})).catch(fg);case 16:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function ub(e,t){return cb.apply(this,arguments)}function cb(){return cb=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),i=n.batch.batchId,e.prev=1,e.next=4,Vg(r.localStore,n);case 4:return a=e.sent,vb(r,i,null),pb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,bb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,fg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),cb.apply(this,arguments)}function lb(e,t,n){return fb.apply(this,arguments)}function fb(){return fb=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xd(t),e.prev=1,e.next=4,function(e,t){var n=xd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.An.lookupMutationBatch(e,t).next((function(t){return bd(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)})).next((function(){return n.An.performConsistencyCheck(e)})).next((function(){return n.Wn.vn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,vb(i,n,r),pb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,bb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,fg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fb.apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return db=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jk((r=xd(t)).remoteStore)||md("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=xd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.An.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.jo.get(i)||[]).push(n),r.jo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Ew(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),db.apply(this,arguments)}function pb(e,t){(e.jo.get(t)||[]).forEach((function(e){e.resolve()})),e.jo.delete(t)}function vb(e,t,n){var r=xd(e),i=r.Ko[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function mb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ne(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Oo.delete(a),n&&e.Fo.zo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((function(t){e.qo.containsKey(t)||yb(e,t)}))}function yb(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Hk(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),wb(e))}function gb(e,t,n){var r,i=ne(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof qw?(e.qo.addReference(a.key,t),kb(e,a)):a instanceof Hw?(md("SyncEngine","Document no longer in limbo: "+a.key),e.qo.removeReference(a.key,t),e.qo.containsKey(a.key)||yb(e,a.key)):wd()}}catch(o){i.e(o)}finally{i.f()}}function kb(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(md("SyncEngine","New document in limbo: "+n),e.Lo.add(r),wb(e))}function wb(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new sp(Kd.fromString(t)),r=e.Qo.next();e.Uo.set(r,new Gw(n)),e.Bo=e.Bo.insert(n,r),qk(e.remoteStore,new Oy(ev(Gp(n.path)),r,2,Dd.I))}}function bb(e,t,n){return xb.apply(this,arguments)}function xb(){return xb=a(h().mark((function e(t,n,r){var i,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=xd(t),o=[],s=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach((function(e,t){u.push(i.Go(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=Lg.$n(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(o),e.next=9,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return gy.forEach(n,(function(t){return gy.forEach(t.kn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return gy.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_y(e.t0)){e.next=10;break}throw e.t0;case 10:md("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ne(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.qn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.qn=r.qn.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function _b(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=xd(t)).currentUser.isEqual(n)){e.next=11;break}return md("SyncEngine","User change. New user:",n.toKey()),e.next=5,Fg(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.jo.forEach((function(e){e.forEach((function(e){e.reject(new Id(_d.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,bb(r,i.Gn);case 11:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Eb(e,t){var n=xd(e),r=n.Uo.get(t);if(r&&r.$o)return rm().add(r.key);var i=rm(),a=n.Mo.get(t);if(!a)return i;var o,s=ne(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Oo.get(u);i=i.unionWith(c.view.Po)}}catch(l){s.e(l)}finally{s.f()}return i}function Tb(e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),e.next=3,Jg(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&gb(r,n.targetId,a.Co),a));case 6:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Cb(e){return Ab.apply(this,arguments)}function Ab(){return Ab=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xd(t),e.abrupt("return",Xg(n.localStore).then((function(e){return bb(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Nb(e,t,n,r){return Rb.apply(this,arguments)}function Rb(){return Rb=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=xd(t),e.next=3,function(e,t){var n=xd(e),r=xd(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Zt(e,t).next((function(t){return t?n.Wn.vn(e,t):gy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ow(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(vb(a,n,i||null),pb(a,n),function(e,t){xd(xd(e).An).ee(t)}(a.localStore,n)):wd();case 11:return e.next=13,bb(a,o);case 13:e.next=16;break;case 15:md("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Ob(e,t){return Pb.apply(this,arguments)}function Pb(){return Pb=a(h().mark((function e(t,n){var r,i,a,o,s,u,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zb(r=xd(t)),qb(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Db(r,i.toArray());case 5:return a=e.sent,r.Wo=!0,e.next=9,ww(r.remoteStore,!0);case 9:o=ne(a);try{for(o.s();!(s=o.n()).done;)u=s.value,qk(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return c=[],l=Promise.resolve(),r.Mo.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return mb(r,t),Gg(r.localStore,t,!0)})),Hk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Db(r,c);case 21:return function(e){var t=xd(e);t.Uo.forEach((function(e,n){Hk(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new Wv(sp.comparator)}(r),r.Wo=!1,e.next=25,ww(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}function Db(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=a(h().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,d,p,v,m,y,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=xd(t),a=[],o=[],s=ne(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Mo.get(c))||0===f.length){e.next=34;break}return e.next=11,Kg(i.localStore,ev(f[0]));case 11:l=e.sent,d=ne(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.Oo.get(v),e.next=20,Tb(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Yg(i.localStore,c);case 36:return g=e.sent,e.next=39,Kg(i.localStore,g);case 39:return l=e.sent,e.next=42,Xw(i,jb(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Lb.apply(this,arguments)}function jb(e){return Kp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Mb(e){var t=xd(e);return xd(xd(t.localStore).persistence).Tn()}function Ub(e,t,n,r){return Fb.apply(this,arguments)}function Fb(){return Fb=a(h().mark((function e(t,n,r,i){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=xd(t)).Wo){e.next=5;break}md("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Xg(a.localStore);case 11:return o=e.sent,s=om.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,bb(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Gg(a.localStore,n,!0);case 18:return mb(a,n,i),e.abrupt("break",21);case 20:wd();case 21:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Bb(e,t,n){return Vb.apply(this,arguments)}function Vb(){return Vb=a(h().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=zb(t)).Wo){e.next=45;break}a=ne(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Mo.has(s)){e.next=10;break}return md("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Yg(i.localStore,s);case 12:return u=e.sent,e.next=15,Kg(i.localStore,u);case 15:return c=e.sent,e.next=18,Xw(i,jb(u),c.targetId,!1);case 18:qk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ne(r),e.prev=30,d=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,Gg(i.localStore,t,!1).then((function(){Hk(i.remoteStore,t),mb(i,t)})).catch(fg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Vb.apply(this,arguments)}function zb(e){var t=xd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ob.bind(null,t),t.Fo.Pr=Lw.bind(null,t.eventManager),t.Fo.zo=jw.bind(null,t.eventManager),t}function qb(e){var t=xd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ub.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lb.bind(null,t),t}function Hb(e,t,n){var r=xd(e);(function(){var e=a(h().mark((function e(t,n,r){var i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=xd(e),r=bm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ye.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(zw(i)),a=new Vw(i,t.localStore,n.k),e.next=14,n.Ho();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.yo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Ho();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,bb(t,u.In,void 0);case 30:return e.next=32,function(e,t){var n=xd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ye.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),gd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Wb=function(){function e(){Z(this,e),this.synchronizeTabs=!1}return te(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.k=Rk(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return Ug(this.persistence,new jg,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new fk(dk.ks,this.k)}},{key:"Jo",value:function(e){return new _k}},{key:"terminate",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Kb=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return te(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(oe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,$g(this.localStore);case 4:return e.next=6,this.ta.initialize(this,t);case 6:return e.next=8,qb(this.ta.syncEngine);case 8:return e.next=10,ow(this.ta.remoteStore);case 10:return e.next=12,this.persistence.sn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Zo",value:function(e){return Ug(this.persistence,new jg,e.initialUser,this.k)}},{key:"Xo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new vg(t,e.asyncQueue)}},{key:"Yo",value:function(e){var t=Og(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?$y.withCacheSize(this.cacheSizeBytes):$y.DEFAULT;return new Ag(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ak(),Nk(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new _k}}]),n}(Wb),Gb=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return te(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(oe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ta.syncEngine,e.t0=this.sharedClientState instanceof xk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={mi:Nb.bind(null,r),gi:Ub.bind(null,r),yi:Bb.bind(null,r),Tn:Mb.bind(null,r),_i:Cb.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.sn(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ob(i.ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Jo",value:function(e){var t=Ak();if(!xk.bt(t))throw new Id(_d.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Og(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Kb),Qb=function(){function e(){Z(this,e)}return te(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ab(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_b.bind(null,this.syncEngine),e.next=12,ww(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Nw}},{key:"createDatastore",value:function(e){var t,n=Rk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ck(t));return function(e,t,n,r){return new jk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ab(o.syncEngine,e,0)},a=Ek.bt()?new Ek:new Ik,new Uk(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Qw(e,t,n,r,i,a);return o&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xd(t),md("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,Vk(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Jb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Yb=function(){function e(t){Z(this,e),this.observer=t,this.muted=!1}return te(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Xb=function(){function e(t,n){var r=this;Z(this,e),this.sa=t,this.k=n,this.metadata=new Ed,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return te(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ra());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){var e=a(h().mark((function e(){var t,n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.oa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ia.decode(t),r=Number(n),isNaN(r)&&this.aa("length string (".concat(n,") is not valid number")),e.next=9,this.ca(r);case 9:return i=e.sent,e.abrupt("return",new Fw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ua",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"oa",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ua()<0)){e.next=7;break}return e.next=3,this.ha();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ua())<0&&this.aa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ca",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.ha();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.aa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ia.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sa.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$b=function(){function e(t){Z(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return te(e,[{key:"lookup",value:function(){var e=a(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Id(_d.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),i=Cm(r.k)+"/documents",a={documents:n.map((function(e){return Im(r.k,e)}))},e.next=5,r.ji("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Om(r.k,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());bd(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Bv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=sp.fromPath(t);n.mutations.push(new Vv(r,n.precondition(r)))})),e.next=7,function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xd(t),i=Cm(r.k)+"/documents",a={writes:n.map((function(e){return Pm(r.k,e)}))},e.next=3,r.Bi("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wd();t=Vd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Id(_d.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ev.updateTime(t):Ev.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vd.min()))throw new Id(_d.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ev.updateTime(t)}return Ev.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Zb=function(){function e(t,n,r,i){Z(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new Ok(this.asyncQueue,"transaction_retry")}return te(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new $b(e.datastore),(r=e.da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.wa(t)}))}))})).catch((function(t){e.wa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!ip(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((function(){return t.fa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!qv(t)}return!1}}]),e}(),ex=function(){function e(t,n,r,i){var o=this;Z(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hd.UNAUTHENTICATED,this.clientId=jd.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return md("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return te(e,[{key:"getConfiguration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Id(_d.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ed;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Ew(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),md("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Fg(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ax(t);case 3:return r=e.sent,md("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=xd(t)).asyncQueue.verifyOperationInProgress(),md("RemoteStore","RemoteStore received new credentials"),i=Jk(r),r.Gr.add(3),e.next=6,Vk(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,Fk(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e){return ox.apply(this,arguments)}function ox(){return ox=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return md("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,tx(t,new Wb);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function sx(e){return ux.apply(this,arguments)}function ux(){return ux=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return md("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,rx(t,new Qb);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),ux.apply(this,arguments)}function cx(e){return ax(e).then((function(e){return e.persistence}))}function lx(e){return ax(e).then((function(e){return e.localStore}))}function fx(e){return sx(e).then((function(e){return e.remoteStore}))}function hx(e){return sx(e).then((function(e){return e.syncEngine}))}function dx(e){return px.apply(this,arguments)}function px(){return px=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Jw.bind(null,n.syncEngine),r.onUnlisten=Zw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Yb({next:function(a){t.enqueueAndForget((function(){return Pw(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Id(_d.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Id(_d.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Uw(Gp(n.path),a,{includeMetadataChanges:!0,wo:!0});return Rw(e,o)},i.next=3,dx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function mx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Yb({next:function(n){t.enqueueAndForget((function(){return Pw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Id(_d.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Uw(n,a,{includeMetadataChanges:!0,wo:!0});return Rw(e,o)},i.next=3,dx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var yx=te((function e(t,n,r,i,a,o,s,u){Z(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),gx=function(){function e(t,n){Z(this,e),this.projectId=t,this.database=n||"(default)"}return te(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),kx=new Map;function wx(e,t,n){if(!n)throw new Id(_d.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bx(e,t,n,r){if(!0===t&&!0===r)throw new Id(_d.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xx(e){if(!sp.isDocumentKey(e))throw new Id(_d.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _x(e){if(sp.isDocumentKey(e))throw new Id(_d.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ix(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":wd()}function Ex(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Id(_d.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ix(e);throw new Id(_d.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Tx(e,t){if(t<=0)throw new Id(_d.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Sx=function(){function e(t){var n;if(Z(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Id(_d.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Id(_d.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,bx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return te(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Cx=function(){function e(t,n,r){Z(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sx({}),this._settingsFrozen=!1,t instanceof gx?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Id(_d.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gx(e.options.projectId)}(t))}return te(e,[{key:"app",get:function(){if(!this._app)throw new Id(_d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Id(_d.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sd;switch(e.type){case"gapi":var t=e.client;return bd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Rd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Id(_d.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=kx.get(e);t&&(md("ComponentProvider","Removing Datastore"),kx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ax(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Ex(e,Cx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&gd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=hd.MOCK_USER;else{o=ke(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Id(_d.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new hd(u)}e._authCredentials=new Cd(new Td(o,s))}}var Nx=function(){function e(t,n,r){Z(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return te(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Ox(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Rx=function(){function e(t,n,r){Z(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return te(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Ox=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,Gp(i)))._path=i,a.type="collection",a}return te(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Nx(this.firestore,null,new sp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Rx);function Px(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Be(e),wx("collection","path",t),e instanceof Cx){var a=Kd.fromString.apply(Kd,[t].concat(r));return _x(a),new Ox(e,null,a)}if(!(e instanceof Nx||e instanceof Ox))throw new Id(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Kd.fromString.apply(Kd,[t].concat(r)));return _x(o),new Ox(e.firestore,null,o)}function Dx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Be(e),1===arguments.length&&(t=jd.A()),wx("doc","path",t),e instanceof Cx){var a=Kd.fromString.apply(Kd,[t].concat(r));return xx(a),new Nx(e,null,new sp(a))}if(!(e instanceof Nx||e instanceof Ox))throw new Id(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Kd.fromString.apply(Kd,[t].concat(r)));return xx(o),new Nx(e.firestore,e instanceof Ox?e.converter:null,new sp(o))}function Lx(e,t){return e=Be(e),t=Be(t),(e instanceof Nx||e instanceof Ox)&&(t instanceof Nx||t instanceof Ox)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jx(e,t){return e=Be(e),t=Be(t),e instanceof Rx&&t instanceof Rx&&e.firestore===t.firestore&&nv(e._query,t._query)&&e.converter===t.converter}var Mx=function(){function e(){var t=this;Z(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Ok(this,"async_queue_retry"),this.Ra=function(){var e=Nk();e&&md("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=Nk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return te(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=Nk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new Ed;return this.ba((function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ga.push(e),t.va()}))}},{key:"va",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ga.length){e.next=14;break}return e.prev=1,e.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_y(e.t0)){e.next=12;break}throw e.t0;case 12:md("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return t.va()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(e){var t=this,n=this.ma.then((function(){return t.Ea=!0,e().catch((function(e){t.Ta=e,t.Ea=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw yd("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ea=!1,e}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=Iw.createAndSchedule(this,e,t,n,(function(e){return r.Va(e)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&wd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ma,e.next=3,t;case 3:if(t!==this.ma){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(e){var t,n=ne(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then((function(){t.pa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ne(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Sa()}))}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function Ux(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ne(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Fx=function(){function e(){Z(this,e),this._progressObserver={},this._taskCompletionResolver=new Ed,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return te(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Bx=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Mx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return te(n,[{key:"_terminate",value:function(){return this._firestoreClient||zx(this),this._firestoreClient.terminate()}}]),n}(Cx);function Vx(e){return e._firestoreClient||zx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new yx(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ex(e._authCredentials,e._appCheckCredentials,e._queue,r)}function qx(e,t,n){var r=new Ed;return e.asyncQueue.enqueue(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,tx(e,n);case 3:return i.next=5,rx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===_d.FAILED_PRECONDITION||e.code===_d.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Hx(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cx(e);case 2:return n=t.sent,t.next=5,fx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=xd(e);return t.Gr.delete(0),Fk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vx(e=Ex(e,Bx)))}function Wx(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,cx(e);case 2:return n=t.sent,t.next=5,fx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=xd(t)).Gr.add(0),e.next=4,Vk(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vx(e=Ex(e,Bx)))}function Kx(e,t){var n=Vx(e=Ex(e,Bx)),r=new Fx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Xb(e,t)}(function(e,t){if(e instanceof Uint8Array)return Jb(e,t);if(e instanceof ArrayBuffer)return Jb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Rk(t));e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hb,t.next=3,hx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Gx(e,t){return function(e,t){return e.asyncQueue.enqueue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=xd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ye.getNamedQuery(e,t)}))},n.next=3,lx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Vx(e=Ex(e,Bx)),t).then((function(t){return t?new Rx(e,null,t.query):null}))}function Qx(e){if(e._initialized||e._terminated)throw new Id(_d.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Jx=function(){function e(){Z(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Id(_d.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qd(n)}return te(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Yx=function(){function e(t){Z(this,e),this._byteString=t}return te(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yd.fromBase64String(t))}catch(t){throw new Id(_d.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yd.fromUint8Array(t))}}]),e}(),Xx=te((function e(t){Z(this,e),this._methodName=t})),$x=function(){function e(t,n){if(Z(this,e),!isFinite(t)||t<-90||t>90)throw new Id(_d.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Id(_d.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return te(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Md(this._lat,e._lat)||Md(this._long,e._long)}}]),e}(),Zx=/^__.*__$/,e_=function(){function e(t,n,r){Z(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return te(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Dv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pv(e,this.data,t,this.fieldTransforms)}}]),e}(),t_=function(){function e(t,n,r){Z(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return te(e,[{key:"toMutation",value:function(e,t){return new Dv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function n_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wd()}}var r_=function(){function e(t,n,r,i,a,o){Z(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ka(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return te(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return __(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(n_(this.xa)&&Zx.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),i_=function(){function e(t,n,r){Z(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||Rk(t)}return te(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new r_({xa:e,methodName:t,Ka:n,path:Qd.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function a_(e){var t=e._freezeSettings(),n=Rk(e._databaseId);return new i_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function o_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ja(a.merge||a.mergeFields?2:0,t,n,i);k_("Data must be an object, but it was:",o,r);var s,u,c=y_(r,o);if(a.merge)s=new Jd(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ne(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=w_(t,d,n);if(!o.contains(p))throw new Id(_d.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));I_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new Jd(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new e_(new xp(c),s,u)}var s_=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw 1===e.xa?e.Ua("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ua("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xx);function u_(e,t,n){return new r_({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var c_=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"_toFieldTransform",value:function(e){return new _v(e.path,new vv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xx),l_=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).Qa=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=u_(this,e,!0),n=this.Qa.map((function(e){return m_(e,t)})),r=new mv(n);return new _v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx),f_=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).Qa=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=u_(this,e,!0),n=this.Qa.map((function(e){return m_(e,t)})),r=new gv(n);return new _v(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx),h_=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e)).Wa=r,i}return te(n,[{key:"_toFieldTransform",value:function(e){var t=new wv(e.k,lv(e.k,this.Wa));return new _v(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx);function d_(e,t,n,r){var i=e.ja(1,t,n);k_("Data must be an object, but it was:",i,r);var a=[],o=xp.empty();qd(r,(function(e,r){var s=x_(t,e,n);r=Be(r);var u=i.La(s);if(r instanceof s_)a.push(s);else{var c=m_(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Jd(a);return new t_(o,s,i.fieldTransforms)}function p_(e,t,n,r,i,a){var o=e.ja(1,t,n),s=[w_(t,r,n)],u=[i];if(a.length%2!=0)throw new Id(_d.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(w_(t,a[c])),u.push(a[c+1]);for(var l=[],f=xp.empty(),h=s.length-1;h>=0;--h)if(!I_(l,s[h])){var d=s[h],p=u[h];p=Be(p);var v=o.La(d);if(p instanceof s_)l.push(d);else{var m=m_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Jd(l);return new t_(f,y,o.fieldTransforms)}function v_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return m_(n,e.ja(r?4:3,t))}function m_(e,t){if(g_(e=Be(e)))return k_("Unsupported field value:",t,e),y_(e,t);if(e instanceof Xx)return function(e,t){if(!n_(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ne(e);try{for(a.s();!(n=a.n()).done;){var o=m_(n.value,t.Ba(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Be(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return lv(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Bd.fromDate(e);return{timestampValue:gm(t.k,n)}}if(e instanceof Bd){var r=new Bd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gm(t.k,r)}}if(e instanceof $x)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Yx)return{bytesValue:km(t.k,e._byteString)};if(e instanceof Nx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ua("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:xm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(Ix(e)))}(e,t)}function y_(e,t){var n={};return Hd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qd(e,(function(e,r){var i=m_(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function g_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Bd||e instanceof $x||e instanceof Yx||e instanceof Nx||e instanceof Xx)}function k_(e,t,n){if(!g_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ix(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function w_(e,t,n){if((t=Be(t))instanceof Jx)return t._internalPath;if("string"==typeof t)return x_(e,t);throw __("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var b_=new RegExp("[~\\*/\\[\\]]");function x_(e,t,n){if(t.search(b_)>=0)throw __("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return fe(Jx,ze(t.split(".")))._internalPath}catch(r){throw __("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function __(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Id(_d.INVALID_ARGUMENT,s+e+u)}function I_(e,t){return e.some((function(e){return e.isEqual(t)}))}var E_=function(){function e(t,n,r,i,a){Z(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return te(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Nx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new T_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),T_=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(){return Ft(oe(n.prototype),"data",this).call(this)}}]),n}(E_);function S_(e,t){return"string"==typeof t?x_(e,t):t instanceof Jx?t._internalPath:t._delegate._internalPath}var C_=function(){function e(t,n){Z(this,e),this.hasPendingWrites=t,this.fromCache=n}return te(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),A_=function(e){ae(n,e);var t=le(n);function n(e,r,i,a,o,s){var u;return Z(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return te(n,[{key:"exists",value:function(){return Ft(oe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new N_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(S_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(E_),N_=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ft(oe(n.prototype),"data",this).call(this,e)}}]),n}(A_),R_=function(){function e(t,n,r,i){Z(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new C_(i.hasPendingWrites,i.fromCache),this.query=r}return te(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new N_(n._firestore,n._userDataWriter,r.key,r,new C_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Id(_d.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new N_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new C_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new N_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new C_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:O_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function O_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wd()}}function P_(e,t){return e instanceof A_&&t instanceof A_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof R_&&t instanceof R_&&e._firestore===t._firestore&&jx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function D_(e){if(Jp(e)&&0===e.explicitOrderBy.length)throw new Id(_d.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var L_=te((function e(){Z(this,e)}));function j_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var M_=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).Ga=e,a.za=r,a.Ha=i,a.type="where",a}return te(n,[{key:"_apply",value:function(e){var t=a_(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Id(_d.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){Q_(o,a);var u,c=[],l=ne(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(G_(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=G_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Q_(o,a),s=v_(n,"where",o,"in"===a||"not-in"===a);var h=Np.create(i,a,s);return function(e,t){if(t.V()){var n=Xp(e);if(null!==n&&!n.isEqual(t.field))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Yp(e);null!==r&&J_(e,t.field,r)}var i=function(e,t){var n,r=ne(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Id(_d.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Id(_d.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Rx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(L_);var U_=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return te(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Id(_d.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Id(_d.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vp(t,n);return function(e,t){if(null===Yp(e)){var n=Xp(e);null!==n&&J_(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new Rx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Wp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(L_);var F_=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.Ya=r,a.Xa=i,a}return te(n,[{key:"_apply",value:function(e){return new Rx(e.firestore,e.converter,tv(e._query,this.Ya,this.Xa))}}]),n}(L_);var B_=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return te(n,[{key:"_apply",value:function(e){var t=K_(e,this.type,this.Za,this.tc);return new Rx(e.firestore,e.converter,function(e,t){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(L_);function V_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new B_("startAt",t,!0)}function z_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new B_("startAfter",t,!1)}var q_=function(e){ae(n,e);var t=le(n);function n(e,r,i){var a;return Z(this,n),(a=t.call(this)).type=e,a.Za=r,a.tc=i,a}return te(n,[{key:"_apply",value:function(e){var t=K_(e,this.type,this.Za,this.tc);return new Rx(e.firestore,e.converter,function(e,t){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(L_);function H_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new q_("endBefore",t,!0)}function W_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new q_("endAt",t,!1)}function K_(e,t,n,r){if(n[0]=Be(n[0]),n[0]instanceof E_)return function(e,t,n,r,i){if(!r)throw new Id(_d.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=ne(Zp(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(vp(t,r.key));else{var c=r.data.field(u.field);if(tp(c))throw new Id(_d.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Id(_d.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Fp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=a_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Id(_d.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Id(_d.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!$p(e)&&-1!==c.indexOf("/"))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Kd.fromString(c));if(!sp.isDocumentKey(l))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new sp(l);s.push(vp(t,f))}else{var h=v_(n,r,c);s.push(h)}}return new Fp(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function G_(e,t,n){if("string"==typeof(n=Be(n))){if(""===n)throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$p(t)&&-1!==n.indexOf("/"))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Kd.fromString(n));if(!sp.isDocumentKey(r))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vp(e,new sp(r))}if(n instanceof Nx)return vp(e,n._key);throw new Id(_d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ix(n),"."))}function Q_(e,t){if(!Array.isArray(e)||0===e.length)throw new Id(_d.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Id(_d.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function J_(e,t,n){if(!n.isEqual(t))throw new Id(_d.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Y_=function(){function e(){Z(this,e)}return te(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(up(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ep(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return qd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new $x(Zd(e.latitude),Zd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=np(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$d(e);return new Bd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Kd.fromString(e);bd(Qm(n));var r=new gx(n.get(1),n.get(3)),i=new sp(n.popFirst(5));return r.isEqual(t)||yd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function X_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var $_=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new Yx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nx(this.firestore,null,t)}}]),n}(Y_),Z_=function(){function e(t,n){Z(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=a_(t)}return te(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=eI(e,this._firestore),i=X_(r.converter,t,n),a=o_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ev.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=eI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Be(t))||t instanceof Jx?p_(this._dataReader,"WriteBatch.update",i._key,t,n,o):d_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ev.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=eI(e,this._firestore);return this._mutations=this._mutations.concat(new Bv(t._key,Ev.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Id(_d.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function eI(e,t){if((e=Be(e)).firestore!==t)throw new Id(_d.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var tI=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new Yx(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nx(this.firestore,null,t)}}]),n}(Y_);function nI(e){e=Ex(e,Nx);var t=Ex(e.firestore,Bx),n=Vx(t),r=new tI(t);return function(e,t){var n=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=xd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Wn.Rn(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Id(_d.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Ew(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new A_(t,r,e._key,n,new C_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function rI(e){e=Ex(e,Rx);var t=Ex(e.firestore,Bx),n=Vx(t),r=new tI(t);return function(e,t){var n=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jg(t,n,!0);case 3:i=e.sent,a=new Ww(n,i.zn),o=a.bo(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Ew(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,lx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new R_(t,r,e,n)}))}function iI(e,t,n){e=Ex(e,Nx);var r=Ex(e.firestore,Bx),i=X_(e.converter,t,n);return uI(r,[o_(a_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ev.none())])}function aI(e,t,n){e=Ex(e,Nx);for(var r=Ex(e.firestore,Bx),i=a_(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return uI(r,[("string"==typeof(t=Be(t))||t instanceof Jx?p_(i,"updateDoc",e._key,t,n,o):d_(i,"updateDoc",e._key,t)).toMutation(e._key,Ev.exists(!0))])}function oI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Be(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Ux(n[c])||(u=n[c],c++);var l,f,d,p={includeMetadataChanges:u.includeMetadataChanges};if(Ux(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[c+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof Nx)f=Ex(e.firestore,Bx),d=Gp(e._key.path),l={next:function(t){n[c]&&n[c](cI(f,e,t))},error:n[c+1],complete:n[c+2]};else{var m=Ex(e,Rx);f=Ex(m.firestore,Bx),d=m._query;var y=new tI(f);l={next:function(e){n[c]&&n[c](new R_(f,y,m,e))},error:n[c+1],complete:n[c+2]},D_(e._query)}return function(e,t,n,r){var i=new Yb(r),o=new Uw(t,i,n);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Rw,t.next=3,dx(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.na(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pw,t.next=3,dx(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vx(f),d,p,l)}function sI(e,t){return function(e,t){var n=new Yb(t);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){xd(e).io.add(t),t.next()},t.next=3,dx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.na(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){xd(e).io.delete(t)},t.next=3,dx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vx(e=Ex(e,Bx)),Ux(t)?t:{next:t})}function uI(e,t){return function(e,t){var n=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=tb,r.next=3,hx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Vx(e),t)}function cI(e,t,n){var r=n.docs.get(t._key),i=new tI(e);return new A_(e,i,t._key,r,new C_(n.hasPendingWrites,n.fromCache),t.converter)}var lI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r))._firestore=e,i}return te(n,[{key:"get",value:function(e){var t=this,r=eI(e,this._firestore),i=new tI(this._firestore);return Ft(oe(n.prototype),"get",this).call(this,e).then((function(e){return new A_(t._firestore,i,r._key,e._document,new C_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Z(this,e),this._firestore=t,this._transaction=n,this._dataReader=a_(t)}return te(e,[{key:"get",value:function(e){var t=this,n=eI(e,this._firestore),r=new $_(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return wd();var i=e[0];if(i.isFoundDocument())return new E_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new E_(t._firestore,r,n._key,null,n.converter);throw wd()}))}},{key:"set",value:function(e,t,n){var r=eI(e,this._firestore),i=X_(r.converter,t,n),a=o_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=eI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Be(t))||t instanceof Jx?p_(this._dataReader,"Transaction.update",i._key,t,n,o):d_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=eI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function fI(e,t){return function(e,t){var n=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return sx(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Zb(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Vx(e=Ex(e,Bx)),(function(n){return t(new lI(e,n))}))}function hI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new l_("arrayUnion",t)}function dI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new f_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dd=e}(xt),dt(new qe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Bx(i,new Ad(e.getProvider("auth-internal")),new Pd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ct(fd,"3.4.1",e),Ct(fd,"3.4.1","esm2017")}();function pI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Id("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function vI(){if("undefined"===typeof Uint8Array)throw new Id("unimplemented","Uint8Arrays are not available in this environment.")}function mI(){if("undefined"==typeof atob)throw new Id("unimplemented","Blobs are unavailable in Firestore in this environment.")}var yI=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"toBase64",value:function(){return mI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return vI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return mI(),new e(Yx.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return vI(),new e(Yx.fromUint8Array(t))}}]),e}();function gI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ne(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var kI=function(){function e(){Z(this,e)}return te(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Qx(e=Ex(e,Bx));var n=Vx(e),r=e._freezeSettings(),i=new Qb;return qx(n,i,new Kb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Qx(e=Ex(e,Bx));var t=Vx(e),n=e._freezeSettings(),r=new Qb;return qx(t,r,new Gb(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Id(_d.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ed;return e._queue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wy.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,wy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Og(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),wI=function(){function e(t,n,r){var i=this;Z(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof gx||(this._appCompat=t)}return te(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||gd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ax(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Hx(this._delegate)}},{key:"disableNetwork",value:function(){return Wx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&bx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ed;return e.asyncQueue.enqueueAndForget(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hb,n.next=3,hx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Vx(e=Ex(e,Bx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return sI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Id("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new DI(this,Px(this._delegate,e))}catch(t){throw TI(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new EI(this,Dx(this._delegate,e))}catch(t){throw TI(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new RI(this,function(e,t){if(e=Ex(e,Cx),wx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Id(_d.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Rx(e,null,function(e){return new Wp(Kd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw TI(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return fI(this._delegate,(function(n){return e(new xI(t,n))}))}},{key:"batch",value:function(){var e=this;return Vx(this._delegate),new _I(new Z_(this._delegate,(function(t){return uI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Kx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Gx(this._delegate,e).then((function(e){return e?new RI(t,e):null}))}}]),e}(),bI=function(e){ae(n,e);var t=le(n);function n(e){var r;return Z(this,n),(r=t.call(this)).firestore=e,r}return te(n,[{key:"convertBytes",value:function(e){return new yI(new Yx(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return EI.forKey(t,this.firestore,null)}}]),n}(Y_);var xI=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return te(e,[{key:"get",value:function(e){var t=this,n=LI(e);return this._delegate.get(n).then((function(e){return new AI(t._firestore,new A_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=LI(e);return n?(pI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=LI(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=LI(e);return this._delegate.delete(t),this}}]),e}(),_I=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"set",value:function(e,t,n){var r=LI(e);return n?(pI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=LI(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=LI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),II=function(){function e(t,n,r){Z(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return te(e,[{key:"fromFirestore",value:function(e,t){var n=new N_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new bI(t),n),i.set(n,a)),a}}]),e}();II.INSTANCES=new WeakMap;var EI=function(){function e(t,n){Z(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return te(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new DI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new DI(this.firestore,Px(this._delegate,e))}catch(t){throw TI(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Be(e))instanceof Nx&&Lx(this._delegate,e)}},{key:"set",value:function(e,t){t=pI("DocumentReference.set",t);try{return t?iI(this._delegate,e,t):iI(this._delegate,e)}catch(n){throw TI(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?aI(this._delegate,e):aI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw TI(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return uI(Ex(e.firestore,Bx),[new Bv(e._key,Ev.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=SI(n),a=CI(n,(function(t){return new AI(e.firestore,new A_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return oI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?nI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ex(e,Nx);var t=Ex(e.firestore,Bx);return vx(Vx(t),e._key,{source:"server"}).then((function(n){return cI(t,e,n)}))}(this._delegate):function(e){e=Ex(e,Nx);var t=Ex(e.firestore,Bx);return vx(Vx(t),e._key).then((function(n){return cI(t,e,n)}))}(this._delegate),t.then((function(e){return new AI(n.firestore,new A_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(II.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Id("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Nx(n._delegate,r,new sp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Nx(n._delegate,r,t))}}]),e}();function TI(e,t,n){return e.message=e.message.replace(t,n),e}function SI(e){var t,n=ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!gI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function CI(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=gI(e[0])?e[0]:gI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var AI=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"ref",get:function(){return new EI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return P_(this._delegate,e._delegate)}}]),e}(),NI=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||wd()}(void 0!==t),t}}]),n}(AI),RI=function(){function e(t,n){Z(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new bI(t)}return te(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,j_(this._delegate,function(e,t,n){var r=t,i=S_("where",e);return new M_(i,r,n)}(t,n,r)))}catch(i){throw TI(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,j_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=S_("orderBy",e);return new U_(n,t)}(t,n)))}catch(r){throw TI(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,j_(this._delegate,function(e){return Tx("limit",e),new F_("limit",e,"F")}(t)))}catch(n){throw TI(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,j_(this._delegate,function(e){return Tx("limitToLast",e),new F_("limitToLast",e,"L")}(t)))}catch(n){throw TI(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,j_(this._delegate,V_.apply(void 0,arguments)))}catch(t){throw TI(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,j_(this._delegate,z_.apply(void 0,arguments)))}catch(t){throw TI(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,j_(this._delegate,H_.apply(void 0,arguments)))}catch(t){throw TI(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,j_(this._delegate,W_.apply(void 0,arguments)))}catch(t){throw TI(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return jx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ex(e,Rx);var t=Ex(e.firestore,Bx),n=Vx(t),r=new tI(t);return mx(n,e._query,{source:"server"}).then((function(n){return new R_(t,r,e,n)}))}(this._delegate):function(e){e=Ex(e,Rx);var t=Ex(e.firestore,Bx),n=Vx(t),r=new tI(t);return D_(e._query),mx(n,e._query).then((function(n){return new R_(t,r,e,n)}))}(this._delegate),t.then((function(e){return new PI(n.firestore,new R_(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=SI(n),a=CI(n,(function(t){return new PI(e.firestore,new R_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return oI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(II.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),OI=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new NI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),PI=function(){function e(t,n){Z(this,e),this._firestore=t,this._delegate=n}return te(e,[{key:"query",get:function(){return new RI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new NI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new OI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new NI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return P_(this._delegate,e._delegate)}}]),e}(),DI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return te(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new EI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new EI(this.firestore,void 0===e?Dx(this._delegate):Dx(this._delegate,e))}catch(t){throw TI(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Ex(e.firestore,Bx),r=Dx(e),i=X_(e.converter,t);return uI(n,[o_(a_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ev.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new EI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Lx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(II.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(RI);function LI(e){return Ex(e,Nx)}var jI=function(){function e(){Z(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=fe(Jx,n)}return te(e,[{key:"isEqual",value:function(e){return(e=Be(e))instanceof Jx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Qd.keyField().canonicalString())}}]),e}(),MI=function(){function e(t){Z(this,e),this._delegate=t}return te(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new c_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new s_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=hI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=dI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new h_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),UI={Firestore:wI,GeoPoint:$x,Timestamp:Bd,Blob:yI,Transaction:xI,WriteBatch:_I,DocumentReference:EI,DocumentSnapshot:AI,Query:RI,QueryDocumentSnapshot:NI,QuerySnapshot:PI,CollectionReference:DI,FieldPath:jI,FieldValue:MI,setLogLevel:function(e){!function(e){pd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new qe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},UI)))}(e,(function(e,t){return new wI(e,t,new kI)})),e.registerVersion("@firebase/firestore-compat","0.1.10")}(Mt);var FI="firebasestorage.googleapis.com",BI=function(e){ae(n,e);var t=le(n);function n(e,r){var i;return Z(this,n),(i=t.call(this,VI(e),"Firebase Storage: ".concat(r," (").concat(VI(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(re(i),n.prototype),i}return te(n,[{key:"_codeEquals",value:function(e){return VI(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Se);function VI(e){return"storage/"+e}function zI(){return new BI("unknown","An unknown error occurred, please check the error payload for server response.")}function qI(){return new BI("canceled","User canceled the upload/download.")}function HI(){return new BI("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function WI(e){return new BI("invalid-argument",e)}function KI(){return new BI("app-deleted","The Firebase app was deleted.")}function GI(e){return new BI("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function QI(e,t){return new BI("invalid-format","String does not match format '"+e+"': "+t)}function JI(e){throw new BI("internal-error","Internal error: "+e)}var YI,XI=function(){function e(t,n){Z(this,e),this.bucket=t,this.path_=n}return te(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new BI("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===FI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new BI("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),$I=function(){function e(t){Z(this,e),this.promise_=Promise.reject(t)}return te(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function ZI(e){return"string"===typeof e||e instanceof String}function eE(e){return tE()&&e instanceof Blob}function tE(){return"undefined"!==typeof Blob}function nE(e,t,n,r){if(r<t)throw WI("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw WI("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function rE(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function iE(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(YI||(YI={}));var aE=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this;Z(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return te(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=zI();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?KI():qI());else i(new BI("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new oE(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new oE(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===YI.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new oE(o,r))}else{var s=r.getErrorCode()===YI.ABORT;t(!1,new oE(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),oE=te((function e(t,n,r){Z(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function sE(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uE(){for(var e=sE(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(tE())return new Blob(n);throw new BI("unsupported-environment","This browser doesn't seem to support creating Blobs")}var cE={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lE=te((function e(t,n){Z(this,e),this.data=t,this.contentType=n||null}));function fE(e,t){switch(e){case cE.RAW:return new lE(hE(t));case cE.BASE64:case cE.BASE64URL:return new lE(dE(e,t));case cE.DATA_URL:return new lE(function(e){var t=new pE(e);return t.base64?dE(cE.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw QI(cE.DATA_URL,"Malformed data URL.")}return hE(t)}(t.rest)}(t),new pE(t).contentType)}throw zI()}function hE(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function dE(e,t){switch(e){case cE.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw QI(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cE.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw QI(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw QI(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var pE=te((function e(t){Z(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw QI(cE.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var vE=function(){function e(t,n){Z(this,e);var r=0,i="";eE(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return te(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(eE(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(tE()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(uE.apply(null,i))}var a=n.map((function(e){return ZI(e)?fE(cE.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function mE(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yE(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function gE(e,t){return t}var kE=te((function e(t,n,r,i){Z(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||gE})),wE=null;function bE(){if(wE)return wE;var e=[];e.push(new kE("bucket")),e.push(new kE("generation")),e.push(new kE("metageneration")),e.push(new kE("name","fullPath",!0));var t=new kE("name");t.xform=function(e,t){return function(e){return!ZI(e)||e.length<2?e:yE(e)}(t)},e.push(t);var n=new kE("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kE("timeCreated")),e.push(new kE("updated")),e.push(new kE("md5Hash",null,!0)),e.push(new kE("cacheControl",null,!0)),e.push(new kE("contentDisposition",null,!0)),e.push(new kE("contentEncoding",null,!0)),e.push(new kE("contentLanguage",null,!0)),e.push(new kE("contentType",null,!0)),e.push(new kE("metadata","customMetadata",!0)),wE=e}function xE(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new XI(n,r);return t._makeStorageReference(i)}})}(r,e),r}function _E(e,t,n){var r=mE(t);return null===r?null:xE(e,r,n)}function IE(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function EE(e,t,n){var r=mE(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ne(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new XI(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var u,c=ne(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new XI(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var TE=te((function e(t,n,r,i){Z(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function SE(e){if(!e)throw zI()}function CE(e,t){return function(n,r){var i=_E(e,r,t);return SE(null!==i),i}}function AE(e,t){return function(n,r){var i=_E(e,r,t);return SE(null!==i),function(e,t,n,r){var i=mE(t);if(null===i)return null;if(!ZI(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return rE("/b/"+o(i)+"/o/"+o(a),n,r)+iE({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function NE(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new BI("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new BI("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new BI("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new BI("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function RE(e){var t=NE(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new BI("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function OE(e,t,n){var r=rE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new TE(r,"GET",CE(e,n),i);return a.errorHandler=RE(t),a}function PE(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=rE(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new TE(o,"GET",function(e,t){return function(n,r){var i=EE(e,t,r);return SE(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=NE(t),u}function DE(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function LE(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=DE(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+IE(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=vE.getBlob(c,r,l);if(null===f)throw HI();var h={name:u.fullPath},d=rE(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new TE(d,"POST",CE(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=NE(t),v}var jE=te((function e(t,n,r,i){Z(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function ME(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){SE(!1)}return SE(!!n&&-1!==(t||["active"]).indexOf(n)),n}var UE=262144;function FE(e,t,n,r,i,a,o,s){var u=new jE(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new BI("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw HI();var v=t.maxUploadRetryTime,m=new TE(n,"POST",(function(e,n){var i,o=ME(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?CE(t,a)(e,n):null,new jE(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=NE(e),m}var BE={STATE_CHANGED:"state_changed"},VE={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zE(e){switch(e){case"running":case"pausing":case"canceling":return VE.RUNNING;case"paused":return VE.PAUSED;case"success":return VE.SUCCESS;case"canceled":return VE.CANCELED;default:return VE.ERROR}}var qE=te((function e(t,n,r){Z(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function HE(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var WE=function(){function e(){var t=this;Z(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=YI.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=YI.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=YI.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return te(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw JI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw JI("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw JI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw JI("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw JI("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),KE=function(e){ae(n,e);var t=le(n);function n(){return Z(this,n),t.apply(this,arguments)}return te(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(WE);function GE(){return new KE}var QE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Z(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=bE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return te(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=DE(t,r,i),s={name:o.fullPath},u=rE(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=IE(o,n),f=e.maxUploadRetryTime,h=new TE(u,"POST",(function(e){var t;ME(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){SE(!1)}return SE(ZI(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=NE(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,GE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new TE(n,"POST",(function(e){var t=ME(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){SE(!1)}n||SE(!1);var i=Number(n);return SE(!isNaN(i)),new jE(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=NE(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,GE,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=UE*this._chunkMultiplier,n=new jE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=FE(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,GE,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){UE*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=OE(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,GE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=LE(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,GE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=qI(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=zE(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new qE(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(zE(this._state)){case VE.SUCCESS:HE(this._resolve.bind(null,this.snapshot))();break;case VE.CANCELED:case VE.ERROR:HE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(zE(this._state)){case VE.RUNNING:case VE.PAUSED:e.next&&HE(e.next.bind(e,this.snapshot))();break;case VE.SUCCESS:e.complete&&HE(e.complete.bind(e))();break;default:e.error&&HE(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),JE=function(){function e(t,n){Z(this,e),this._service=t,this._location=n instanceof XI?n:XI.makeFromUrl(n,t.host)}return te(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new XI(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return yE(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new XI(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw GI(e)}}]),e}();function YE(e,t,n){return XE.apply(this,arguments)}function XE(){return(XE=a(h().mark((function e(t,n,r){var i,a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,$E(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,ze(s.prefixes)),(a=n.items).push.apply(a,ze(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,YE(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $E(e,t){null!=t&&"number"===typeof t.maxResults&&nE("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=PE(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,GE)}function ZE(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=rE(t.fullServerUrl(),e.host,e._protocol),a=IE(n,r),o=e.maxOperationRetryTime,s=new TE(i,"PATCH",CE(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=RE(t),s}(e.storage,e._location,t,bE());return e.storage.makeRequestWithTokens(n,GE)}function eT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=rE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new TE(r,"GET",AE(e,n),i);return a.errorHandler=RE(t),a}(e.storage,e._location,bE());return e.storage.makeRequestWithTokens(t,GE).then((function(e){if(null===e)throw new BI("no-download-url","The given file does not have any download URLs.");return e}))}function tT(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=rE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new TE(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=RE(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,GE)}function nT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new XI(e._location.bucket,n);return new JE(e.storage,r)}function rT(e,t){if(e instanceof sT){var n=e;if(null==n._bucket)throw new BI("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new JE(n,n._bucket);return null!=t?rT(r,t):r}return void 0!==t?nT(e,t):e}function iT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof sT)return new JE(e,t);throw WI("To use ref(service, url), the first argument must be a Storage instance.")}return rT(e,t)}function aT(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:XI.makeFromBucketSpec(n,e)}function oT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:ke(i,e.app.options.projectId))}var sT=function(){function e(t,n,r,i,a){Z(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=FI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?XI.makeFromBucketSpec(i,this._host):aT(this._host,this.app.options)}return te(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=XI.makeFromBucketSpec(this._url,e):this._bucket=aT(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){nE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){nE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new JE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new $I(KI());var a=function(e,t,n,r,i,a){var o=iE(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new aE(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),uT="@firebase/storage",cT="0.9.0",lT="storage";function fT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new QE(e,new vE(t),n)}(e=Be(e),t,n)}function hT(e){return function(e){e._throwIfRoot("getMetadata");var t=OE(e.storage,e._location,bE());return e.storage.makeRequestWithTokens(t,GE)}(e=Be(e))}function dT(e){return function(e){var t={prefixes:[],items:[]};return YE(e,t).then((function(){return t}))}(e=Be(e))}function pT(e,t){return iT(e=Be(e),t)}function vT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};oT(e,t,n,r)}function mT(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new sT(r,i,a,n,xt)}dt(new qe(lT,mT,"PUBLIC").setMultipleInstances(!0)),Ct(uT,cT,""),Ct(uT,cT,"esm2017");var yT=function(){function e(t,n,r){Z(this,e),this._delegate=t,this.task=n,this.ref=r}return te(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),gT=function(){function e(t,n){Z(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return te(e,[{key:"snapshot",get:function(){return new yT(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new yT(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new yT(e,i,i._ref))}:{next:t.next?function(e){return t.next(new yT(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),kT=function(){function e(t,n){Z(this,e),this._delegate=t,this._service=n}return te(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new wT(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new wT(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),wT=function(){function e(t,n){Z(this,e),this._delegate=t,this.storage=n}return te(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return nT(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new gT(fT(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cE.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=fE(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new gT(new QE(this._delegate,new vE(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return dT(this._delegate).then((function(t){return new kT(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return $E(e=Be(e),t)}(this._delegate,e||void 0).then((function(e){return new kT(e,t.storage)}))}},{key:"getMetadata",value:function(){return hT(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return ZE(e=Be(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return eT(Be(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),tT(Be(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw GI(e)}}]),e}(),bT=function(){function e(t,n){Z(this,e),this.app=t,this._delegate=n}return te(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(xT(e))throw WI("ref() expected a child path but got a URL, use refFromURL instead.");return new wT(pT(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!xT(e))throw WI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{XI.makeFromUrl(e,this._delegate.host)}catch(t){throw WI("refFromUrl() expected a valid full URL but got an invalid one.")}return new wT(pT(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vT(this._delegate,e,t,n)}}]),e}();function xT(e){return/^[A-Za-z]+:\/\//.test(e)}function _T(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new bT(r,i)}!function(e){var t={TaskState:VE,TaskEvent:BE,StringFormat:cE,Storage:bT,Reference:wT};e.INTERNAL.registerComponent(new qe("storage-compat",_T,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.8")}(Mt);Mt.initializeApp({apiKey:"AIzaSyAOO5NVjubCkhhhy0ClohwN4t9Scuv3t_U",authDomain:"nwitter-c8556.firebaseapp.com",projectId:"nwitter-c8556",storageBucket:"nwitter-c8556.appspot.com",messagingSenderId:"244023652075",appId:"1:244023652075:web:04eeb6d09174a0b66958ae"});var IT=Mt,ET=Mt.auth(),TT=Mt.firestore(),ST=Mt.storage(),CT={userId:"",userName:"",uid:"",photoUrl:""},AT={docId:"",text:"",attachmentUrl:"",value:"",createdAt:"",creatorId:"",about:null,notifications:[]},NT=function(e,t){return TT.collection("tweets_".concat(e)).doc("".concat(t)).get()},RT=function(e){return TT.collection("tweets_".concat(e)).get()},OT=function(e){return TT.collection("users").doc("".concat(e))},PT=function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OT(t).onSnapshot((function(e){e.exists?n(e.data()):(n(CT),console.log("Can't find the profile"))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),DT=function(){var e=a(h().mark((function e(t,n,r,i,a){var o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[{value:r,user:i.uid,aboutDocId:a}],s=o.concat(t.notifications),u=v(v({},t),{},{notifications:s}),e.next=5,TT.collection("tweets_".concat(n.uid)).doc("".concat(t.docId)).set(u);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),LT=function(){var e=a(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0!==r?[t].concat(r):[],e.next=3,OT(n).set({notifications:i},{merge:!0});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),jT=function(){var e=a(h().mark((function e(t,n,r,i,a){var o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={value:t,docId:""===r?"":r.docId,aboutDocId:a,user:n.uid,tweet:"heart"!==r.value&&"rt"!==r.value},LT(o,i.uid,i.notifications);case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),MT=function(e,t,n,r,i,a){e.forEach((function(o){if(o.docId===a){var s=e.indexOf(o);e[s]=v(v({},o),{},{notifications:[{value:t,user:n.uid,aboutDocId:r}].concat(o.notifications)}),i({type:"EDIT",uid:n.uid,docId:e[s].docId,myTweets:e,tweet:e[s]})}}))},UT=function(e,t,n,r,i,a,o,s){var u=JSON.stringify(Date.now()),c=new Date,l={docId:u,text:"",value:o,createdAt:[c.getFullYear(),c.getMonth()+1,c.getDate(),c.getHours(),c.getMinutes()],creatorId:n.uid,attachmentUrl:"",about:{docId:e.docId,creatorId:e.creatorId},notifications:[]};e.creatorId===n.uid?MT(s,o,n,u,a,e.docId):("rt"!==t.value&&"heart"!==t.value&&a({type:"CREATE",docId:u,uid:n.uid,tweet:l}),jT(o,n,e,r,u),DT(e,r,o,n,u)),"rt"!==t.value&&"heart"!==t.value||(t.creatorId===n.uid?MT(s,o,n,u,a,t.docId):(jT(o,n,t,i,u),DT(t,i,o,n,u)))},FT=function(e,t,n,r){var i=e.notifications.filter((function(e){return e.aboutDocId!==t.docId||e.user!==n.uid||e.value!==r})),a=v(v({},e),{},{notifications:i});TT.collection("tweets_".concat(e.creatorId)).doc("".concat(e.docId)).set(a)},BT=function(e,t,n,r,i){var a=e.notifications.filter((function(e){return e.docId!==t.docId||e.aboutDocId!==n.docId||e.user!==r.uid||e.value!==i}));TT.collection("users").doc("".concat(e.uid)).set({notifications:a},{merge:!0})},VT=function(e,t,n,r,i,a,o,s){var u;if(t.creatorId===r.uid)u=t.docId,s.forEach((function(t){if(t.docId===u){var n=s.indexOf(t);s[n]=v(v({},t),{},{notifications:t.notifications.filter((function(t){return t.user!==r.uid||t.value!==e}))}),o({type:"EDIT",myTweets:s,uid:r.uid,docId:s[n].docId,tweet:s[n]})}}));else{var c="tweet"===t.value&&t.notifications.filter((function(t){return t.user===r.uid&&t.value===e}))[0].aboutDocId,l="tweet"===t.value?s.filter((function(e){return c===e.docId}))[0]:s.filter((function(e){return null!==e.about})).filter((function(e){return e.about.creatorId===t.creatorId&&e.about.docId===t.docId}))[0];o({type:"DELETE",uid:r.uid,docId:l.docId,attachmentUrl:""}),FT(t,l,r,e),BT(i,t,l,r,e)}if("rt"===n.value||"heart"===n.value){var f=s.filter((function(e){return e.about.creatorId===n.creatorId&&e.about.docId===n.docId}))[0];FT(n,f,r,e),BT(a,n,f,r,e)}},zT=function(e,t,n){var r=e.pathname,i=e.state,a=r.indexOf(t),o=r.slice(0,a);""===o?e.pathname.includes("/twitter/")?n("/twitter/home"):n("/home"):null!==i&&void 0!==i.userUid?n(o,{state:{previous:e.pathname,userUid:e.state.userUid,userId:e.state.userId,value:"userProfile"}}):n(o)},qT=n(184),HT=(0,t.createContext)(null),WT=function(e){var n={input:{photoUrl:"",headerUrl:"",userName:"",introduce:""},myProfile:{userId:"",userName:"",photoUrl:"",headerUrl:"",introduce:"",following:[],follower:[],notifications:[{docId:"",user:""}]}},r=(0,t.useReducer)((function(e,t){switch(t.type){case"GET_MY_PROFILE":case"EDIT_PROFILE":return v(v({},e),{},{myProfile:t.myProfile});case"CHANGE_PROFILE":return v(v({},e),{},{input:v(v({},e.input),{},d({},t.name,t.value))});case"CLEAR_INPUT":return v(v({},e),{},{input:n.input});case"CLEAR_MY_PROFILE":return{state:n};case"FOLLOWING":var r={user:e.myProfile.uid,docId:null,value:"following",aboutDocId:""};return LT(r,t.id,t.userNotifications),OT(e.myProfile.uid).set({following:t.following},{merge:!0}),OT(t.id).set({follower:t.userFollower},{merge:!0}),v(v({},e),{},{myProfile:v(v({},e.myProfile),{},{following:t.following})});case"UNFOLLOWING":return OT(t.id).set({follower:t.userFollower,notifications:t.userNotifications},{merge:!0}),OT(e.myProfile.uid).set({following:t.following},{merge:!0}),v(v({},e),{},{myProfile:v(v({},e.myProfile),{},{following:t.following})})}}),n),i=l(r,2),a=i[0],o=i[1];return(0,qT.jsx)(HT.Provider,{value:{myProfile:a.myProfile,profileInput:a.input,profileDispatch:o},children:e.children})},KT=(0,t.createContext)(null),GT=function(e){var n={input:{text:"",attachmentUrl:""},uid:"",myTweets:[],allTweets:[]},r=(0,t.useReducer)((function(e,t){switch(t.type){case"GET_TWEETS":return v(v({},e),{},{uid:t.uid,myTweets:t.myTweets});case"UPDATE_ALL_TWEETS":return v(v({},e),{},{allTweets:t.allTweets});case"WRITE":return v(v({},e),{},{input:v(v({},e.input),{},d({},t.name,t.value))});case"CREATE":var r=[t.tweet].concat(e.myTweets),i=[t.tweet].concat(e.allTweets);return TT.collection("tweets_".concat(t.uid)).doc("".concat(t.docId)).set(t.tweet),v(v({},e),{},{myTweets:r,allTweets:i});case"EDIT":return TT.collection("tweets_".concat(t.uid)).doc("".concat(t.docId)).set(t.tweet),v(v({},e),{},{myTweets:t.myTweets});case"DELETE":return TT.doc("tweets_".concat(t.uid,"/").concat(t.docId)).delete(),""!==t.attachmentUrl&&ST.refFromURL(t.attachmentUrl).delete(),v(v({},e),{},{myTweets:e.myTweets.filter((function(e){return e.docId!==t.docId})),allTweets:e.allTweets.filter((function(e){return e.docId!==t.docId}))});case"CLEAR_INPUT":return v(v({},e),{},{input:n.input});case"CLEAR_TWEETS":return{state:n}}}),n),i=l(r,2),a=i[0],o=i[1];return(0,qT.jsx)(KT.Provider,{value:{tweetInput:a.input,myTweets:a.myTweets,allTweets:a.allTweets,tweetDispatch:o},children:e.children})},QT=n(234),JT=n.n(QT),YT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XT=t.createContext&&t.createContext(YT),$T=function(){return $T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$T.apply(this,arguments)},ZT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function eS(e){return e&&e.map((function(e,n){return t.createElement(e.tag,$T({key:n},e.attr),eS(e.child))}))}function tS(e){return function(n){return t.createElement(nS,$T({attr:$T({},e.attr)},n),eS(e.child))}}function nS(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,s=ZT(e,["attr","size","title"]),u=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",$T({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,s,{className:r,style:$T($T({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==XT?t.createElement(XT.Consumer,null,(function(e){return n(e)})):n(YT)}function rS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"}}]})(e)}function iS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(e)}function aS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"}}]})(e)}function oS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"}}]})(e)}function sS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"}}]})(e)}var uS=function(){var e,n,r=L(),i=j(),o=(0,t.useContext)(KT).tweetDispatch,s=(0,t.useContext)(HT).profileDispatch,u=l((0,t.useState)({unit:"%"}),2),c=u[0],f=u[1],d=l((0,t.useState)(""),2),p=d[0],v=d[1],m=l((0,t.useState)(""),2),y=m[0],g=m[1],k=(0,t.useRef)(),w=document.getElementById("cropper_savBtn"),b=(0,t.useRef)(null),x=(0,t.useRef)(null),_=l((0,t.useState)(c),2),I=_[0],E=_[1],T=l((0,t.useState)(null),2),S=T[0],C=T[1],A=l((0,t.useState)(""),2),N=A[0],R=A[1],O=function(){var e=r.pathname,t=r.state.value,n=e.indexOf("/crop"),a=e.slice(0,n);i("".concat(a),{state:{what:y,value:t,previous:e.includes("tweet")?r.state.pre_previous:r.state.previous}})},P=function(e,t){var n=x.current,r=window.devicePixelRatio,i=e.naturalWidth/e.width,a=e.naturalHeight/e.height,o=n.getContext("2d");return n.width=t.width*r*i,n.height=t.height*r*a,o.setTransform(r,0,0,r,0,0),o.imageSmoothingQuality="high",o.drawImage(e,t.x*i,t.y*a,t.width*i,t.height*a,0,0,t.width*i,t.height*a),n.toDataURL("image/jpeg",1)},D=function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(b&&t.width&&t.height)){e.next=5;break}return e.next=3,P(b.current,t);case 3:n=e.sent,R(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(null!==r.state){var e=r.state;switch(v(e.src),g(e.what),e.what){case"attachment":k.current.classList.remove("factory"),f({aspect:16/9});break;case"photo":k.current.classList.add("factory"),f({aspect:1,disabled:!0});break;case"header":k.current.classList.add("factory"),f({unit:"px",width:440,aspect:4,disabled:!0})}}}),[r.pathname]),(0,qT.jsx)("div",{id:"cropper",className:"cropper",ref:k,children:(0,qT.jsxs)("div",{id:"cropper_inner",children:[(0,qT.jsxs)("div",{id:"cropper_header",children:[(0,qT.jsx)("button",{onClick:O,children:(0,qT.jsx)(rS,{})}),(0,qT.jsx)("div",{children:"\ubbf8\ub514\uc5b4 \uc218\uc815"}),(0,qT.jsx)("button",{id:"cropper_savBtn",disabled:!(null!==S&&void 0!==S&&S.width)||!(null!==S&&void 0!==S&&S.height),onClick:function(e){switch(e.preventDefault(),y){case"header":s({type:"CHANGE_PROFILE",name:"headerUrl",value:N});break;case"photo":s({type:"CHANGE_PROFILE",name:"photoUrl",value:N});break;case"attachment":o({type:"WRITE",name:"attachmentUrl",value:N})}O()},children:"\uc800\uc7a5"})]}),(0,qT.jsxs)("div",{id:"cropper_crop",children:[(0,qT.jsx)(JT(),{src:p,crop:I,ruleOfThirds:!0,onImageLoaded:function(e){return b.current=e,!1},onComplete:function(e){C(e),D(e),w.style.display=""!==N?"block":"none"},onChange:function(e){E(e)}}),(0,qT.jsx)("canvas",{ref:x,style:{width:Math.round(null!==(e=null===S||void 0===S?void 0:S.width)&&void 0!==e?e:0),height:Math.round(null!==(n=null===S||void 0===S?void 0:S.height)&&void 0!==n?n:0),display:"none"}})]})]})})},cS=t.memo(uS);function lS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M15.3 5.55a2.9 2.9 0 0 0-2.9 2.847l-.028 1.575a.6.6 0 0 1-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6 0 0 1 .034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348 0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9 0 0 1 8.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331 0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z"}}]}]})(e)}function fS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"}}]}]})(e)}var hS=function(e){var n=e.newAcount,r=e.setPopup,i=l((0,t.useState)(""),2),o=i[0],s=i[1],u=l((0,t.useState)(""),2),c=u[0],f=u[1],d=l((0,t.useState)(""),2),p=d[0],v=d[1],m=j(),y=L(),g=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?s(r):f(r)},k=function(){var e=a(h().mark((function e(t){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!n){e.next=7;break}return e.next=5,ET.createUserWithEmailAndPassword(o,c);case 5:e.next=9;break;case 7:return e.next=9,ET.signInWithEmailAndPassword(o,c);case 9:r(!1),y.pathname.includes("/twitter/")?m("/twitter/home"):m("/home"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),i=e.t0.message.indexOf("Firebase:"),a=e.t0.message.indexOf("("),v(e.t0.message.substring(i+10,a));case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,qT.jsxs)("section",{id:"authForm",children:[(0,qT.jsx)("button",{onClick:function(){r(!1)},children:(0,qT.jsx)(rS,{})}),(0,qT.jsxs)("form",{onSubmit:k,children:[(0,qT.jsx)("label",{for:"email",children:"Email "}),(0,qT.jsx)("input",{id:"email",name:"email",type:"text",placeholder:"Email@***.***",onChange:g}),(0,qT.jsx)("label",{for:"password",children:"Password"}),(0,qT.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"Password",onChange:g}),(0,qT.jsx)("input",{type:"submit",value:n?"Sign up ":"Log In",className:"btn"}),""!==p&&(0,qT.jsxs)("div",{id:"authError",children:[(0,qT.jsx)(fS,{}),p]})]})]})},dS=n(756),pS=n(561),vS=function(){var e=l((0,t.useState)(),2),n=e[0],r=e[1],i=l((0,t.useState)(!1),2),o=i[0],s=i[1],u=function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(n=new IT.auth.GoogleAuthProvider),e.next=4,ET.signInWithPopup(n);case 4:r=e.sent,console.log("popup //",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,qT.jsxs)("section",{id:"auth",children:[(0,qT.jsxs)("div",{id:"auth_left",children:[(0,qT.jsx)("img",{class:"auth_img small",src:dS,alt:"nwitter img"}),(0,qT.jsx)("img",{class:"auth_img width",src:pS,alt:"nwitter img"})]}),o?(0,qT.jsx)(hS,{newAcount:n,setPopup:s}):(0,qT.jsxs)("div",{id:"auth_main",children:[(0,qT.jsxs)("div",{id:"createAccount",children:[(0,qT.jsxs)("div",{children:["Sign up for Twitter today.",(0,qT.jsx)(lS,{})]}),(0,qT.jsx)("button",{onClick:function(){s(!0),r(!0)},children:"Subscribe to your email address"}),(0,qT.jsx)("button",{name:"google",onClick:u,children:"Continue with Goggle"})]}),(0,qT.jsxs)("div",{id:"logIn",children:[(0,qT.jsx)("div",{children:"Did you already sign up for NWITTER?"}),(0,qT.jsx)("button",{onClick:function(){s(!0),r(!1)},children:"Log In"})]})]})]})},mS=function(){var e=a(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.userId,localStorage.setItem("user",JSON.stringify(n)),t("".concat(i),{state:{previous:r.pathname,value:"userProfile"}});case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yS=function(e){var t=e.profile,n=j(),r=L();return(0,qT.jsx)(qT.Fragment,{children:null!==t&&(0,qT.jsx)("div",{className:"userProfile",children:(0,qT.jsx)("button",{onClick:function(){return mS(n,t,r)},children:(0,qT.jsx)("img",{className:"profile_photo",src:t.photoUrl,alt:"profile"})})})})};function gS(e){return tS({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]})(e)}function kS(e){return tS({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M923 283.6a260.04 260.04 0 0 0-56.9-82.8 264.4 264.4 0 0 0-84-55.5A265.34 265.34 0 0 0 679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 0 0-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]})(e)}function wS(e){return tS({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]})(e)}function bS(e){return tS({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M136 552h63.6c4.4 0 8-3.6 8-8V288.7h528.6v72.6c0 1.9.6 3.7 1.8 5.2a8.3 8.3 0 0 0 11.7 1.4L893 255.4c4.3-5 3.6-10.3 0-13.2L749.7 129.8a8.22 8.22 0 0 0-5.2-1.8c-4.6 0-8.4 3.8-8.4 8.4V209H199.7c-39.5 0-71.7 32.2-71.7 71.8V544c0 4.4 3.6 8 8 8zm752-80h-63.6c-4.4 0-8 3.6-8 8v255.3H287.8v-72.6c0-1.9-.6-3.7-1.8-5.2a8.3 8.3 0 0 0-11.7-1.4L131 768.6c-4.3 5-3.6 10.3 0 13.2l143.3 112.4c1.5 1.2 3.3 1.8 5.2 1.8 4.6 0 8.4-3.8 8.4-8.4V815h536.6c39.5 0 71.7-32.2 71.7-71.8V480c-.2-4.4-3.8-8-8.2-8z"}}]})(e)}function xS(e){return tS({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]})(e)}function _S(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function IS(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}var ES=function(e){var n=e.userobj,r=e.original,i=e.tweetObj,a=e.profile,o=e.ownerProfile,s=l((0,t.useState)("fun heartBtn"),2),u=s[0],c=s[1],f=(0,t.useContext)(KT),h=f.tweetDispatch,d=f.myTweets,p=(0,t.useRef)();(0,t.useEffect)((function(){var e=i.notifications;void 0!==e[0]&&(e.map((function(e){return e.user===n.uid&&"heart"===e.value})).includes(!0)&&c("heartBtn on"))}),[i]);return(0,qT.jsx)("button",{className:u,name:u,ref:p,onClick:function(e){p.current.classList.contains("on")?function(e,t){e.preventDefault(),VT("heart",i,r,n,a,o,h,d),t.classList.remove("on")}(e,p.current):function(e,t){e.preventDefault(),UT(i,r,n,a,o,h,"heart",d),t.classList.add("on")}(e,p.current)},children:(0,qT.jsx)(kS,{})})};function TS(e){return tS({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"}}]})(e)}function SS(e){return tS({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"}}]})(e)}function CS(e){return tS({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}}]})(e)}function AS(e){return tS({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"}}]})(e)}var NS=function(e){var n=e.userobj,r=e.tweetObj,i=e.original,o=e.profile,s=e.ownerProfile,u=j(),c=L(),f=(0,t.useRef)(),d=l((0,t.useState)(!1),2),p=d[0],v=d[1],m=l((0,t.useState)("fun rt rtBtn"),2),y=m[0],g=m[1],k=(0,t.useContext)(KT),w=k.tweetDispatch,b=k.myTweets,x=document.getElementById("inner");null!==x&&x.addEventListener("click",(function(e){var t=e.target,n=t.parentNode;t.classList.contains("rt")&&n.classList.contains("rt")||t.addEventListener("click",v(!1))}));var _=function(){var e=a(h().mark((function e(){var t,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){f.current.classList.add("on"),UT(r,i,n,o,s,w,"rt",b)},a=function(){f.current.classList.remove("on"),VT("rt",r,i,n,o,s,w,b)},f.current.classList.contains("on")?a():t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){var e=r.notifications;void 0!==e[0]&&(e.map((function(e){return e.user===n.uid&&("rt"===e.value||"qt"===e.value)})).includes(!0)&&g("fun rt rtBtn on"))}),[]),(0,qT.jsxs)("div",{className:"rt fun",children:[(0,qT.jsx)("button",{className:y,name:"rt",ref:f,onClick:function(){return v(!0)},children:(0,qT.jsx)(bS,{})}),p&&(0,qT.jsxs)("div",{className:"rt rt_popup fun",children:[(0,qT.jsxs)("button",{className:"rt fun",onClick:_,children:[(0,qT.jsx)(bS,{}),"\xa0",y.includes("on")?"UndoRetweet":"Retweet"]}),(0,qT.jsxs)("button",{className:"rt fun",onClick:function(){localStorage.setItem("tweet",JSON.stringify({tweetObj:r,profile:{id:o.uid,notifications:o.notifications},isOwner:!1})),u("tweet",{state:{previous:c.pathname,value:"qt"}})},children:[(0,qT.jsx)(CS,{}),"\xa0 Quote tweet"]})]})]})},RS=function(){return(0,qT.jsx)("div",{class:"container",children:(0,qT.jsx)("div",{class:"loader",children:(0,qT.jsx)("span",{})})})},OS=function(e){var n=e.tweet,r=e.profile,i=e.IsAnswer,a=e.is_owner,o=e.onDeleteClick,s=new Date,u=s.getFullYear(),c=s.getDate(),f=s.getMonth()+1,h=l((0,t.useState)(""),2),d=h[0],p=h[1],v=(0,t.useRef)(),m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","sep","Oct","Nov","Dec"];if((0,t.useEffect)((function(){""!==d&&n.createdAt[0]===u&&n.createdAt[1]===f&&n.createdAt[2]===c?p("".concat(n.createdAt[3],"h")):p("".concat(m[n.createdAt[1]]," ").concat(n.createdAt[2],",").concat(n.createdAt[0]))}),[n]),null!==v){var y=v.current;void 0!==y&&(y.innerHTML=n.text)}return(0,qT.jsxs)("div",{className:" tweet_form",children:[(0,qT.jsxs)("div",{className:"tweetSide",children:[(0,qT.jsx)(yS,{profile:r}),i&&(0,qT.jsx)("div",{className:"answerLine"})]}),(0,qT.jsxs)("div",{className:"tweet_content",children:[(0,qT.jsxs)("div",{className:"tweet_header",children:[(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{children:r.userName}),(0,qT.jsxs)("span",{children:["@",r.userId]}),(0,qT.jsx)("span",{className:"tweet_time",children:d})]}),a&&(0,qT.jsx)("button",{className:"fun",onClick:o,name:n.docId,children:(0,qT.jsx)(iS,{})})]}),(0,qT.jsx)("div",{className:"text",ref:v,children:n.text}),""!==n.attachmentUrl&&(0,qT.jsx)("div",{className:"attachment",children:(0,qT.jsx)("img",{src:n.attachmentUrl,alt:"tweet_attachment"})})]})]})},PS=function e(n){var r=n.key,i=n.tweetObj,o=n.userobj,s=n.answer,u=j(),c=L(),f=l((0,t.useState)(i),2),d=f[0],p=f[1],m=l((0,t.useState)(s),2),y=m[0],g=m[1],k=(0,t.useContext)(HT).myProfile,w=(0,t.useContext)(KT).tweetDispatch,b=l((0,t.useState)(CT),2),x=b[0],_=b[1],I=l((0,t.useState)(CT),2),E=I[0],T=I[1],S=l((0,t.useState)(AT),2),C=S[0],A=S[1],N=l((0,t.useState)([{tweet:AT,profile:CT}]),2),R=N[0],O=N[1],P=l((0,t.useState)(!1),2),D=P[0],M=P[1],U=l((0,t.useState)("tweet"),2),F=U[0],B=U[1],V=(0,t.useRef)(),z=void 0!==d&&void 0!==d.notifications&&void 0!==d.notifications[0]?d.notifications.filter((function(e){return e.user===o.uid&&("heart"===e.value||"rt"===e.value)}))[0]:void 0,q=l((0,t.useState)(!1),2),H=q[0],W=q[1],K=function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notifications.filter((function(e){return"answer"===e.value})),e.next=3,Promise.all(n.map(function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OT(t.user).get().then((function(e){return e.data()}));case 2:return n=e.sent,e.next=5,NT(t.user,t.aboutDocId).then((function(e){return e.data()}));case 5:return r=e.sent,e.abrupt("return",{tweet:r,profile:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return e}));case 3:r=e.sent,O(r),M(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){if(c.pathname.includes("status")&&localStorage.getItem("status")){var e=JSON.parse(localStorage.getItem("status"));p(e.tweetObj),g(e.answer),T(e.ownerProfile)}}),[c]),(0,t.useEffect)((function(){void 0!==d&&("answer"===d.value?K(C):K(d))}),[d]),(0,t.useEffect)((function(){var e,t,n;"tweet answer"!==F&&void 0!==d&&"answer"===d.value&&B("tweet answer"),void 0!==d&&""!==k.userName&&(""===E.userId&&!c.pathname.includes("status")&&PT(d.creatorId,T),void 0!==d&&""===x.userId&&null!==d.about&&(PT(d.about.creatorId,_),e=d.about.creatorId,t=d.about.docId,n=A,NT(e,t).then((function(e){e.exists?n(v({},e.data())):(n(AT),console.log("Can't find the tweet"))})).catch((function(e){return console.log(e)}))))}),[d,k,x]),(0,t.useEffect)((function(){void 0!==d&&d.about,""!==E.photoUrl?W(!1):W(!0)}),[d,E,x,C]);var G=function(e){var n=e.what,i=e.IsAnswer,a=e.profile,s=new Date,f=s.getFullYear(),h=s.getDate(),p=s.getMonth()+1,v=l((0,t.useState)(""),2),m=v[0],y=v[1],g=l((0,t.useState)(""),2),k=g[0],b=g[1],_=(0,t.useRef)(),I=void 0!==n?{id:n.id,docId:n.docId,text:n.text,attachmentUrl:n.attachmentUrl,createdAt:n.createdAt,creatorId:n.creatorId,value:n.value,notifications:n.notifications,about:n.about}:AT,T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","sep","Oct","Nov","Dec"];if((0,t.useEffect)((function(){""!==m&&I.createdAt[0]===f&&I.createdAt[1]===p&&I.createdAt[2]===h?y("".concat(I.createdAt[3],"h")):y("".concat(T[I.createdAt[1]]," ").concat(I.createdAt[2],",").concat(I.createdAt[0]))}),[I]),(0,t.useEffect)((function(){""!==k&&""!==C.docId&&C.createdAt[0]===f&&C.createdAt[1]===p&&C.createdAt[2]===h?b("".concat(C.createdAt[3],"h")):b("".concat(T[C.createdAt[1]]," ").concat(C.createdAt[2],",").concat(C.createdAt[0]))}),[C]),null!==_){var S=_.current;void 0!==S&&(S.innerHTML=I.text)}return(0,qT.jsx)(qT.Fragment,{children:""==I.docId?(0,qT.jsx)("div",{className:"noTweet",children:"Tweet does not exist."}):(0,qT.jsx)("div",{className:c.pathname.includes("status")&&"statusBtn",children:(0,qT.jsxs)("div",{className:"tweetBox",id:r,ref:V,onClick:function(e){var t=e.target,n=I.creatorId===E.uid,r=!t.classList.contains("fun"),i=!t.parentNode.classList.contains("fun"),o="".concat(a.userId,"/status/").concat(I.docId),s=JSON.stringify({tweetObj:I,answer:!1,ownerProfile:a,value:"status",userId:n?E.userId:x.userId,docId:I.docId});localStorage.setItem("status",s),r&&i&&u("".concat(o),{state:{previous:c.pathname,value:"status"}})},children:[(0,qT.jsx)(OS,{tweet:I,profile:a,IsAnswer:i,is_owner:I.creatorId===o.uid,onDeleteClick:function(e){e.preventDefault();window.confirm("Are you sure you want to delete this tweet?");switch(w({type:"DELETE",uid:o.uid,docId:I.docId,attachmentUrl:I.attachmentUrl}),ST.ref().child("".concat(o.uid,"/").concat(I.docId)).delete(),I.value){case"qt":FT(C,I,o,d.value),BT(x,C,I,o,d.value);break;case"answer":FT(d,I,o,d.value),BT(E,d,I,o,I.value)}}}),(0,qT.jsxs)("div",{className:"tweet_other",children:["qt"===I.value&&!c.pathname.includes("tweet")&&(0,qT.jsx)("div",{className:"tweet qt",children:(0,qT.jsxs)("div",{className:"tweet_content",children:[(0,qT.jsxs)("div",{className:"tweet_header",children:[(0,qT.jsx)(yS,{profile:x}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{children:x.userName}),(0,qT.jsxs)("span",{children:["@",x.userId]}),(0,qT.jsx)("span",{className:"qn_time",children:k})]})]}),(0,qT.jsx)("div",{className:"text",children:C.text.replaceAll("<br/>","\r\n")}),""!==C.attachmentUrl&&(0,qT.jsx)("div",{className:"attachment",children:(0,qT.jsx)("img",{src:C.attachmentUrl,alt:"tweet_attachment"})})]})}),!c.pathname.includes("tweet")&&(0,qT.jsxs)("div",{className:"tweet_fun fun",children:[(0,qT.jsx)("button",{className:"fun answer",onClick:function(){localStorage.setItem("tweet",JSON.stringify({tweetObj:I,profile:a,isOwner:!1})),u("tweet",{state:{previous:c.pathname,value:"answer"}})},children:(0,qT.jsx)(IS,{})}),void 0!==a&&void 0!==n&&(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(NS,{tweetObj:n,original:d,userobj:o,profile:a,ownerProfile:E}),(0,qT.jsx)(ES,{tweetObj:n,original:d,userobj:o,profile:a,ownerProfile:E})]})]}),i&&!D&&""!==x.userId&&(0,qT.jsxs)("div",{className:"answer_who",children:["@",x.userId,"\uc5d0 \ub300\ud55c \ub2f5\uae00"]})]})]})})})};return(0,qT.jsx)("div",{children:H||void 0===d?(0,qT.jsx)(RS,{}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsxs)("div",{className:F,id:void 0!==c.pathname&&c.pathname.includes("status")&&"status",children:[c.pathname.includes("status")&&(0,qT.jsxs)("div",{id:"status_header",children:[(0,qT.jsx)("button",{className:"back",onClick:function(){localStorage.removeItem("status"),c.pathname.includes("tweet")&&zT(c,"/tweet",u),c.pathname.includes("status")&&zT(c,"/".concat(E.userId,"/status"),u)},children:(0,qT.jsx)(_S,{})}),(0,qT.jsx)("div",{children:"tweet"})]}),(0,qT.jsxs)("div",{className:"value",children:["rt"===d.value&&void 0===z&&(0,qT.jsxs)("div",{className:"value_explain",children:[(0,qT.jsx)(bS,{}),E.uid===o.uid?"I":"".concat(E.userName)," Retweeted"]}),"heart"===d.value&&void 0===z&&(0,qT.jsxs)("div",{className:"value_explain",children:[(0,qT.jsx)(kS,{}),E.uid===o.uid?"I":"".concat(E.userName)," liked"]}),("rt"===d.value&&void 0!==z||"heart"===d.value&&void 0!==d.notifications.filter((function(e){return e.user===o.uid&&"rt"===e.value}))[0])&&(0,qT.jsxs)("div",{className:"value_explain",children:[(0,qT.jsx)(bS,{}),(0,qT.jsx)(kS,{}),E.uid===o.uid?"I":"".concat(E.userName)," ReTweeted and liked"]}),"answer"===d.value&&(""===C.docId?c.pathname.includes("status")&&(0,qT.jsx)("div",{className:"noTweet",children:"Tweet does not exist."}):(0,qT.jsx)(G,{what:C,IsAnswer:!0,profile:x}))]}),("qt"===d.value||"tweet"===d.value)&&(0,qT.jsx)(G,{what:d,IsAnswer:y,profile:E}),("rt"===d.value||"heart"===d.value)&&(null!==C.about&&"qt"===C.value?(0,qT.jsx)(e,{tweetObj:C,userobj:o,isOwner:C.creatorId===o.uid,answer:!1},C.docId):(0,qT.jsx)(G,{what:C,IsAnswer:!1,profile:x})),"answer"===d.value&&(0,qT.jsx)(G,{what:d,IsAnswer:!1,profile:E})]}),c.pathname.includes("status")&&D&&(0,qT.jsx)("div",{class:"tweet statusAnswers",children:R.map((function(e){return(0,qT.jsx)(G,{what:e.tweet,IsAnswer:!1,profile:e.profile})}))})]})})},DS=t.memo(PS),LS=function(e){var n=e.userobj,r=(0,t.useContext)(KT).allTweets;return(0,qT.jsx)("section",{className:"tweets",children:(0,qT.jsx)("div",{className:"tweets_tweet",children:void 0!==r&&void 0!==r[0]?r.map((function(e){return(0,qT.jsx)(DS,{tweetObj:e,userobj:n,isOwner:e.creatorId===n.uid,answer:!1},"tweet'_".concat(e.docId))})):(0,qT.jsxs)("div",{class:"notweet",children:["There's no tweet",(0,qT.jsx)("br",{}),"Write new tweet"]})})})},jS=t.memo(LS);function MS(){return MS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MS.apply(this,arguments)}function US(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var FS=["onClick","reloadDocument","replace","state","target","to"];function BS(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=s.state||{};return[t.idx,k({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"===typeof e?e:_(e)}function r(e,t){return void 0===t&&(t=null),k(m({pathname:f.pathname,hash:"",search:""},"string"===typeof e?I(e):e,{state:t,key:x()}))}function i(e){c=e,e=t(),l=e[0],f=e[1],h.call({action:c,location:f})}function a(e){s.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,s=o.history,u=null;o.addEventListener("popstate",(function(){if(u)d.call(u),u=null;else{var e=y.Pop,n=t(),r=n[0];if(n=n[1],d.length){if(null!=r){var o=l-r;o&&(u={action:e,location:n,retry:function(){a(-1*o)}},a(o))}}else i(e)}}));var c=y.Pop,l=(e=t())[0],f=e[1],h=b(),d=b();return null==l&&(l=0,s.replaceState(m({},s.state,{idx:l}),"")),{get action(){return c},get location(){return f},createHref:n,push:function e(t,a){var u=y.Push,c=r(t,a);if(!d.length||(d.call({action:u,location:c,retry:function(){e(t,a)}}),0)){var f=[{usr:c.state,key:c.key,idx:l+1},n(c)];c=f[0],f=f[1];try{s.pushState(c,"",f)}catch(Sd){o.location.assign(f)}i(u)}},replace:function e(t,a){var o=y.Replace,u=r(t,a);d.length&&(d.call({action:o,location:u,retry:function(){e(t,a)}}),1)||(u=[{usr:u.state,key:u.key,idx:l},n(u)],s.replaceState(u[0],"",u[1]),i(o))},go:a,back:function(){a(-1)},forward:function(){a(1)},listen:function(e){return h.push(e)},block:function(e){var t=d.push(e);return 1===d.length&&o.addEventListener("beforeunload",w),function(){t(),d.length||o.removeEventListener("beforeunload",w)}}}}({window:i}));var o=a.current,s=l((0,t.useState)({action:o.action,location:o.location}),2),u=s[0],c=s[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(R,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var VS=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=US(e,FS),f=P(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=j(),u=L(),c=U(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||_(u)===_(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,t.createElement)("a",MS({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:u}))}));function zS(e){return tS({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z",clipRule:"evenodd"}}]})(e)}function qS(e){return tS({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}}]})(e)}var HS=function(e){var n=e.userobj,r=e.setPopup,i=l((0,t.useState)("tweetFactory"),2),o=i[0],s=i[1],u=L(),c=u.state,f=j(),d=(0,t.useContext)(KT),p=d.tweetInput,v=d.tweetDispatch,m=d.myTweets,y=(0,t.useContext)(HT).myProfile,g=l((0,t.useState)(""),2),k=g[0],w=g[1],b=l((0,t.useState)({tweetObj:AT,profile:CT,isOwner:!1}),2),x=b[0],_=b[1],I=new Date,E=I.getFullYear(),T=I.getMonth()+1,S=I.getDate(),C=I.getHours(),A=I.getMinutes(),N=function(){v({type:"CLEAR_INPUT"}),localStorage.removeItem("tweet");var e=u.pathname,t=e.indexOf("/tweet"),n=e.slice(0,t);u.pathname.includes("tweet")&&f(n,{state:{previous:u.pathname.includes("list")?c.pre_previous:u.pathname,pre_previous:c.pre_previous,previousState:u.pathname.includes("list")?c.previousState:null,value:u.pathname.includes("status")?"status":null}})},R=function(){var e=a(h().mark((function e(t){var i,o,s,u,l,f,d,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i=JSON.stringify(Date.now()),o="",""===k||void 0===p){e.next=11;break}return s=ST.ref().child("".concat(n.uid,"/").concat(i)),e.next=7,s.putString(k,"data_url");case 7:return u=e.sent,e.next=10,u.ref.getDownloadURL();case 10:o=e.sent;case 11:l={value:""===x.profile.uid?"tweet":c.value,text:p.text.replace(/(\r\n|\n)/g,"<br/>"),attachmentUrl:o,creatorId:n.uid,docId:i,createdAt:[E,T,S,C,A],about:""===x.profile.uid?null:{creatorId:x.tweetObj.creatorId,docId:x.tweetObj.docId},notifications:[]},v({type:"CREATE",docId:i,uid:n.uid,tweet:l}),w(""),void 0!==r&&r(!1),void 0!==y.follower[0]&&y.follower.forEach(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OT(t).get().then(function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.exists?(r=t.data(),jT(c.value,n,"tweet"===c.value?"":x.docId,r,l.docId)):console.log("Can't find user's profile");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e,"in TweetFactory")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===c||void 0===c.value||"qt"!==c.value&&"answer"!==c.value||(f=x.profile,d=x.tweetObj,g=c.value,d.creatorId!==n.uid?(DT(d,f,g,n,i),jT(g,n,d,f,i)):MT(m,g,n,i,v,d.docId)),N();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(null!==c&&(void 0!==c.what&&"attachment"===c.what&&w(p.attachmentUrl),void 0!==c.value)){var e=c.value;"answer"!==e&&"qt"!==e&&"tweet"!==e||s("tweetFactory popup"),"answer"!==e&&"qt"!==e||_(JSON.parse(localStorage.getItem("tweet")))}}),[c]),(0,qT.jsx)("div",{className:o,children:(0,qT.jsxs)("div",{class:"tweetFactory_inner",children:["tweetFactory popup"===o&&(0,qT.jsxs)("div",{class:"tweetFactory_header",children:[(0,qT.jsx)("button",{onClick:N,children:null!==c&&("tweet"===c.value?(0,qT.jsx)(sS,{}):(0,qT.jsx)(rS,{}))}),(0,qT.jsx)("button",{onClick:R,id:"tweetBtn",children:"Tweet"})]}),null!==c&&"answer"===c.value&&(0,qT.jsx)("div",{id:"answerTweet",children:""!==x.profile.uid&&(0,qT.jsx)(OS,{tweet:x.tweetObj,is_owner:x.isOwner,profile:x.profile,IsAnswer:!0})}),(0,qT.jsxs)("div",{className:null!==c&&"answer"===c.value?"tweetFactory_box answer":"tweetFactory_box",children:[(0,qT.jsx)("div",{className:"userProfile",children:(0,qT.jsx)("img",{className:"profile_photo",src:n.photoURL,alt:"profile"})}),(0,qT.jsxs)("form",{onSubmit:R,children:[(0,qT.jsx)("textarea",{value:void 0!==p&&p.text,name:"text",onChange:function(e){var t=e.target,n=e.target,r=n.name,i=n.value;t.addEventListener("keyup",function(e){e.style.height="auto";var t=e.scrollHeight;e.style.height="".concat(t,"px")}(t)),v({type:"WRITE",name:r,value:i})},type:"text",placeholder:"What's happening?",maxLength:120}),""!==k&&(0,qT.jsxs)("div",{id:"tweetfactory_attachment",children:[(0,qT.jsx)("img",{src:k,alt:"tweet attachment"}),(0,qT.jsx)("button",{onClick:function(){w("")},children:"x"}),(0,qT.jsx)("button",{onClick:function(e){e.preventDefault(),f("crop",{state:{pre_previous:null!==c?c.previous:"",previous:u.pathname,what:"attachment",src:k,value:null!==c?c.value:null}})},children:"Edit"})]}),null!==c&&"qt"===c.value&&(0,qT.jsx)("div",{id:"tweetFactory_qn",children:""!==x.profile.uid&&(0,qT.jsx)(DS,{tweetObj:x.tweetObj,userobj:n,isOwner:x.isOwner,answer:!1})}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("label",{for:"tweet_fileBtn",children:(0,qT.jsx)(qS,{})}),(0,qT.jsx)("input",{type:"file",accept:"image/*",id:"tweet_fileBtn",style:{display:"none"},onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;w(t),v({type:"WRITE",name:"attachmentUrl",value:t})},n.readAsDataURL(t)}}),(0,qT.jsx)("input",{type:"submit",value:"tweet",className:"btn"})]})]})]})]})})},WS=t.memo(HS),KS=function(e){var n=e.userobj,r=l((0,t.useState)(!1),2),i=r[0],o=r[1],s=(0,t.useContext)(HT).myProfile,u=(0,t.useContext)(KT),c=u.tweetDispatch,f=u.allTweets,d=u.myTweets,p=l((0,t.useState)([]),2),m=p[0],y=p[1],g=l((0,t.useState)(!1),2),k=g[0],w=g[1],b=0,x=function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y([]),s.following.forEach(function(){var e=a(h().mark((function e(t){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0===b&&void 0!==d[0]&&(r=d.filter((function(e){return!1===e.notifications.map((function(e){return s.following.includes(e.user)})).includes(!0)})),i=r.filter((function(e){return null==e.about||"qt"===e.value||"answer"===e.value||!s.following.includes(e.about.creatorId)})),y(i),c({type:"UPDATE_ALL_TWEETS",allTweets:i})),e.next=4,RT(t);case 4:a=e.sent,b++,a.empty||a.docs.forEach((function(e){(void 0===e.data().notifications[0]||void 0!==e.data().notifications.filter((function(e){return e.user!==n.uid||"qt"!==e.value&&"answer"!==e.value}))[0])&&m.push(v({id:e.id},e.data()))})),b===s.following.length&&(w(!0),o=m.sort((function(e,t){return t.docId-e.docId})),y(o),c({type:"UPDATE_ALL_TWEETS",allTweets:o}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){void 0!==s&&void 0!==s.following[0]?!k&&x():c({type:"UPDATE_ALL_TWEETS",allTweets:d})}),[s,f]);var _=function(){return(0,qT.jsxs)("div",{id:"userInform",children:[(0,qT.jsxs)("div",{children:[(0,qT.jsx)("div",{children:"user intorm"}),(0,qT.jsx)("button",{onClick:function(){return o(!1)},children:"x"})]}),(0,qT.jsx)("div",{children:(0,qT.jsx)("img",{className:"profile_photo dark_target",src:n.photoURL,alt:"myProfile"})}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("div",{children:n.dispalyName}),(0,qT.jsx)("div",{children:n.userId})]}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("div",{children:(0,qT.jsxs)(VS,{to:{pathname:"/".concat(n.id)},children:[(0,qT.jsx)(oS,{}),(0,qT.jsx)("div",{className:"nav_label",children:" Profile "})]})}),(0,qT.jsx)("button",{children:" Log Out "})]})]})};return(0,qT.jsxs)("div",{id:"home",children:[(0,qT.jsxs)("div",{id:"smallMobile",children:[(0,qT.jsx)("button",{onClick:function(){return o(!0)},children:(0,qT.jsx)("img",{className:"profile_photo dark_target",src:n.photoURL,alt:"myProfile"})}),(0,qT.jsx)("div",{children:"Home"}),i&&(0,qT.jsx)(_,{})]}),(0,qT.jsx)(WS,{userobj:n}),(0,qT.jsx)(jS,{userobj:n})]})};function GS(e){return tS({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function QS(e){return tS({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}}]})(e)}var JS=function(){var e=a(h().mark((function e(t,n,r){var i,o,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ET.currentUser,void 0!==t.following[0]&&t.following.forEach(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OT(t).get().then((function(e){var n=e.data(),r=n.notifications.filter((function(e){return"following"!==e.value||e.user!==i.uid})),a=n.follower.filter((function(e){return e!==i.uid}));OT(t).set({notifications:r},{merge:!0}),OT(t).set({follower:a},{merge:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0!==t.follower[0]&&t.follower.forEach(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,OT(t).get().then((function(e){var n=e.data().following.filter((function(e){return e!==i.uid}));OT(t).set({following:n},{merge:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0!==(o=t.notifications.filter((function(e){return null!==e.docId})))[0]&&o.forEach(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:RT(t.user,t.aboutDocId).then((function(e){e.docs.forEach((function(e){return e.delete()}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),void 0!==(s=n.filter((function(e){return null!==e.about})))[0]&&s.forEach(function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.about.creatorId,e.next=3,NT(n,t.about.docId).then((function(e){var r=e.data(),a=r.notifications.filter((function(e){return e.user!==i.uid}));TT.collection("tweets_".concat(n)).doc("".concat(t.about.docId)).set(v({notifications:a},r))}));case 3:return e.next=5,OT(n).get().then(function(){var e=a(h().mark((function e(t){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data(),a=r.notifications.filter((function(e){return e.user!==i.uid})),e.next=4,OT(n).set(v({notifications:a},r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u=function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RT(i.uid).then((function(e){e.docs.forEach((function(e){var t=e.id;TT.collection("tweets_".concat(i.uid)).doc(t).delete()}))}));case 2:OT(i.uid).delete();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u(),ST.ref().child("".concat(i.uid)).delete(),i.delete().then((function(){console.log("delete user"),r(!1)})).catch((function(e){console.log(e),r(!0)}));case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),YS=JS,XS=function(e){var n=e.userobj,r=L(),i=j(),a=(0,t.useContext)(HT).myProfile,o=(0,t.useContext)(KT).myTweets,s=document.getElementById("inner"),u=l((0,t.useState)(!1),2),c=u[0],f=u[1],h=l((0,t.useState)(!1),2),d=h[0],p=h[1],v=l((0,t.useState)(CT),2),m=v[0],y=v[1];return c&&null!==s&&s.addEventListener("click",(function(e){!e.target.className.includes("account")&&f(!1)})),(0,t.useEffect)((function(){void 0!==a&&y(a)}),[a]),(0,qT.jsxs)(qT.Fragment,{children:[d&&(0,qT.jsxs)("div",{id:"deleteError",children:[(0,qT.jsx)("div",{children:"Please log out and try again."}),(0,qT.jsx)("button",{onClick:function(){p(!1)},children:"confirm"})]}),(0,qT.jsxs)("nav",{id:"nav",children:[(0,qT.jsxs)("div",{children:[(0,qT.jsx)(VS,{to:"/home",id:"nav_twitter",children:(0,qT.jsx)(AS,{})}),(0,qT.jsx)(VS,{to:"/home",children:"/home"==r.pathname?(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(gS,{}),(0,qT.jsx)("div",{className:"nav_label on",children:"Home"})]}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(wS,{}),(0,qT.jsx)("div",{className:"nav_label",children:"Home"})]})}),(0,qT.jsx)(VS,{to:"/notification",userobj:n,children:"/notification"===r.pathname?(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(TS,{}),(0,qT.jsx)("div",{className:"nav_label on",children:" Notifications "})]}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(SS,{}),(0,qT.jsx)("div",{className:"nav_label",children:" Notifications "})]})}),(0,qT.jsx)("button",{id:"nav_myProfile",onClick:function(){i("/".concat(n.id),{state:{value:"profile",previous:r.pathname}})},children:r.pathname=="/".concat(n.id)?(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(GS,{}),(0,qT.jsx)("div",{className:"nav_label on",children:"Profile"})]}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(QS,{}),(0,qT.jsx)("div",{className:"nav_label",children:"Profile"})]})})]}),(0,qT.jsx)("div",{children:(0,qT.jsxs)("button",{id:"nav_popUp",onClick:function(){var e="".concat(r.pathname,"/tweet");i("".concat(e),{state:{value:"tweet",pre_previous:null!==r.state?r.state.previous:"",previous:r.pathname,previousState:r.pathname.includes("list")?r.state.previousState:null}})},children:[(0,qT.jsx)(CS,{}),(0,qT.jsx)("div",{id:"do_tweet",children:"tweet"})]})}),(0,qT.jsxs)("div",{id:"nav_profile",children:[c&&(0,qT.jsxs)("div",{class:"account",id:"account",children:[(0,qT.jsxs)("div",{class:"account",id:"account_user",children:[(0,qT.jsx)("img",{className:"profile_photo dark_target acccount",src:m.photoUrl,alt:"myProfile"}),(0,qT.jsxs)("div",{className:"nav_label account",children:[(0,qT.jsx)("div",{class:"account",children:m.userName}),(0,qT.jsxs)("div",{class:"account",children:["@",m.userId]})]})]}),(0,qT.jsxs)("div",{class:"account",id:"account_btn",children:[(0,qT.jsxs)("button",{class:"account",id:"account_logOut",onClick:function(){return r.pathname.includes("/twitter")?i("/twitter/logout"):i("/logout")},children:["Log out @",m.userId]}),(0,qT.jsxs)("button",{class:"account",id:"account_logOut",onClick:function(){YS(m,o,p),f(!1)},children:["Delete @",m.userId]})]})]}),(0,qT.jsxs)("button",{onClick:function(){return f(!c)},children:[(0,qT.jsx)("img",{className:"profile_photo dark_target",src:m.photoUrl,alt:"myProfile"}),(0,qT.jsxs)("div",{className:"nav_label",children:[(0,qT.jsx)("div",{children:m.userName}),(0,qT.jsxs)("div",{children:["@",m.userId]})]})]})]})]})]})},$S=(0,t.createContext)(null),ZS=function(e){var n={userProfile:{userName:"",userId:"",hotoUrl:"",headerUrl:"",introduce:"",follower:[],following:[],notifications:[]},userTweets:[]},r=l((0,t.useReducer)((function(e,t){switch(t.type){case"GET_USER_DATA":return{userProfile:t.userProfile,userTweets:t.userTweets};case"CLEAR_USER":return{state:n}}}),n),2),i=r[0],a=r[1];return void 0!==i&&(0,qT.jsx)($S.Provider,{value:{userProfile:i.userProfile,userTweets:i.userTweets,userDispatch:a},children:e.children})},eC=function(e){var n=e.isMine,r=e.userobj,i=(0,t.useContext)(HT),a=i.myProfile,o=i.profileDispatch,s=(0,t.useContext)(KT).myTweets,u=(0,t.useContext)($S),c=u.userProfile,f=u.userTweets,h=L(),d=j(),p=l((0,t.useState)(n?a:c),2),m=p[0],y=p[1],g=n?s:f,k=function(e){d("".concat(h.pathname,"/list/").concat(e),{state:{previous:h.pathname,isMine:n}})},w=void 0!==a?a.following:[],b=l((0,t.useState)({following:!1,text:"Follow"}),2),x=b[0],_=b[1],I=document.getElementById("profile_followBtn");return(0,t.useEffect)((function(){void 0!==w[0]&&(w.includes(m.uid)?_({following:!0,text:"Following"}):_({following:!1,text:"Follow"})),null!==I&&(I.style.disable=void 0===c)}),[c]),(0,qT.jsx)(qT.Fragment,{children:""!==m.photoUrl?(0,qT.jsxs)("section",{id:"profileTopForm",children:[(0,qT.jsxs)("div",{id:"profileTopForm_header",children:[(0,qT.jsx)("button",{id:"profile_goHomeBtn",className:"back",onClick:function(){return zT(h,"/".concat(m.userId),d)},children:(0,qT.jsx)(_S,{})}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("div",{children:m.userName}),(0,qT.jsxs)("div",{children:[g.length," tweets"]})]})]}),(0,qT.jsxs)("div",{id:"profileForm_profile",children:[(0,qT.jsx)("img",{src:m.headerUrl,alt:"profileHeader"}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("img",{src:m.photoUrl,alt:"profile"}),(0,qT.jsxs)("div",{id:"profileForm_userInformation",children:[(0,qT.jsx)("div",{children:m.userName}),(0,qT.jsxs)("div",{children:["@",m.userId]}),(0,qT.jsx)("div",{children:m.introduce})]}),n?(0,qT.jsxs)("div",{id:"logOutAndEdit",children:[(0,qT.jsx)("button",{onClick:function(){d("/logout")},children:" Log Out "}),(0,qT.jsx)("button",{onClick:function(){d("editProfile",{state:{previous:h.pathname}}),document.getElementById("inner").style.zIndex="-1"},children:"Edit Profile"})]}):(0,qT.jsx)("button",{id:"profile_followBtn",onClick:function(e){e.preventDefault(),x.following?(o({type:"UNFOLLOWING",id:m.uid,userNotifications:m.notifications.filter((function(e){return"following"!==e.value||e.user!==r.uid||null!==e.docId})),userFollower:m.follower.filter((function(e){return e!==r.uid})),following:w.filter((function(e){return e!==m.uid}))}),_({following:!1,text:"Follow"}),y(v(v({},m),{},{follower:m.follower.filter((function(e){return e!==r.uid}))}))):(o({type:"FOLLOWING",id:m.uid,userNotifications:m.notifications,userFollower:m.follower.concat(r.uid),following:w.concat(m.uid)}),_({following:!0,text:"Following"}),y(v(v({},m),{},{follower:[r.uid].concat(m.follower)})))},children:x.text})]})]}),(0,qT.jsxs)("div",{className:"profile_follow",children:[(0,qT.jsx)("button",{onClick:function(){return k("following")},children:m.following&&(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{className:"number",children:void 0===m.following[0]?0:m.following.length}),"\xa0 Following"]})}),(0,qT.jsx)("button",{onClick:function(){return k("follower")},children:m.follower&&(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{className:"number",children:void 0===m.follower[0]?0:m.follower.length}),"\xa0 Followers"]})})]})]}):(0,qT.jsx)(RS,{})})},tC=function(e){var n=e.isMine,r=e.userobj,i=(0,t.useContext)(KT).myTweets,o=(0,t.useContext)($S).userTweets,s=n?i:o,u=s.filter((function(e){return"tweet"===e.value||"qt"===e.value||"rt"===e.value})),c=s.filter((function(e){return"heart"!==e.value})),f=s.filter((function(e){return"heart"===e.value})),d=s.filter((function(e){return""!==e.attachmentUrl})),p=l((0,t.useState)(!0),2),v=p[0],m=p[1],y=l((0,t.useState)([]),2),g=y[0],k=y[1],w=document.querySelectorAll("#pb_buttons button"),b=document.querySelectorAll(".value"),x=document.getElementById("pb_btn_tweet"),_=function(e){var t=e?e.target:x;w.forEach((function(e){return e.classList.remove("check")})),t&&t.classList.add("check")},I=function(e){k(u),_(e),b.forEach((function(e){return e.style.display="block"}))},E=function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RT(r.uid).then((function(e){m(!e.empty)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){void 0!==s[0]?I():E()}),[s]),(0,qT.jsxs)("section",{id:"profileBottomForm",children:[(0,qT.jsxs)("div",{id:"pb_buttons",children:[(0,qT.jsx)("button",{id:"pb_btn_tweet",onClick:I,children:"tweets"}),(0,qT.jsx)("button",{onClick:function(e){k(c),_(e),b.forEach((function(e){return e.style.display="block"}))},children:"tweets & replies"}),(0,qT.jsx)("button",{onClick:function(e){k(d),_(e),b.forEach((function(e){return e.style.display="block"}))},children:"Media"}),(0,qT.jsx)("button",{onClick:function(e){k(f),_(e),b.forEach((function(e){return e.style.display="none"}))},children:"Likes"})]}),(0,qT.jsx)("div",{id:"contents",children:void 0===s[0]?v?(0,qT.jsx)(RS,{}):(0,qT.jsxs)("div",{class:"notweet",children:["There's no tweet",(0,qT.jsx)("br",{}),"Write new tweet"]}):g.map((function(e){return(0,qT.jsx)(DS,{tweetObj:e,userobj:r,answer:!1},"tweets_".concat(e.docId))}))})]})},nC=function(e){var n=e.userobj,r=(0,t.useContext)(KT).myTweets,i=(0,t.useContext)(HT).myProfile;return(0,qT.jsx)(qT.Fragment,{children:""===r.uid||void 0===i?(0,qT.jsx)(RS,{}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)("section",{children:(0,qT.jsx)(eC,{isMine:!0,userobj:n})}),(0,qT.jsx)("section",{children:(0,qT.jsx)(tC,{isMine:!0,userobj:n})})]})})},rC=function(e){var n=e.userobj,r=(0,t.useContext)($S),i=r.userProfile,a=r.userTweets;return(0,qT.jsx)(qT.Fragment,{children:""===i.uid||void 0===a?(0,qT.jsx)(RS,{}):(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)("section",{children:(0,qT.jsx)(eC,{isMine:!1,userobj:n})}),(0,qT.jsx)("section",{children:(0,qT.jsx)(tC,{isMine:!1,userobj:n})})]})})};function iC(e){return tS({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}}]})(e)}var aC=function(e){var n=e.userobj,r=e.setIsMyProfile,i=j(),o=L(),s=(0,t.useContext)(HT),u=s.myProfile,c=s.profileInput,f=s.profileDispatch,d=u.userName,p=u.introduce,v=l((0,t.useState)(""==u.headerUrl?"https://firebasestorage.googleapis.com/v0/b/nwitter-c8556.appspot.com/o/basicHeader.png?alt=media&token=3fb9d8ee-95ba-4747-a64f-65c838247ca9":u.headerUrl),2),m=v[0],y=v[1],g=l((0,t.useState)(""==u.photoUrl?"https://firebasestorage.googleapis.com/v0/b/nwitter-c8556.appspot.com/o/icons8-user-64.png?alt=media&token=0e76967a-3740-4666-a169-35523d1e07cb":u.photoUrl),2),k=g[0],w=g[1],b=l((0,t.useState)(""),2),x=(b[0],b[1]),_=l((0,t.useState)(!1),2),I=_[0],E=_[1],T=function(){zT(o,"/edit",i),f({type:"CLEAR_INPUT"});var e=document.getElementById("inner");null!==e&&(e.style.zIndex="0")},S=(0,t.useCallback)((function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;f({type:"CHANGE_PROFILE",name:n,value:r})}),[]),C=function(e,t){var n=e.target.files[0],r=new FileReader;r.onloadend=function(e){var n=e.currentTarget.result;switch(x(n),t){case"header":y(n),i("crop",{state:{previous:o.pathname,what:"header",src:n}});break;case"photo":w(n),i("crop",{state:{previous:o.pathname,what:"photo",src:n}})}},r.readAsDataURL(n)},A=function(){var e=a(h().mark((function e(t,r,i){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ST.ref().child("".concat(n.uid,"/").concat(t)),e.next=3,a.putString(r,"data_url");case 3:return o=e.sent,e.next=6,o.ref.getDownloadURL();case 6:s=e.sent,i(s),e.t0=t,e.next="profile_photo"===e.t0?11:"profile_header"===e.t0?15:17;break;case 11:return n.updateProfile({photoURL:s}),OT(n.uid).update({photoUrl:s}),OT(n.uid).update({url:s}),e.abrupt("break",18);case 15:return OT(n.uid).update({headerUrl:s}),e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=a(h().mark((function e(t){var i,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),""!==c.userName&&OT(n.uid).update({userName:c.userName}),""!==c.introduce&&OT(n.uid).update({introduce:c.introduce}),i=function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===c.headerUrl){e.next=3;break}return e.next=3,A("profile_header",c.headerUrl,y);case 3:if(""===c.photoUrl){e.next=6;break}return e.next=6,A("profile_photo",c.photoUrl,w);case 6:case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=6,i();case 6:o={userName:""===c.userName?u.userName:c.userName,userId:u.userId,introduce:""===c.introduce?u.introduce:c.introduce,photoUrl:""===c.photoUrl?u.photoUrl:k,headerUrl:""===c.headerUrl?u.headerUrl:m,follower:u.follower,following:u.following,notifications:u.notifications},f({type:"EDIT_PROFILE",myProfile:o}),void 0!==r&&r(!0),T(),E(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){if(null!==o.state){var e=o.state;if(void 0!==e.what){var t=e.what;"header"===t&&y(c.headerUrl),"photo"===t&&w(c.photoUrl)}}}),[o.state]),(0,qT.jsxs)("section",{id:"editProfile",children:[I&&(0,qT.jsx)(RS,{}),(0,qT.jsxs)("form",{onSubmit:N,className:"back",children:[(0,qT.jsxs)("div",{id:"edit_header",children:[(0,qT.jsx)("button",{onClick:T,children:(0,qT.jsx)(zS,{})}),(0,qT.jsx)("div",{children:"\ud504\ub85c\ud544 \uc218\uc815"}),(0,qT.jsx)("input",{id:"updateProfileBtn",type:"submit",value:" \uc800\uc7a5 "})]}),(0,qT.jsxs)("div",{id:"editProfile_header",children:[(0,qT.jsx)("img",{src:void 0!==c&&""!==c.headerUrl?c.headerUrl:m,alt:"profileHeader","min-width":"50px","min-height":"50px"}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("label",{for:"profile_header_input",children:(0,qT.jsx)(iC,{})}),(0,qT.jsx)("input",{id:"profile_header_input",name:"headerUrl",type:"file",accept:"image/*",onChange:function(e){C(e,"header")},style:{display:"none"}})]})]}),(0,qT.jsxs)("div",{id:"profile_photo",children:[(0,qT.jsx)("img",{src:void 0!==c&&""!==c.photoUrl?c.photoUrl:k,alt:"profile"}),(0,qT.jsxs)("div",{children:[(0,qT.jsx)("label",{for:"profile_photo_input",children:(0,qT.jsx)(iC,{})}),(0,qT.jsx)("input",{id:"profile_photo_input",type:"file",accept:"image/*",name:"photoUrl",onChange:function(e){return C(e,"photo")},style:{display:"none"}})]})]}),(0,qT.jsxs)("div",{class:"editProfile_introduce",children:[(0,qT.jsx)("p",{children:"\uc774\ub984"}),(0,qT.jsx)("input",{type:"text",name:"userName",onChange:S,placeholder:d,id:"profile_userName"})]}),(0,qT.jsxs)("div",{class:"editProfile_introduce",children:[(0,qT.jsx)("p",{children:"\uc790\uae30 \uc18c\uac1c"}),(0,qT.jsx)("input",{id:"profile_introduce",type:"text",name:"introduce",onChange:S,placeholder:p,maxLength:"80"})]})]})]})},oC=t.memo(aC);function sC(e){return tS({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.377 10.573a7.63 7.63 0 0 1-.383-2.38V6.195a5.115 5.115 0 0 0-1.268-3.446 5.138 5.138 0 0 0-3.242-1.722c-.694-.072-1.4 0-2.07.227-.67.215-1.28.574-1.794 1.053a4.923 4.923 0 0 0-1.208 1.675 5.067 5.067 0 0 0-.431 2.022v2.2a7.61 7.61 0 0 1-.383 2.37L2 12.343l.479.658h3.505c0 .526.215 1.04.586 1.412.37.37.885.586 1.412.586.526 0 1.04-.215 1.411-.586s.587-.886.587-1.412h3.505l.478-.658-.586-1.77zm-4.69 3.147a.997.997 0 0 1-.705.299.997.997 0 0 1-.706-.3.997.997 0 0 1-.3-.705h1.999a.939.939 0 0 1-.287.706zm-5.515-1.71l.371-1.114a8.633 8.633 0 0 0 .443-2.691V6.004c0-.563.12-1.113.347-1.616.227-.514.55-.969.969-1.34.419-.382.91-.67 1.436-.837.538-.18 1.1-.24 1.65-.18a4.147 4.147 0 0 1 2.597 1.4 4.133 4.133 0 0 1 1.004 2.776v2.01c0 .909.144 1.818.443 2.691l.371 1.113h-9.63v-.012z"}}]})(e)}var uC=n(203),cC=function(e){e.userobj;var n=(0,t.useContext)(HT).myProfile,r=(0,t.useContext)(KT).myTweets,i=l((0,t.useState)([]),2),o=i[0],s=i[1],u=document.querySelectorAll(".notificationBtn"),c=l((0,t.useState)(!0),2),f=c[0],d=c[1],p=document.getElementById("wholeBtn"),m=document.getElementById("mentionBtn"),y=j(),g=L(),k=function(e){u.forEach((function(e){return e.classList.remove("check")})),e.classList.add("check")},w=function(e){"following"===e.value?mS(y,e.user,g):y("timeLine",{state:{previous:g.pathname,docId:"tweet"===e.value?e.aboutTweet.docId:e.tweet.docId,value:e.value,userId:e.user.userId,userName:e.user.userName,userUid:e.user.uid,aboutDocId:"tweet"!==e.value&&""===e.aboutTweet?null:e.aboutTweet}})};return(0,uC.useEffect)((function(){var e=function(){var e=a(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.notifications.map((function(e){var t=OT(e.user).get().then(function(){var t=a(h().mark((function t(n){var i,a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=""===e.docId||null==e.docId?null:r.filter((function(t){return t.docId===e.docId}))[0],a={value:e.value,tweet:i,user:n.data(),aboutTweet:e.aboutDocId},t.abrupt("return",a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return t}))).then((function(e){return e}));case 2:return t=e.sent,e.next=5,Promise.all(t.map((function(e){return""!==e.aboutTweet?TT.collection("tweets_".concat(e.user.uid)).doc("".concat(e.aboutTweet)).get().then((function(t){return v(v({},e),{},{aboutTweet:t.data()})})):e}))).then((function(e){return e}));case 5:i=e.sent,console.log(i),s(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();void 0!==n.notifications[0]&&e()}),[n]),(0,qT.jsxs)("section",{id:"notifications",className:"header",children:[(0,qT.jsx)("div",{children:"Notification"}),(0,qT.jsxs)("div",{id:"notificationBtns",children:[(0,qT.jsx)("button",{className:"notificationBtn",id:"wholeBtn",onClick:function(){d(!0),k(p)},children:(0,qT.jsx)("div",{id:"all",children:"All"})}),(0,qT.jsx)("button",{className:"notificationBtn",id:"mentionBtn",onClick:function(){d(!1),k(m)},children:(0,qT.jsx)("div",{id:"mention",children:"Mentions"})})]}),(0,qT.jsx)("div",{children:f?o.map((function(e){return"answer"!==e.value?(0,qT.jsxs)("div",{class:"notification",onClick:function(){return w(e)},children:[(0,qT.jsxs)("div",{className:"notification_left",children:[("qt"===e.value||"rt"===e.value)&&(0,qT.jsx)(bS,{className:"rnIcon"}),"heart"===e.value&&(0,qT.jsx)(kS,{className:"heartIcon"}),"following"===e.value&&(0,qT.jsx)(xS,{className:"followIcon"}),"tweet"===e.value&&(0,qT.jsx)(sC,{className:"tweetIcon"})]}),(0,qT.jsxs)("div",{className:"notification_right",children:[(0,qT.jsx)("img",{className:"profile_photo",src:e.user.photoUrl,alt:"usrProfilePhoto"}),(0,qT.jsx)("div",{className:"notification_inform",children:(0,qT.jsx)(qT.Fragment,{children:"tweet"===e.value?(0,qT.jsxs)("div",{children:["New tweet Notifications for \xa0",(0,qT.jsx)("span",{style:{fontWeight:"bold"},children:e.user.userName})]}):(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{style:{fontWeight:"bold"},children:e.user.userName}),"\xa0","following"===e.value?"follow you":(0,qT.jsxs)(qT.Fragment,{children:["heart"===e.value&&"like your",("qt"===e.value||"rt"===e.value)&&"retweet your","answer"===e.value&&"answer your","\xa0",e.tweet?"tweet":"reTweet"]})]})})})]})]}):(0,qT.jsx)("div",{class:"mention notification",onClick:function(){return w(e)},children:(0,qT.jsx)(OS,{is_owner:!1,tweet:e.aboutTweet,profile:e.user,IsAnswer:!1})})})):o.filter((function(e){return"answer"===e.value})).map((function(e){return(0,qT.jsx)("div",{class:"mention notification",onClick:function(){return w(e)},children:(0,qT.jsx)(OS,{is_owner:!1,tweet:e.aboutTweet,IsAnswer:!1,profile:e.user})})}))})]})},lC=function(e){var n=e.userobj,r=l((0,t.useState)(!0),2),i=r[0],o=r[1],s=(0,t.useContext)(HT),u=s.myProfile,c=s.profileDispatch,f=(0,t.useContext)($S).userProfile,d=l((0,t.useState)({userName:"",userId:"",follower:[],following:[]}),2),p=d[0],v=d[1],m=l((0,t.useState)([{photoUrl:"",userName:"",userId:"",uid:"",introduce:""}]),2),y=m[0],g=m[1],k=l((0,t.useState)([{photoUrl:"",userName:"",userId:"",uid:"",introduce:""}]),2),w=k[0],b=k[1],x=j(),_=L(),I=_.pathname,E=_.state,T=I.indexOf("/list"),S=I.slice(0,T),C=document.querySelectorAll(".listBtn"),A=document.getElementById("listFollower"),N=document.getElementById("listFollowing"),R=function(e){C.forEach((function(e){return e.classList.remove("check")})),null!==e&&e.parentNode.classList.add("check")},O=function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(p.follower.map((function(e){return OT(e).get().then((function(e){return e.data()}))})));case 2:t=e.sent,g(t),o(!0),R(A);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(p.following.map((function(e){return OT(e).get().then((function(e){return e.data()}))})));case 2:t=e.sent,b(t),o(!1),R(N);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,t.useEffect)((function(){if(null!==E&&void 0!==E.isMine){var e=E.isMine;v(e?u:f),localStorage.setItem("list",JSON.stringify(e?u:f))}}),[E,f,u]),(0,t.useEffect)((function(){if(localStorage.getItem("list")){var e=JSON.parse(localStorage.getItem("user"));v(e)}}),[]),(0,t.useEffect)((function(){_.pathname.includes("following")&&P(),_.pathname.includes("follower")&&O()}),[p]);var D=function(e){var t=e.user,r=e.followingMe,i=u.following.includes(t.uid),o=function(){var e=a(h().mark((function e(n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.target,r.classList.contains("list_followBtn")||(localStorage.setItem("user",JSON.stringify(t)),x("".concat(t.userId),{state:{pre_previous:E.previous,previous:_.pathname,value:"userProfile"}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,qT.jsx)("button",{className:"list_UserList",onClick:o,children:(0,qT.jsxs)("div",{className:"list_profile",children:[(0,qT.jsx)("img",{src:t.photoUrl,alt:"profile"}),(0,qT.jsxs)("div",{className:"list_profile_userInform",children:[(0,qT.jsxs)("div",{className:"list_profile_user",children:[(0,qT.jsxs)("div",{className:"list_userName",children:[(0,qT.jsx)("div",{children:t.userName}),(0,qT.jsxs)("div",{children:[(0,qT.jsxs)("span",{children:["@",t.userId]}),r&&(0,qT.jsx)("span",{className:"followingMe",children:"\ub098\ub97c \ud314\ub85c\uc6b0\ud569\ub2c8\ub2e4."})]})]}),i?(0,qT.jsx)("button",{className:"list_followBtn  following",onClick:function(){c({type:"UNFOLLOWING",id:t.uid,userNotifications:t.notifications.filter((function(e){return"following"!==e.value||e.user!==n.uid||null!==e.docId})),userFollower:t.follower.filter((function(e){return e!==n.uid})),following:u.following.filter((function(e){return e!==f.uid}))})},onMouseOver:function(e){var t=e.target;t.classList.add("unFollow"),t.innerText="Unfollow"},onMouseOut:function(e){var t=e.target;t.classList.remove("unFollow"),t.innerText="Following"},children:"Following"}):(0,qT.jsx)("button",{className:"list_followBtn  unfollowing",onClick:function(){c({type:"FOLLOWING",id:t.uid,userNotifications:t.notifications,userFollower:t.follower.concat(n.uid),following:u.following.concat(f.uid)})},children:"Follow"})]}),(0,qT.jsx)("div",{className:"list_userIntroduce",children:t.introduce})]})]})})};return(0,qT.jsx)(qT.Fragment,{children:""!==p.userId?(0,qT.jsxs)("div",{id:"list",children:[(0,qT.jsxs)("div",{id:"list_header",children:[(0,qT.jsx)("button",{className:"back",onClick:function(){_.pathname.includes("/twitter")?x("/twitter/".concat(S),{state:E}):x("/".concat(S),{state:E})},children:(0,qT.jsx)(_S,{})}),(0,qT.jsxs)("div",{id:"list_userInform",children:[(0,qT.jsx)("div",{children:p.userName}),(0,qT.jsxs)("div",{children:["@",p.userId]})]})]}),(0,qT.jsxs)("div",{id:"list_btn",children:[(0,qT.jsx)("button",{className:"listBtn",onClick:function(){x("".concat(S,"/list/follower"),{state:E})},children:(0,qT.jsx)("div",{id:"listFollower",children:"Follower"})}),(0,qT.jsx)("button",{className:"listBtn",onClick:function(){x("".concat(S,"/list/following"),{state:E})},children:(0,qT.jsx)("div",{id:"listFollowing",children:"Following"})})]}),(0,qT.jsx)("div",{id:"list_list",children:i?void 0!==y[0]?y.map((function(e){return(0,qT.jsx)(D,{user:e,followingMe:u.follower.includes(e.uid)})})):(0,qT.jsx)("div",{className:"notListUser",children:"There is no user ."}):void 0!==w[0]?w.map((function(e){return(0,qT.jsx)(D,{user:e,followingMe:u.follower.includes(e.uid)})})):(0,qT.jsx)("div",{className:"notListUser",children:"There is no user"})})]}):(0,qT.jsx)(RS,{})})},fC=n(891),hC=function(e){var n=e.who,r=(0,t.useContext)(KT).myTweets,i=(0,t.useContext)($S).userTweets,o=l((0,t.useState)([]),2),s=o[0],u=o[1],c=function(){var e=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.filter((function(e){return""!==e.attachmentUrl})),6!==(r=n.map((function(e){return{media:e.attachmentUrl,id:n.indexOf(e)}}))).length&&(i=function(){for(var e=0;r.length<6;e++)r.push({media:fC,id:r.length+1})},r.length>6?r=r.slice(0,6):i()),u(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){switch(n){case"currentUser":c(r);break;case"user":c(i)}}),[r,i]),(0,qT.jsx)("div",{id:"medias",children:s.map((function(e){return(0,qT.jsx)("img",{className:"media",src:e.media,alt:"side_media"},e.id)}))})},dC=function(e){var n=e.userobj,r=l((0,t.useState)([]),2),i=r[0],o=r[1],s=l((0,t.useState)([]),2),u=s[0],c=s[1],f=(0,t.useContext)(HT).myProfile,d=f.following.following,p=j(),v=L(),m=function(){var e=a(h().mark((function e(){var t,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TT.collection("users").get().then();case 2:t=e.sent.docs.map((function(e){return e.id})),void 0!==d&&void 0!==d[0]?(r=t.filter((function(e){return e!==n.uid&&!d.includes(e)})),c(r)):(i=t.filter((function(e){return e!==n.uid})),c(i));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return e.next=4,Promise.all(u.map((function(e){return OT(e).get().then((function(e){return e.data()}))}))).then((function(e){return e}));case 4:t=e.sent,o(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){y()}),[f]),(0,qT.jsx)(qT.Fragment,{children:(0,qT.jsxs)("div",{id:"recommend",children:[(0,qT.jsx)("p",{children:"Who to follow"}),(0,qT.jsx)("div",{children:i.map((function(e){return(0,qT.jsxs)("button",{className:"recommend_user",onClick:function(){return mS(p,e,v)},children:[(0,qT.jsx)(yS,{profile:e}),(0,qT.jsxs)("div",{className:"userInform",children:[(0,qT.jsx)("div",{children:e.userName}),(0,qT.jsxs)("div",{children:["@",e.userId," "]})]}),(0,qT.jsx)("button",{children:"Follow"})]},"recommend_".concat(i.indexOf(e)))}))})]})})};function pC(e){return tS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z"}}]})(e)}var vC=function(e){var n=e.userobj,r=L(),i=j(),o=(0,t.useContext)($S).userDispatch,s=(0,t.useContext)(HT).myProfile,u=r.state,c={userId:"",userName:""},f=l((0,t.useState)(c),2),d=f[0],p=f[1],m=l((0,t.useState)(""),2),y=m[0],g=m[1],k=function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RT(d.uid);case 2:t=e.sent,n=t.docs.map((function(e){return v({id:e.id},e.data())})),o({type:"GET_USER_DATA",userProfile:d,userTweets:n}),r.pathname.includes("/twitter/")?i("/twitter/".concat(d.userId),{state:{previous:r.pathname,userId:d.userId,value:"userProfile"}}):i("/".concat(d.userId),{state:{previous:r.pathname,userId:d.userId,value:"userProfile"}});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)("div",{id:"search",children:(0,qT.jsxs)("form",{children:[(0,qT.jsx)(aS,{}),(0,qT.jsx)("input",{type:"text",name:"text",placeholder:"Search  @userId",onChange:function(e){var t=e.target.value;g(t),p(c),TT.collection("users").onSnapshot((function(e){e.docs.forEach((function(e){"@".concat(e.data().userId)===t&&p(e.data())}))}))}}),(0,qT.jsx)("input",{type:"submit",disabled:!0})]})}),""!==y&&(""!==d.userId?""!==d.userId&&(0,qT.jsxs)("div",{id:"search_result",onClick:k,children:[(0,qT.jsx)(yS,{profile:d}),(0,qT.jsxs)("div",{id:"search_result_userInform",children:[(0,qT.jsx)("div",{children:d.userName}),(0,qT.jsxs)("div",{children:["@",d.userId]})]})]}):(0,qT.jsx)("div",{id:"search_result",children:(0,qT.jsxs)("div",{id:"no_result",children:['No result for "',y,'"']})})),null!==r.state&&null!==u.value&&("profile"===u.value||"userProfile"===u.value)&&(0,qT.jsx)(hC,{who:r.pathname==="/".concat(n.id)?"currentUser":"user"}),(0,qT.jsxs)("div",{id:"trend",children:[(0,qT.jsxs)("div",{children:[(0,qT.jsx)("span",{children:"Trends for you"}),(0,qT.jsx)("div",{children:(0,qT.jsx)(pC,{})})]}),(0,qT.jsx)("div",{children:(0,qT.jsxs)("ul",{children:[(0,qT.jsx)("li",{children:"Try write tweet"}),(0,qT.jsx)("li",{children:"Try push Rt and Heart"}),(0,qT.jsx)("li",{children:"Try follow or unfollow user"}),(0,qT.jsx)("li",{children:"Try click the photo to see the profile"}),(0,qT.jsx)("li",{children:"you can see notifications"}),(0,qT.jsx)("li",{children:"Try edit your profile"})]})})]}),void 0!==s&&(0,qT.jsx)(dC,{userobj:n})]})},mC=function(e){var n=e.userobj,r=L(),i=r.state,a=j(),o=(0,t.useContext)(KT).myTweets,s=l((0,t.useState)({docId:"",about:null}),2),u=s[0],c=s[1];return(0,t.useEffect)((function(){if(null==i.aboutDocId){var e=o.filter((function(e){return e.docId===i.docId}))[0];c(e)}else c(i.aboutDocId)}),[i,o]),(0,qT.jsxs)("div",{id:"timeLine",children:[(0,qT.jsxs)("div",{id:"timeLine_header",children:[(0,qT.jsx)("button",{className:"back",onClick:function(){return zT(r,"/timeLine",a)},children:(0,qT.jsx)(_S,{})}),(0,qT.jsxs)("div",{children:[(0,qT.jsxs)("div",{id:"timeLine_value",children:["heart"===i.value&&"Liked","rt"===i.value&&"Retweeted",("answer"===i.value||"tweet"===i.value||"qt"===i.value)&&"tweets"]}),(0,qT.jsx)("div",{id:"tiemLine_userId",children:i.userName})]})]}),(0,qT.jsx)("div",{id:"timeLine_tweet",children:void 0!==u&&""!==u.docId?(0,qT.jsx)(DS,{tweetObj:u,userobj:n,answer:!1}):(0,qT.jsx)(RS,{})})]})},yC=function(e){var n=e.setIsLoggedIn,r=(0,t.useContext)(KT).tweetDispatch,i=(0,t.useContext)(HT).profileDispatch,a=(0,t.useContext)($S).userDispatch,o=j(),s=L();return(0,qT.jsx)("section",{id:"logOut",children:(0,qT.jsxs)("div",{id:"logOut_inner",children:[(0,qT.jsx)("div",{id:"logOut_icon",children:(0,qT.jsx)(AS,{})}),(0,qT.jsxs)("div",{id:"logOut_alert",children:[(0,qT.jsx)("div",{children:"Log out of Twitter?"}),(0,qT.jsx)("div",{children:"You can always log back in at any time. If you just want to switch accounts, you can do that by adding an existing account."})]}),(0,qT.jsxs)("div",{id:"logOut_Btn",children:[(0,qT.jsx)("button",{onClick:function(){a({type:"CLEAR_USER"}),r({type:"CLEAR_TWEETS"}),i({type:"CLEAR_MY_PROFILE"}),n(!1),s.pathname.includes("/twitter")?o("/twitter/auth"):o("/auth"),ET.signOut()},children:"Log out"}),(0,qT.jsx)("button",{onClick:function(){o(-1)},children:"Cancel"})]})]})})},gC=function(e){var n=e.isLoggedIn,r=e.setIsLoggedIn,i=e.userobj,o=e.IsMyProfile,s=e.setIsMyProfile,u=l((0,t.useState)("/"),2),c=u[0],f=u[1],d=l((0,t.useState)("/".concat(i.id)),2),p=d[0],m=d[1],y=l((0,t.useState)(""),2),g=y[0],k=y[1],w=l((0,t.useState)(""),2),b=w[0],x=w[1],_=L(),I=_.state,E=j(),T=function(){var e=(0,t.useContext)(HT).profileDispatch,u=(0,t.useContext)(KT).tweetDispatch,d=(0,t.useContext)($S).userDispatch,y=l((0,t.useState)(null),2),w=y[0],T=y[1],S=l((0,t.useState)(null),2),C=S[0],A=S[1],R=function(){var t=a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=w){t.next=9;break}return t.next=3,RT(i.uid);case 3:if((n=t.sent).empty?console.log("Can't find currentUser's tweet"):(r=n.docs.map((function(e){return v({id:e.id},e.data())})).reverse(),T(r),u({type:"GET_TWEETS",uid:i.uid,myTweets:r})),null!=C){t.next=9;break}return t.next=9,OT(i.uid).get().then((function(t){if(t.exists){var n=t.data();A(n),e({type:"GET_MY_PROFILE",myProfile:n})}else console.log("Can't find the profile")})).catch((function(e){console.log("Error getting document:",e)}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,t.useEffect)((function(){void 0!==_&&(console.log(_.host),"/twitter/"===_.pathname&&(f("/twitter/"),m("/twitter/".concat(i.id))),n?(R(),(_.pathname.includes("/auth")||"/"===_.pathname||"/twitter/"===_.pathname)&&("/twitter/"===_.pathname?E("/twitter/home"):E("/home"))):"/twitter/"===_.pathname&&E("/twitter/auth"))}),[n]),(0,t.useEffect)((function(){if(null!==I&&"userProfile"===I.value){var e=JSON.parse(localStorage.getItem("user"));k(e.userId);var t=function(){var t=a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,t.next=3,RT(n).then((function(e){return e.docs.map((function(e){return v({id:e.id},e.data())}))}));case 3:r=t.sent,d({type:"GET_USER_DATA",userProfile:e,userTweets:r});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}if(null!==I&&"status"===I.value&&localStorage.getItem("status")){var n=JSON.parse(localStorage.getItem("status"));k(n.userId),x(n.docId)}}),[I]),(0,qT.jsx)(qT.Fragment,{children:n?void 0===o?(0,qT.jsx)(RS,{}):o?(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsxs)(O,{children:[null!==I&&null!==I.previous&&(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(N,{path:"".concat(_.state.previous,"/tweet"),element:(0,qT.jsx)(WS,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(_.state.previous,"/crop"),element:(0,qT.jsx)(cS,{})})]}),(0,qT.jsx)(N,{path:"".concat(c,"tweet"),element:(0,qT.jsx)(WS,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c,"crop"),element:(0,qT.jsx)(cS,{})}),(0,qT.jsx)(N,{exact:!0,path:"/".concat(i.id,"/editProfile"),element:(0,qT.jsx)(oC,{userobj:i})}),(0,qT.jsx)(N,{exact:!0,path:"".concat(c,"logout"),element:(0,qT.jsx)(yC,{setIsLoggedIn:r})})]}),(0,qT.jsx)("div",{id:"inner",children:(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(XS,{userobj:i}),(0,qT.jsx)("div",{id:"main",children:(0,qT.jsxs)(O,{children:[(0,qT.jsx)(N,{exact:!0,path:"".concat(c,"home"),element:(0,qT.jsx)(KS,{userobj:i})}),(0,qT.jsx)(N,{exact:!0,path:"".concat(c,"timeLine"),element:(0,qT.jsx)(mC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(g,"/status/").concat(b),element:(0,qT.jsx)(DS,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c,"home/").concat(g,"/status/").concat(b),element:(0,qT.jsx)(DS,{userobj:i})}),(0,qT.jsx)(N,{path:p,element:(0,qT.jsx)(nC,{userobj:i})}),(0,qT.jsx)(N,{exact:!0,path:"".concat(c,"notification"),element:(0,qT.jsx)(cC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(g),element:(0,qT.jsx)(rC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(g,"/list/follower"),element:(0,qT.jsx)(lC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(g,"/list/following"),element:(0,qT.jsx)(lC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(i.id,"/list/follower"),element:(0,qT.jsx)(lC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(i.id,"/list/following"),element:(0,qT.jsx)(lC,{userobj:i})}),null!==_.state&&null!==_.state.previous&&(0,qT.jsxs)(qT.Fragment,{children:[(0,qT.jsx)(N,{path:"".concat(c).concat(_.state.previous,"/timeLine"),element:(0,qT.jsx)(mC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(_.state.previous,"/").concat(g,"/status/").concat(b),element:(0,qT.jsx)(DS,{userobj:i})}),(0,qT.jsx)(N,{exact:!0,path:"".concat(c).concat(_.state.previous,"/notification"),element:(0,qT.jsx)(cC,{userobj:i})}),(0,qT.jsx)(N,{path:"".concat(c).concat(_.state.previous,"/").concat(g),element:(0,qT.jsx)(rC,{userobj:i})})]})]})}),(0,qT.jsx)("div",{id:"side",children:(0,qT.jsx)(vC,{userobj:i})})]})})]}):(0,qT.jsx)(qT.Fragment,{children:(0,qT.jsxs)(O,{children:[(0,qT.jsx)(N,{path:"".concat(c,"editProfile"),element:(0,qT.jsx)(oC,{userobj:i,setIsMyProfile:s})}),(0,qT.jsx)(N,{path:"".concat(c,"crop"),element:(0,qT.jsx)(cS,{})})]})}):void 0!==n?(0,qT.jsx)(O,{children:(0,qT.jsx)(N,{exact:!0,path:"".concat(c,"auth"),element:(0,qT.jsx)(vS,{})})}):(0,qT.jsx)(RS,{})})};return(0,qT.jsx)(ZS,{children:(0,qT.jsx)(WT,{children:(0,qT.jsx)(GT,{children:(0,qT.jsx)(T,{})})})})},kC=t.memo(gC);var wC=function(){var e=l((0,t.useState)(!1),2),n=e[0],r=e[1],i=l((0,t.useState)({}),2),o=i[0],s=i[1],u=l((0,t.useState)(),2),c=u[0],f=u[1],d="https://firebasestorage.googleapis.com/v0/b/nwitter-c8556.appspot.com/o/icons8-user-64.png?alt=media&token=0e76967a-3740-4666-a169-35523d1e07cb",p=ET.currentUser,v=function(e,t){return OT(e.uid).get().then((function(n){if(n.exists)t(!0);else{t(!1);var r={uid:e.uid,userId:e.id,userName:e.displayName,introduce:"",headerUrl:"https://firebasestorage.googleapis.com/v0/b/nwitter-c8556.appspot.com/o/basicHeader.png?alt=media&token=3fb9d8ee-95ba-4747-a64f-65c838247ca9",photoUrl:d,following:[],follower:[],notifications:[]};OT(e.uid).set(r)}})).catch((function(e){console.log("Error getting document",e)}))};return(0,t.useEffect)((function(){ET.onAuthStateChanged(function(){var e=a(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(n=t.email.indexOf("@"),i=t.email.substring(0,n),a={displayName:i,uid:t.uid,id:i,photoURL:t.photoURL,updateProfile:function(e){return t.updateProfile(e)}},null==t.displayName&&t.updateProfile({displayName:i}),null==t.photoURL&&t.updateProfile({photoURL:d}),v(a,f),s(a),r(!0)):r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());!function(e){s(Object.assign({},e))}(p)}),[p]),(0,qT.jsx)(qT.Fragment,{children:(0,qT.jsx)(kC,{isLoggedIn:n,setIsLoggedIn:r,userobj:o,IsMyProfile:c,setIsMyProfile:f})})},bC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,qT.jsx)(BS,{children:(0,qT.jsx)(t.StrictMode,{children:(0,qT.jsx)(wC,{})})}),document.getElementById("root")),bC()}()}();
//# sourceMappingURL=main.8546074a.js.map